window.__require=function t(e,o,n){function r(s,a){if(!o[s]){if(!e[s]){var c=s.split("/");if(c=c[c.length-1],!e[c]){var l="function"==typeof __require&&__require;if(!a&&l)return l(c,!0);if(i)return i(c,!0);throw new Error("Cannot find module '"+s+"'")}s=c}var h=o[s]={exports:{}};e[s][0].call(h.exports,function(t){return r(e[s][1][t]||t)},h,h.exports,t,e,o,n)}return o[s].exports}for(var i="function"==typeof __require&&__require,s=0;s<n.length;s++)r(n[s]);return r}({BroadcastCell:[function(t,e,o){"use strict";cc._RF.push(e,"6a348oaKzBDPokIf73R3P4e","BroadcastCell");var n=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});const r=t("../MobileKit/MKIndex"),i=t("./Common/UIUtils"),s=t("./Common/PrefabPool"),{ccclass:a,property:c,menu:l}=cc._decorator;let h=class extends cc.Component{constructor(){super(...arguments),this.txtBroadcast=null,this.txtBigWin=null,this.txtMegaWin=null}onLoad(){r.noticeCenter.registAllNotice(this)}setShowText(t,e,o){0==e?(this.txtBroadcast.string=r.LocalLang.get("game_broadcast_user",[t]),this.txtBigWin.string=r.LocalLang.get("game_broadcast_big_win",[i.UIUtils.getShortNumber(o)]),this.txtMegaWin.string=""):(this.txtBroadcast.string=r.LocalLang.get("game_broadcast_user",[t]),this.txtBigWin.string="",this.txtMegaWin.string=r.LocalLang.get("game_broadcast_mega_win",[t,i.UIUtils.getShortNumber(o)])),cc.tween(this.node).delay(3).call(()=>{s.default.put(this.node)}).start()}};n([c(cc.Label)],h.prototype,"txtBroadcast",void 0),n([c(cc.Label)],h.prototype,"txtBigWin",void 0),n([c(cc.Label)],h.prototype,"txtMegaWin",void 0),h=n([a],h),o.default=h,cc._RF.pop()},{"../MobileKit/MKIndex":"MKIndex","./Common/PrefabPool":"PrefabPool","./Common/UIUtils":"UIUtils"}],BroadcastData:[function(t,e,o){"use strict";cc._RF.push(e,"a24010QIg5H5YyoCppz8brV","BroadcastData"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=class{constructor(){this.m_localNotices=["test001","test002"],this.m_pushNotices=new Array,this.m_localNoticeIndex=0,this.m_pushNoticeIndex=0,this.m_localNotices=["test001","test002"],this.m_localNoticeIndex=0,this.m_pushNoticeIndex=0}addPushNotice(t,e=1){this.m_pushNotices.push({notice:t,loop:e})}getCurNotice(){if(this.m_pushNotices.length>0){this.m_pushNoticeIndex=this.m_pushNoticeIndex>=this.m_pushNotices.length?0:this.m_pushNoticeIndex;let t=this.m_pushNotices[this.m_pushNoticeIndex];return t.loop--,0==t.loop?this.m_pushNotices.splice(this.m_pushNoticeIndex,1):this.m_pushNoticeIndex++,t.notice}return this.getLocalNotice()}getLocalNotice(){if(this.m_localNotices.length>0){this.m_localNoticeIndex=this.m_localNoticeIndex>=this.m_localNotices.length?0:this.m_localNoticeIndex;let t=this.m_localNotices[this.m_localNoticeIndex];return this.m_localNoticeIndex++,t}return""}},cc._RF.pop()},{}],1:[function(t,e,o){"use strict";o.byteLength=function(t){var e=l(t),o=e[0],n=e[1];return 3*(o+n)/4-n},o.toByteArray=function(t){var e,o,n=l(t),s=n[0],a=n[1],c=new i(h(0,s,a)),u=0,p=a>0?s-4:s;for(o=0;o<p;o+=4)e=r[t.charCodeAt(o)]<<18|r[t.charCodeAt(o+1)]<<12|r[t.charCodeAt(o+2)]<<6|r[t.charCodeAt(o+3)],c[u++]=e>>16&255,c[u++]=e>>8&255,c[u++]=255&e;return 2===a&&(e=r[t.charCodeAt(o)]<<2|r[t.charCodeAt(o+1)]>>4,c[u++]=255&e),1===a&&(e=r[t.charCodeAt(o)]<<10|r[t.charCodeAt(o+1)]<<4|r[t.charCodeAt(o+2)]>>2,c[u++]=e>>8&255,c[u++]=255&e),c},o.fromByteArray=function(t){for(var e,o=t.length,r=o%3,i=[],s=0,a=o-r;s<a;s+=16383)i.push(u(t,s,s+16383>a?a:s+16383));return 1===r?(e=t[o-1],i.push(n[e>>2]+n[e<<4&63]+"==")):2===r&&(e=(t[o-2]<<8)+t[o-1],i.push(n[e>>10]+n[e>>4&63]+n[e<<2&63]+"=")),i.join("")};for(var n=[],r=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,c=s.length;a<c;++a)n[a]=s[a],r[s.charCodeAt(a)]=a;function l(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var o=t.indexOf("=");return-1===o&&(o=e),[o,o===e?0:4-o%4]}function h(t,e,o){return 3*(e+o)/4-o}function u(t,e,o){for(var r,i,s=[],a=e;a<o;a+=3)r=(t[a]<<16&16711680)+(t[a+1]<<8&65280)+(255&t[a+2]),s.push(n[(i=r)>>18&63]+n[i>>12&63]+n[i>>6&63]+n[63&i]);return s.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},{}],2:[function(){},{}],3:[function(t,e,o){(function(e){"use strict";var n=t("base64-js"),r=t("ieee754"),i=t("isarray");function s(){return c.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(t,e){if(s()<e)throw new RangeError("Invalid typed array length");return c.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=c.prototype:(null===t&&(t=new c(e)),t.length=e),t}function c(t,e,o){if(!(c.TYPED_ARRAY_SUPPORT||this instanceof c))return new c(t,e,o);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return p(this,t)}return l(this,t,e,o)}function l(t,e,o,n){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?g(t,e,o,n):"string"==typeof e?d(t,e,o):m(t,e)}function h(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function u(t,e,o,n){return h(e),e<=0?a(t,e):void 0!==o?"string"==typeof n?a(t,e).fill(o,n):a(t,e).fill(o):a(t,e)}function p(t,e){if(h(e),t=a(t,e<0?0:0|y(e)),!c.TYPED_ARRAY_SUPPORT)for(var o=0;o<e;++o)t[o]=0;return t}function d(t,e,o){if("string"==typeof o&&""!==o||(o="utf8"),!c.isEncoding(o))throw new TypeError('"encoding" must be a valid string encoding');var n=0|C(e,o),r=(t=a(t,n)).write(e,o);return r!==n&&(t=t.slice(0,r)),t}function f(t,e){var o=e.length<0?0:0|y(e.length);t=a(t,o);for(var n=0;n<o;n+=1)t[n]=255&e[n];return t}function g(t,e,o,n){if(e.byteLength,o<0||e.byteLength<o)throw new RangeError("'offset' is out of bounds");if(e.byteLength<o+(n||0))throw new RangeError("'length' is out of bounds");return e=void 0===o&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,o):new Uint8Array(e,o,n),c.TYPED_ARRAY_SUPPORT?(t=e).__proto__=c.prototype:t=f(t,e),t}function m(t,e){if(c.isBuffer(e)){var o=0|y(e.length);return 0===(t=a(t,o)).length?t:(e.copy(t,0,0,o),t)}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(n=e.length)!=n?a(t,0):f(t,e);if("Buffer"===e.type&&i(e.data))return f(t,e.data)}var n;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function y(t){if(t>=s())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s().toString(16)+" bytes");return 0|t}function C(t,e){if(c.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var o=t.length;if(0===o)return 0;for(var n=!1;;)switch(e){case"ascii":case"latin1":case"binary":return o;case"utf8":case"utf-8":case void 0:return J(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*o;case"hex":return o>>>1;case"base64":return X(t).length;default:if(n)return J(t).length;e=(""+e).toLowerCase(),n=!0}}function b(t,e,o){var n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===o||o>this.length)&&(o=this.length),o<=0)return"";if((o>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return E(this,e,o);case"utf8":case"utf-8":return R(this,e,o);case"ascii":return A(this,e,o);case"latin1":case"binary":return B(this,e,o);case"base64":return T(this,e,o);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,e,o);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function v(t,e,o){var n=t[e];t[e]=t[o],t[o]=n}function k(t,e,o,n,r){if(0===t.length)return-1;if("string"==typeof o?(n=o,o=0):o>2147483647?o=2147483647:o<-2147483648&&(o=-2147483648),o=+o,isNaN(o)&&(o=r?0:t.length-1),o<0&&(o=t.length+o),o>=t.length){if(r)return-1;o=t.length-1}else if(o<0){if(!r)return-1;o=0}if("string"==typeof e&&(e=c.from(e,n)),c.isBuffer(e))return 0===e.length?-1:S(t,e,o,n,r);if("number"==typeof e)return e&=255,c.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?r?Uint8Array.prototype.indexOf.call(t,e,o):Uint8Array.prototype.lastIndexOf.call(t,e,o):S(t,[e],o,n,r);throw new TypeError("val must be string, number or Buffer")}function S(t,e,o,n,r){var i,s=1,a=t.length,c=e.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;s=2,a/=2,c/=2,o/=2}function l(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}if(r){var h=-1;for(i=o;i<a;i++)if(l(t,i)===l(e,-1===h?0:i-h)){if(-1===h&&(h=i),i-h+1===c)return h*s}else-1!==h&&(i-=i-h),h=-1}else for(o+c>a&&(o=a-c),i=o;i>=0;i--){for(var u=!0,p=0;p<c;p++)if(l(t,i+p)!==l(e,p)){u=!1;break}if(u)return i}return-1}function w(t,e,o,n){o=Number(o)||0;var r=t.length-o;n?(n=Number(n))>r&&(n=r):n=r;var i=e.length;if(i%2!=0)throw new TypeError("Invalid hex string");n>i/2&&(n=i/2);for(var s=0;s<n;++s){var a=parseInt(e.substr(2*s,2),16);if(isNaN(a))return s;t[o+s]=a}return s}function P(t,e,o,n){return Q(J(e,t.length-o),t,o,n)}function _(t,e,o,n){return Q(z(e),t,o,n)}function D(t,e,o,n){return _(t,e,o,n)}function L(t,e,o,n){return Q(X(e),t,o,n)}function N(t,e,o,n){return Q(Y(e,t.length-o),t,o,n)}function T(t,e,o){return 0===e&&o===t.length?n.fromByteArray(t):n.fromByteArray(t.slice(e,o))}function R(t,e,o){o=Math.min(t.length,o);for(var n=[],r=e;r<o;){var i,s,a,c,l=t[r],h=null,u=l>239?4:l>223?3:l>191?2:1;if(r+u<=o)switch(u){case 1:l<128&&(h=l);break;case 2:128==(192&(i=t[r+1]))&&(c=(31&l)<<6|63&i)>127&&(h=c);break;case 3:i=t[r+1],s=t[r+2],128==(192&i)&&128==(192&s)&&(c=(15&l)<<12|(63&i)<<6|63&s)>2047&&(c<55296||c>57343)&&(h=c);break;case 4:i=t[r+1],s=t[r+2],a=t[r+3],128==(192&i)&&128==(192&s)&&128==(192&a)&&(c=(15&l)<<18|(63&i)<<12|(63&s)<<6|63&a)>65535&&c<1114112&&(h=c)}null===h?(h=65533,u=1):h>65535&&(h-=65536,n.push(h>>>10&1023|55296),h=56320|1023&h),n.push(h),r+=u}return x(n)}o.Buffer=c,o.SlowBuffer=function(t){return+t!=t&&(t=0),c.alloc(+t)},o.INSPECT_MAX_BYTES=50,c.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(e){return!1}}(),o.kMaxLength=s(),c.poolSize=8192,c._augment=function(t){return t.__proto__=c.prototype,t},c.from=function(t,e,o){return l(null,t,e,o)},c.TYPED_ARRAY_SUPPORT&&(c.prototype.__proto__=Uint8Array.prototype,c.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&c[Symbol.species]===c&&Object.defineProperty(c,Symbol.species,{value:null,configurable:!0})),c.alloc=function(t,e,o){return u(null,t,e,o)},c.allocUnsafe=function(t){return p(null,t)},c.allocUnsafeSlow=function(t){return p(null,t)},c.isBuffer=function(t){return!(null==t||!t._isBuffer)},c.compare=function(t,e){if(!c.isBuffer(t)||!c.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var o=t.length,n=e.length,r=0,i=Math.min(o,n);r<i;++r)if(t[r]!==e[r]){o=t[r],n=e[r];break}return o<n?-1:n<o?1:0},c.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(t,e){if(!i(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return c.alloc(0);var o;if(void 0===e)for(e=0,o=0;o<t.length;++o)e+=t[o].length;var n=c.allocUnsafe(e),r=0;for(o=0;o<t.length;++o){var s=t[o];if(!c.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(n,r),r+=s.length}return n},c.byteLength=C,c.prototype._isBuffer=!0,c.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)v(this,e,e+1);return this},c.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)v(this,e,e+3),v(this,e+1,e+2);return this},c.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)v(this,e,e+7),v(this,e+1,e+6),v(this,e+2,e+5),v(this,e+3,e+4);return this},c.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?R(this,0,t):b.apply(this,arguments)},c.prototype.equals=function(t){if(!c.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===c.compare(this,t)},c.prototype.inspect=function(){var t="",e=o.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,e).match(/.{2}/g).join(" "),this.length>e&&(t+=" ... ")),"<Buffer "+t+">"},c.prototype.compare=function(t,e,o,n,r){if(!c.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===o&&(o=t?t.length:0),void 0===n&&(n=0),void 0===r&&(r=this.length),e<0||o>t.length||n<0||r>this.length)throw new RangeError("out of range index");if(n>=r&&e>=o)return 0;if(n>=r)return-1;if(e>=o)return 1;if(this===t)return 0;for(var i=(r>>>=0)-(n>>>=0),s=(o>>>=0)-(e>>>=0),a=Math.min(i,s),l=this.slice(n,r),h=t.slice(e,o),u=0;u<a;++u)if(l[u]!==h[u]){i=l[u],s=h[u];break}return i<s?-1:s<i?1:0},c.prototype.includes=function(t,e,o){return-1!==this.indexOf(t,e,o)},c.prototype.indexOf=function(t,e,o){return k(this,t,e,o,!0)},c.prototype.lastIndexOf=function(t,e,o){return k(this,t,e,o,!1)},c.prototype.write=function(t,e,o,n){if(void 0===e)n="utf8",o=this.length,e=0;else if(void 0===o&&"string"==typeof e)n=e,o=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(o)?(o|=0,void 0===n&&(n="utf8")):(n=o,o=void 0)}var r=this.length-e;if((void 0===o||o>r)&&(o=r),t.length>0&&(o<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var i=!1;;)switch(n){case"hex":return w(this,t,e,o);case"utf8":case"utf-8":return P(this,t,e,o);case"ascii":return _(this,t,e,o);case"latin1":case"binary":return D(this,t,e,o);case"base64":return L(this,t,e,o);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return N(this,t,e,o);default:if(i)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),i=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var M=4096;function x(t){var e=t.length;if(e<=M)return String.fromCharCode.apply(String,t);for(var o="",n=0;n<e;)o+=String.fromCharCode.apply(String,t.slice(n,n+=M));return o}function A(t,e,o){var n="";o=Math.min(t.length,o);for(var r=e;r<o;++r)n+=String.fromCharCode(127&t[r]);return n}function B(t,e,o){var n="";o=Math.min(t.length,o);for(var r=e;r<o;++r)n+=String.fromCharCode(t[r]);return n}function E(t,e,o){var n,r=t.length;(!e||e<0)&&(e=0),(!o||o<0||o>r)&&(o=r);for(var i="",s=e;s<o;++s)i+=(n=t[s])<16?"0"+n.toString(16):n.toString(16);return i}function O(t,e,o){for(var n=t.slice(e,o),r="",i=0;i<n.length;i+=2)r+=String.fromCharCode(n[i]+256*n[i+1]);return r}function F(t,e,o){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>o)throw new RangeError("Trying to access beyond buffer length")}function I(t,e,o,n,r,i){if(!c.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>r||e<i)throw new RangeError('"value" argument is out of bounds');if(o+n>t.length)throw new RangeError("Index out of range")}function G(t,e,o,n){e<0&&(e=65535+e+1);for(var r=0,i=Math.min(t.length-o,2);r<i;++r)t[o+r]=(e&255<<8*(n?r:1-r))>>>8*(n?r:1-r)}function U(t,e,o,n){e<0&&(e=4294967295+e+1);for(var r=0,i=Math.min(t.length-o,4);r<i;++r)t[o+r]=e>>>8*(n?r:3-r)&255}function j(t,e,o,n){if(o+n>t.length)throw new RangeError("Index out of range");if(o<0)throw new RangeError("Index out of range")}function H(t,e,o,n,i){return i||j(t,0,o,4),r.write(t,e,o,n,23,4),o+4}function W(t,e,o,n,i){return i||j(t,0,o,8),r.write(t,e,o,n,52,8),o+8}c.prototype.slice=function(t,e){var o,n=this.length;if((t=~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),(e=void 0===e?n:~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),e<t&&(e=t),c.TYPED_ARRAY_SUPPORT)(o=this.subarray(t,e)).__proto__=c.prototype;else{var r=e-t;o=new c(r,void 0);for(var i=0;i<r;++i)o[i]=this[i+t]}return o},c.prototype.readUIntLE=function(t,e,o){t|=0,e|=0,o||F(t,e,this.length);for(var n=this[t],r=1,i=0;++i<e&&(r*=256);)n+=this[t+i]*r;return n},c.prototype.readUIntBE=function(t,e,o){t|=0,e|=0,o||F(t,e,this.length);for(var n=this[t+--e],r=1;e>0&&(r*=256);)n+=this[t+--e]*r;return n},c.prototype.readUInt8=function(t,e){return e||F(t,1,this.length),this[t]},c.prototype.readUInt16LE=function(t,e){return e||F(t,2,this.length),this[t]|this[t+1]<<8},c.prototype.readUInt16BE=function(t,e){return e||F(t,2,this.length),this[t]<<8|this[t+1]},c.prototype.readUInt32LE=function(t,e){return e||F(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},c.prototype.readUInt32BE=function(t,e){return e||F(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},c.prototype.readIntLE=function(t,e,o){t|=0,e|=0,o||F(t,e,this.length);for(var n=this[t],r=1,i=0;++i<e&&(r*=256);)n+=this[t+i]*r;return n>=(r*=128)&&(n-=Math.pow(2,8*e)),n},c.prototype.readIntBE=function(t,e,o){t|=0,e|=0,o||F(t,e,this.length);for(var n=e,r=1,i=this[t+--n];n>0&&(r*=256);)i+=this[t+--n]*r;return i>=(r*=128)&&(i-=Math.pow(2,8*e)),i},c.prototype.readInt8=function(t,e){return e||F(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},c.prototype.readInt16LE=function(t,e){e||F(t,2,this.length);var o=this[t]|this[t+1]<<8;return 32768&o?4294901760|o:o},c.prototype.readInt16BE=function(t,e){e||F(t,2,this.length);var o=this[t+1]|this[t]<<8;return 32768&o?4294901760|o:o},c.prototype.readInt32LE=function(t,e){return e||F(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},c.prototype.readInt32BE=function(t,e){return e||F(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},c.prototype.readFloatLE=function(t,e){return e||F(t,4,this.length),r.read(this,t,!0,23,4)},c.prototype.readFloatBE=function(t,e){return e||F(t,4,this.length),r.read(this,t,!1,23,4)},c.prototype.readDoubleLE=function(t,e){return e||F(t,8,this.length),r.read(this,t,!0,52,8)},c.prototype.readDoubleBE=function(t,e){return e||F(t,8,this.length),r.read(this,t,!1,52,8)},c.prototype.writeUIntLE=function(t,e,o,n){t=+t,e|=0,o|=0,n||I(this,t,e,o,Math.pow(2,8*o)-1,0);var r=1,i=0;for(this[e]=255&t;++i<o&&(r*=256);)this[e+i]=t/r&255;return e+o},c.prototype.writeUIntBE=function(t,e,o,n){t=+t,e|=0,o|=0,n||I(this,t,e,o,Math.pow(2,8*o)-1,0);var r=o-1,i=1;for(this[e+r]=255&t;--r>=0&&(i*=256);)this[e+r]=t/i&255;return e+o},c.prototype.writeUInt8=function(t,e,o){return t=+t,e|=0,o||I(this,t,e,1,255,0),c.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},c.prototype.writeUInt16LE=function(t,e,o){return t=+t,e|=0,o||I(this,t,e,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):G(this,t,e,!0),e+2},c.prototype.writeUInt16BE=function(t,e,o){return t=+t,e|=0,o||I(this,t,e,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):G(this,t,e,!1),e+2},c.prototype.writeUInt32LE=function(t,e,o){return t=+t,e|=0,o||I(this,t,e,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):U(this,t,e,!0),e+4},c.prototype.writeUInt32BE=function(t,e,o){return t=+t,e|=0,o||I(this,t,e,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):U(this,t,e,!1),e+4},c.prototype.writeIntLE=function(t,e,o,n){if(t=+t,e|=0,!n){var r=Math.pow(2,8*o-1);I(this,t,e,o,r-1,-r)}var i=0,s=1,a=0;for(this[e]=255&t;++i<o&&(s*=256);)t<0&&0===a&&0!==this[e+i-1]&&(a=1),this[e+i]=(t/s>>0)-a&255;return e+o},c.prototype.writeIntBE=function(t,e,o,n){if(t=+t,e|=0,!n){var r=Math.pow(2,8*o-1);I(this,t,e,o,r-1,-r)}var i=o-1,s=1,a=0;for(this[e+i]=255&t;--i>=0&&(s*=256);)t<0&&0===a&&0!==this[e+i+1]&&(a=1),this[e+i]=(t/s>>0)-a&255;return e+o},c.prototype.writeInt8=function(t,e,o){return t=+t,e|=0,o||I(this,t,e,1,127,-128),c.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},c.prototype.writeInt16LE=function(t,e,o){return t=+t,e|=0,o||I(this,t,e,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):G(this,t,e,!0),e+2},c.prototype.writeInt16BE=function(t,e,o){return t=+t,e|=0,o||I(this,t,e,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):G(this,t,e,!1),e+2},c.prototype.writeInt32LE=function(t,e,o){return t=+t,e|=0,o||I(this,t,e,4,2147483647,-2147483648),c.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):U(this,t,e,!0),e+4},c.prototype.writeInt32BE=function(t,e,o){return t=+t,e|=0,o||I(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),c.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):U(this,t,e,!1),e+4},c.prototype.writeFloatLE=function(t,e,o){return H(this,t,e,!0,o)},c.prototype.writeFloatBE=function(t,e,o){return H(this,t,e,!1,o)},c.prototype.writeDoubleLE=function(t,e,o){return W(this,t,e,!0,o)},c.prototype.writeDoubleBE=function(t,e,o){return W(this,t,e,!1,o)},c.prototype.copy=function(t,e,o,n){if(o||(o=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<o&&(n=o),n===o)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(o<0||o>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-o&&(n=t.length-e+o);var r,i=n-o;if(this===t&&o<e&&e<n)for(r=i-1;r>=0;--r)t[r+e]=this[r+o];else if(i<1e3||!c.TYPED_ARRAY_SUPPORT)for(r=0;r<i;++r)t[r+e]=this[r+o];else Uint8Array.prototype.set.call(t,this.subarray(o,o+i),e);return i},c.prototype.fill=function(t,e,o,n){if("string"==typeof t){if("string"==typeof e?(n=e,e=0,o=this.length):"string"==typeof o&&(n=o,o=this.length),1===t.length){var r=t.charCodeAt(0);r<256&&(t=r)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!c.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<o)throw new RangeError("Out of range index");if(o<=e)return this;var i;if(e>>>=0,o=void 0===o?this.length:o>>>0,t||(t=0),"number"==typeof t)for(i=e;i<o;++i)this[i]=t;else{var s=c.isBuffer(t)?t:J(new c(t,n).toString()),a=s.length;for(i=0;i<o-e;++i)this[i+e]=s[i%a]}return this};var K=/[^+\/0-9A-Za-z-_]/g;function q(t){if((t=V(t).replace(K,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}function V(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function J(t,e){var o;e=e||1/0;for(var n=t.length,r=null,i=[],s=0;s<n;++s){if((o=t.charCodeAt(s))>55295&&o<57344){if(!r){if(o>56319){(e-=3)>-1&&i.push(239,191,189);continue}if(s+1===n){(e-=3)>-1&&i.push(239,191,189);continue}r=o;continue}if(o<56320){(e-=3)>-1&&i.push(239,191,189),r=o;continue}o=65536+(r-55296<<10|o-56320)}else r&&(e-=3)>-1&&i.push(239,191,189);if(r=null,o<128){if((e-=1)<0)break;i.push(o)}else if(o<2048){if((e-=2)<0)break;i.push(o>>6|192,63&o|128)}else if(o<65536){if((e-=3)<0)break;i.push(o>>12|224,o>>6&63|128,63&o|128)}else{if(!(o<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;i.push(o>>18|240,o>>12&63|128,o>>6&63|128,63&o|128)}}return i}function z(t){for(var e=[],o=0;o<t.length;++o)e.push(255&t.charCodeAt(o));return e}function Y(t,e){for(var o,n,r,i=[],s=0;s<t.length&&!((e-=2)<0);++s)n=(o=t.charCodeAt(s))>>8,r=o%256,i.push(r),i.push(n);return i}function X(t){return n.toByteArray(q(t))}function Q(t,e,o,n){for(var r=0;r<n&&!(r+o>=e.length||r>=t.length);++r)e[r+o]=t[r];return r}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"base64-js":1,ieee754:5,isarray:4}],4:[function(t,e){var o={}.toString;e.exports=Array.isArray||function(t){return"[object Array]"==o.call(t)}},{}],5:[function(t,e,o){o.read=function(t,e,o,n,r){var i,s,a=8*r-n-1,c=(1<<a)-1,l=c>>1,h=-7,u=o?r-1:0,p=o?-1:1,d=t[e+u];for(u+=p,i=d&(1<<-h)-1,d>>=-h,h+=a;h>0;i=256*i+t[e+u],u+=p,h-=8);for(s=i&(1<<-h)-1,i>>=-h,h+=n;h>0;s=256*s+t[e+u],u+=p,h-=8);if(0===i)i=1-l;else{if(i===c)return s?NaN:1/0*(d?-1:1);s+=Math.pow(2,n),i-=l}return(d?-1:1)*s*Math.pow(2,i-n)},o.write=function(t,e,o,n,r,i){var s,a,c,l=8*i-r-1,h=(1<<l)-1,u=h>>1,p=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,d=n?0:i-1,f=n?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=h):(s=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-s))<1&&(s--,c*=2),(e+=s+u>=1?p/c:p*Math.pow(2,1-u))*c>=2&&(s++,c/=2),s+u>=h?(a=0,s=h):s+u>=1?(a=(e*c-1)*Math.pow(2,r),s+=u):(a=e*Math.pow(2,u-1)*Math.pow(2,r),s=0));r>=8;t[o+d]=255&a,d+=f,a/=256,r-=8);for(s=s<<r|a,l+=r;l>0;t[o+d]=255&s,d+=f,s/=256,l-=8);t[o+d-f]|=128*g}},{}],6:[function(t,e){var o,n,r=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(t){if(o===setTimeout)return setTimeout(t,0);if((o===i||!o)&&setTimeout)return o=setTimeout,setTimeout(t,0);try{return o(t,0)}catch(e){try{return o.call(null,t,0)}catch(e){return o.call(this,t,0)}}}function c(t){if(n===clearTimeout)return clearTimeout(t);if((n===s||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{return n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(function(){try{o="function"==typeof setTimeout?setTimeout:i}catch(t){o=i}try{n="function"==typeof clearTimeout?clearTimeout:s}catch(t){n=s}})();var l,h=[],u=!1,p=-1;function d(){u&&l&&(u=!1,l.length?h=l.concat(h):p=-1,h.length&&f())}function f(){if(!u){var t=a(d);u=!0;for(var e=h.length;e;){for(l=h,h=[];++p<e;)l&&l[p].run();p=-1,e=h.length}l=null,u=!1,c(t)}}function g(t,e){this.fun=t,this.array=e}function m(){}r.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var o=1;o<arguments.length;o++)e[o-1]=arguments[o];h.push(new g(t,e)),1!==h.length||u||a(f)},g.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=m,r.addListener=m,r.once=m,r.off=m,r.removeListener=m,r.removeAllListeners=m,r.emit=m,r.prependListener=m,r.prependOnceListener=m,r.listeners=function(){return[]},r.binding=function(){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},{}],7:[function(t,e){function o(){}e.exports=function(t,e,n){var r=!1;return n=n||o,i.count=t,0===t?e():i;function i(t,o){if(i.count<=0)throw new Error("after called too many times");--i.count,t?(r=!0,e(t),e=n):0!==i.count||r||e(null,o)}}},{}],8:[function(t,e){e.exports=function(t,e,o){var n=t.byteLength;if(e=e||0,o=o||n,t.slice)return t.slice(e,o);if(e<0&&(e+=n),o<0&&(o+=n),o>n&&(o=n),e>=n||e>=o||0===n)return new ArrayBuffer(0);for(var r=new Uint8Array(t),i=new Uint8Array(o-e),s=e,a=0;s<o;s++,a++)i[a]=r[s];return i.buffer}},{}],9:[function(t,e){function o(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}e.exports=o,o.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),o=Math.floor(e*this.jitter*t);t=0==(1&Math.floor(10*e))?t-o:t+o}return 0|Math.min(t,this.max)},o.prototype.reset=function(){this.attempts=0},o.prototype.setMin=function(t){this.ms=t},o.prototype.setMax=function(t){this.max=t},o.prototype.setJitter=function(t){this.jitter=t}},{}],10:[function(t,e,o){(function(t){"use strict";o.encode=function(e){var o,n=new Uint8Array(e),r=n.length,i="";for(o=0;o<r;o+=3)i+=t[n[o]>>2],i+=t[(3&n[o])<<4|n[o+1]>>4],i+=t[(15&n[o+1])<<2|n[o+2]>>6],i+=t[63&n[o+2]];return r%3==2?i=i.substring(0,i.length-1)+"=":r%3==1&&(i=i.substring(0,i.length-2)+"=="),i},o.decode=function(e){var o,n,r,i,s,a=.75*e.length,c=e.length,l=0;"="===e[e.length-1]&&(a--,"="===e[e.length-2]&&a--);var h=new ArrayBuffer(a),u=new Uint8Array(h);for(o=0;o<c;o+=4)n=t.indexOf(e[o]),r=t.indexOf(e[o+1]),i=t.indexOf(e[o+2]),s=t.indexOf(e[o+3]),u[l++]=n<<2|r>>4,u[l++]=(15&r)<<4|i>>2,u[l++]=(3&i)<<6|63&s;return h}})("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/")},{}],11:[function(t,e){var o=void 0!==o?o:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder&&MozBlobBuilder,n=function(){try{return 2===new Blob(["hi"]).size}catch(t){return!1}}(),r=n&&function(){try{return 2===new Blob([new Uint8Array([1,2])]).size}catch(t){return!1}}(),i=o&&o.prototype.append&&o.prototype.getBlob;function s(t){return t.map(function(t){if(t.buffer instanceof ArrayBuffer){var e=t.buffer;if(t.byteLength!==e.byteLength){var o=new Uint8Array(t.byteLength);o.set(new Uint8Array(e,t.byteOffset,t.byteLength)),e=o.buffer}return e}return t})}function a(t,e){e=e||{};var n=new o;return s(t).forEach(function(t){n.append(t)}),e.type?n.getBlob(e.type):n.getBlob()}function c(t,e){return new Blob(s(t),e||{})}"undefined"!=typeof Blob&&(a.prototype=Blob.prototype,c.prototype=Blob.prototype),e.exports=n?r?Blob:c:i?a:void 0},{}],12:[function(t,e){var o=[].slice;e.exports=function(t,e){if("string"==typeof e&&(e=t[e]),"function"!=typeof e)throw new Error("bind() requires a function");var n=o.call(arguments,2);return function(){return e.apply(t,n.concat(o.call(arguments)))}}},{}],13:[function(t,e){function o(t){if(t)return n(t)}function n(t){for(var e in o.prototype)t[e]=o.prototype[e];return t}void 0!==e&&(e.exports=o),o.prototype.on=o.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this},o.prototype.once=function(t,e){function o(){this.off(t,o),e.apply(this,arguments)}return o.fn=e,this.on(t,o),this},o.prototype.off=o.prototype.removeListener=o.prototype.removeAllListeners=o.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var o,n=this._callbacks["$"+t];if(!n)return this;if(1==arguments.length)return delete this._callbacks["$"+t],this;for(var r=0;r<n.length;r++)if((o=n[r])===e||o.fn===e){n.splice(r,1);break}return 0===n.length&&delete this._callbacks["$"+t],this},o.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),o=this._callbacks["$"+t],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(o){n=0;for(var r=(o=o.slice(0)).length;n<r;++n)o[n].apply(this,e)}return this},o.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]},o.prototype.hasListeners=function(t){return!!this.listeners(t).length}},{}],14:[function(t,e){e.exports=function(t,e){var o=function(){};o.prototype=e.prototype,t.prototype=new o,t.prototype.constructor=t}},{}],15:[function(t,e,o){(function(n){function r(){var t;try{t=o.storage.debug}catch(e){}return!t&&void 0!==n&&"env"in n&&(t=n.env.DEBUG),t}(o=e.exports=t("./debug")).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},o.formatArgs=function(t){var e=this.useColors;if(t[0]=(e?"%c":"")+this.namespace+(e?" %c":" ")+t[0]+(e?"%c ":" ")+"+"+o.humanize(this.diff),e){var n="color: "+this.color;t.splice(1,0,n,"color: inherit");var r=0,i=0;t[0].replace(/%[a-zA-Z%]/g,function(t){"%%"!==t&&(r++,"%c"===t&&(i=r))}),t.splice(i,0,n)}},o.save=function(t){try{null==t?o.storage.removeItem("debug"):o.storage.debug=t}catch(e){}},o.load=r,o.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},o.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(t){}}(),o.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],o.formatters.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},o.enable(r())}).call(this,t("_process"))},{"./debug":16,_process:6}],16:[function(t,e,o){function n(t){var e,n=0;for(e in t)n=(n<<5)-n+t.charCodeAt(e),n|=0;return o.colors[Math.abs(n)%o.colors.length]}function r(t){var e;function r(){if(r.enabled){var t=r,n=+new Date,i=n-(e||n);t.diff=i,t.prev=e,t.curr=n,e=n;for(var s=new Array(arguments.length),a=0;a<s.length;a++)s[a]=arguments[a];s[0]=o.coerce(s[0]),"string"!=typeof s[0]&&s.unshift("%O");var c=0;s[0]=s[0].replace(/%([a-zA-Z%])/g,function(e,n){if("%%"===e)return e;c++;var r=o.formatters[n];if("function"==typeof r){var i=s[c];e=r.call(t,i),s.splice(c,1),c--}return e}),o.formatArgs.call(t,s),(r.log||o.log||console.log.bind(console)).apply(t,s)}}return r.namespace=t,r.enabled=o.enabled(t),r.useColors=o.useColors(),r.color=n(t),r.destroy=i,"function"==typeof o.init&&o.init(r),o.instances.push(r),r}function i(){var t=o.instances.indexOf(this);return-1!==t&&(o.instances.splice(t,1),!0)}(o=e.exports=r.debug=r.default=r).coerce=function(t){return t instanceof Error?t.stack||t.message:t},o.disable=function(){o.enable("")},o.enable=function(t){var e;o.save(t),o.names=[],o.skips=[];var n=("string"==typeof t?t:"").split(/[\s,]+/),r=n.length;for(e=0;e<r;e++)n[e]&&("-"===(t=n[e].replace(/\*/g,".*?"))[0]?o.skips.push(new RegExp("^"+t.substr(1)+"$")):o.names.push(new RegExp("^"+t+"$")));for(e=0;e<o.instances.length;e++){var i=o.instances[e];i.enabled=o.enabled(i.namespace)}},o.enabled=function(t){if("*"===t[t.length-1])return!0;var e,n;for(e=0,n=o.skips.length;e<n;e++)if(o.skips[e].test(t))return!1;for(e=0,n=o.names.length;e<n;e++)if(o.names[e].test(t))return!0;return!1},o.humanize=t("ms"),o.instances=[],o.names=[],o.skips=[],o.formatters={}},{ms:35}],17:[function(t,e){e.exports="undefined"!=typeof self?self:"undefined"!=typeof window?window:Function("","return this")()},{}],18:[function(t,e){e.exports=t("./socket"),e.exports.parser=t("engine.io-parser")},{"./socket":19,"engine.io-parser":27}],19:[function(t,e){var o=t("./transports/index"),n=t("component-emitter"),r=t("debug")("engine.io-client:socket"),i=t("indexof"),s=t("engine.io-parser"),a=t("parseuri"),c=t("parseqs");function l(t,e){if(!(this instanceof l))return new l(t,e);e=e||{},t&&"object"==typeof t&&(e=t,t=null),t?(t=a(t),e.hostname=t.host,e.secure="https"===t.protocol||"wss"===t.protocol,e.port=t.port,t.query&&(e.query=t.query)):e.host&&(e.hostname=a(e.host).host),this.secure=null!=e.secure?e.secure:"undefined"!=typeof location&&"https:"===location.protocol,e.hostname&&!e.port&&(e.port=this.secure?"443":"80"),this.agent=e.agent||!1,this.hostname=e.hostname||("undefined"!=typeof location?location.hostname:"localhost"),this.port=e.port||("undefined"!=typeof location&&location.port?location.port:this.secure?443:80),this.query=e.query||{},"string"==typeof this.query&&(this.query=c.decode(this.query)),this.upgrade=!1!==e.upgrade,this.path=(e.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!e.forceJSONP,this.jsonp=!1!==e.jsonp,this.forceBase64=!!e.forceBase64,this.enablesXDR=!!e.enablesXDR,this.withCredentials=!1!==e.withCredentials,this.timestampParam=e.timestampParam||"t",this.timestampRequests=e.timestampRequests,this.transports=e.transports||["polling","websocket"],this.transportOptions=e.transportOptions||{},this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.policyPort=e.policyPort||843,this.rememberUpgrade=e.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=e.onlyBinaryUpgrades,this.perMessageDeflate=!1!==e.perMessageDeflate&&(e.perMessageDeflate||{}),!0===this.perMessageDeflate&&(this.perMessageDeflate={}),this.perMessageDeflate&&null==this.perMessageDeflate.threshold&&(this.perMessageDeflate.threshold=1024),this.pfx=e.pfx||void 0,this.key=e.key||void 0,this.passphrase=e.passphrase||void 0,this.cert=e.cert||void 0,this.ca=e.ca||void 0,this.ciphers=e.ciphers||void 0,this.rejectUnauthorized=void 0===e.rejectUnauthorized||e.rejectUnauthorized,this.forceNode=!!e.forceNode,this.isReactNative="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase(),("undefined"==typeof self||this.isReactNative)&&(e.extraHeaders&&Object.keys(e.extraHeaders).length>0&&(this.extraHeaders=e.extraHeaders),e.localAddress&&(this.localAddress=e.localAddress)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingIntervalTimer=null,this.pingTimeoutTimer=null,this.open()}function h(t){var e={};for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);return e}e.exports=l,l.priorWebsocketSuccess=!1,n(l.prototype),l.protocol=s.protocol,l.Socket=l,l.Transport=t("./transport"),l.transports=t("./transports/index"),l.parser=t("engine.io-parser"),l.prototype.createTransport=function(t){r('creating transport "%s"',t);var e=h(this.query);e.EIO=s.protocol,e.transport=t;var n=this.transportOptions[t]||{};return this.id&&(e.sid=this.id),new o[t]({query:e,socket:this,agent:n.agent||this.agent,hostname:n.hostname||this.hostname,port:n.port||this.port,secure:n.secure||this.secure,path:n.path||this.path,forceJSONP:n.forceJSONP||this.forceJSONP,jsonp:n.jsonp||this.jsonp,forceBase64:n.forceBase64||this.forceBase64,enablesXDR:n.enablesXDR||this.enablesXDR,withCredentials:n.withCredentials||this.withCredentials,timestampRequests:n.timestampRequests||this.timestampRequests,timestampParam:n.timestampParam||this.timestampParam,policyPort:n.policyPort||this.policyPort,pfx:n.pfx||this.pfx,key:n.key||this.key,passphrase:n.passphrase||this.passphrase,cert:n.cert||this.cert,ca:n.ca||this.ca,ciphers:n.ciphers||this.ciphers,rejectUnauthorized:n.rejectUnauthorized||this.rejectUnauthorized,perMessageDeflate:n.perMessageDeflate||this.perMessageDeflate,extraHeaders:n.extraHeaders||this.extraHeaders,forceNode:n.forceNode||this.forceNode,localAddress:n.localAddress||this.localAddress,requestTimeout:n.requestTimeout||this.requestTimeout,protocols:n.protocols||void 0,isReactNative:this.isReactNative})},l.prototype.open=function(){var t;if(this.rememberUpgrade&&l.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))t="websocket";else{if(0===this.transports.length){var e=this;return void setTimeout(function(){e.emit("error","No transports available")},0)}t=this.transports[0]}this.readyState="opening";try{t=this.createTransport(t)}catch(o){return this.transports.shift(),void this.open()}t.open(),this.setTransport(t)},l.prototype.setTransport=function(t){r("setting transport %s",t.name);var e=this;this.transport&&(r("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=t,t.on("drain",function(){e.onDrain()}).on("packet",function(t){e.onPacket(t)}).on("error",function(t){e.onError(t)}).on("close",function(){e.onClose("transport close")})},l.prototype.probe=function(t){r('probing transport "%s"',t);var e=this.createTransport(t,{probe:1}),o=!1,n=this;function i(){if(n.onlyBinaryUpgrades){var i=!this.supportsBinary&&n.transport.supportsBinary;o=o||i}o||(r('probe transport "%s" opened',t),e.send([{type:"ping",data:"probe"}]),e.once("packet",function(i){if(!o)if("pong"===i.type&&"probe"===i.data){if(r('probe transport "%s" pong',t),n.upgrading=!0,n.emit("upgrading",e),!e)return;l.priorWebsocketSuccess="websocket"===e.name,r('pausing current transport "%s"',n.transport.name),n.transport.pause(function(){o||"closed"!==n.readyState&&(r("changing transport and sending upgrade packet"),p(),n.setTransport(e),e.send([{type:"upgrade"}]),n.emit("upgrade",e),e=null,n.upgrading=!1,n.flush())})}else{r('probe transport "%s" failed',t);var s=new Error("probe error");s.transport=e.name,n.emit("upgradeError",s)}}))}function s(){o||(o=!0,p(),e.close(),e=null)}function a(o){var i=new Error("probe error: "+o);i.transport=e.name,s(),r('probe transport "%s" failed because of error: %s',t,o),n.emit("upgradeError",i)}function c(){a("transport closed")}function h(){a("socket closed")}function u(t){e&&t.name!==e.name&&(r('"%s" works - aborting "%s"',t.name,e.name),s())}function p(){e.removeListener("open",i),e.removeListener("error",a),e.removeListener("close",c),n.removeListener("close",h),n.removeListener("upgrading",u)}l.priorWebsocketSuccess=!1,e.once("open",i),e.once("error",a),e.once("close",c),this.once("close",h),this.once("upgrading",u),e.open()},l.prototype.onOpen=function(){if(r("socket open"),this.readyState="open",l.priorWebsocketSuccess="websocket"===this.transport.name,this.emit("open"),this.flush(),"open"===this.readyState&&this.upgrade&&this.transport.pause){r("starting upgrade probes");for(var t=0,e=this.upgrades.length;t<e;t++)this.probe(this.upgrades[t])}},l.prototype.onPacket=function(t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(r('socket receive: type "%s", data "%s"',t.type,t.data),this.emit("packet",t),this.emit("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"pong":this.setPing(),this.emit("pong");break;case"error":var e=new Error("server error");e.code=t.data,this.onError(e);break;case"message":this.emit("data",t.data),this.emit("message",t.data)}else r('packet received with socket readyState "%s"',this.readyState)},l.prototype.onHandshake=function(t){this.emit("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this.upgrades=this.filterUpgrades(t.upgrades),this.pingInterval=t.pingInterval,this.pingTimeout=t.pingTimeout,this.onOpen(),"closed"!==this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},l.prototype.onHeartbeat=function(t){clearTimeout(this.pingTimeoutTimer);var e=this;e.pingTimeoutTimer=setTimeout(function(){"closed"!==e.readyState&&e.onClose("ping timeout")},t||e.pingInterval+e.pingTimeout)},l.prototype.setPing=function(){var t=this;clearTimeout(t.pingIntervalTimer),t.pingIntervalTimer=setTimeout(function(){r("writing ping packet - expecting pong within %sms",t.pingTimeout),t.ping(),t.onHeartbeat(t.pingTimeout)},t.pingInterval)},l.prototype.ping=function(){var t=this;this.sendPacket("ping",function(){t.emit("ping")})},l.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emit("drain"):this.flush()},l.prototype.flush=function(){"closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(r("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},l.prototype.write=l.prototype.send=function(t,e,o){return this.sendPacket("message",t,e,o),this},l.prototype.sendPacket=function(t,e,o,n){if("function"==typeof e&&(n=e,e=void 0),"function"==typeof o&&(n=o,o=null),"closing"!==this.readyState&&"closed"!==this.readyState){(o=o||{}).compress=!1!==o.compress;var r={type:t,data:e,options:o};this.emit("packetCreate",r),this.writeBuffer.push(r),n&&this.once("flush",n),this.flush()}},l.prototype.close=function(){if("opening"===this.readyState||"open"===this.readyState){this.readyState="closing";var t=this;this.writeBuffer.length?this.once("drain",function(){this.upgrading?n():e()}):this.upgrading?n():e()}function e(){t.onClose("forced close"),r("socket closing - telling transport to close"),t.transport.close()}function o(){t.removeListener("upgrade",o),t.removeListener("upgradeError",o),e()}function n(){t.once("upgrade",o),t.once("upgradeError",o)}return this},l.prototype.onError=function(t){r("socket error %j",t),l.priorWebsocketSuccess=!1,this.emit("error",t),this.onClose("transport error",t)},l.prototype.onClose=function(t,e){"opening"!==this.readyState&&"open"!==this.readyState&&"closing"!==this.readyState||(r('socket close with reason: "%s"',t),clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",t,e),this.writeBuffer=[],this.prevBufferLen=0)},l.prototype.filterUpgrades=function(t){for(var e=[],o=0,n=t.length;o<n;o++)~i(this.transports,t[o])&&e.push(t[o]);return e}},{"./transport":20,"./transports/index":21,"component-emitter":13,debug:15,"engine.io-parser":27,indexof:32,parseqs:36,parseuri:37}],20:[function(t,e){var o=t("engine.io-parser"),n=t("component-emitter");function r(t){this.path=t.path,this.hostname=t.hostname,this.port=t.port,this.secure=t.secure,this.query=t.query,this.timestampParam=t.timestampParam,this.timestampRequests=t.timestampRequests,this.readyState="",this.agent=t.agent||!1,this.socket=t.socket,this.enablesXDR=t.enablesXDR,this.withCredentials=t.withCredentials,this.pfx=t.pfx,this.key=t.key,this.passphrase=t.passphrase,this.cert=t.cert,this.ca=t.ca,this.ciphers=t.ciphers,this.rejectUnauthorized=t.rejectUnauthorized,this.forceNode=t.forceNode,this.isReactNative=t.isReactNative,this.extraHeaders=t.extraHeaders,this.localAddress=t.localAddress}e.exports=r,n(r.prototype),r.prototype.onError=function(t,e){var o=new Error(t);return o.type="TransportError",o.description=e,this.emit("error",o),this},r.prototype.open=function(){return"closed"!==this.readyState&&""!==this.readyState||(this.readyState="opening",this.doOpen()),this},r.prototype.close=function(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this},r.prototype.send=function(t){if("open"!==this.readyState)throw new Error("Transport not open");this.write(t)},r.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},r.prototype.onData=function(t){var e=o.decodePacket(t,this.socket.binaryType);this.onPacket(e)},r.prototype.onPacket=function(t){this.emit("packet",t)},r.prototype.onClose=function(){this.readyState="closed",this.emit("close")}},{"component-emitter":13,"engine.io-parser":27}],21:[function(t,e,o){var n=t("./xmlhttprequest"),r=t("./polling-xhr"),i=t("./polling-jsonp"),s=t("./websocket");o.polling=function(t){var e=!1,o=!1,s=!1!==t.jsonp;if("undefined"!=typeof location){var a="https:"===location.protocol,c=location.port;c||(c=a?443:80),e=t.hostname!==location.hostname||c!==t.port,o=t.secure!==a}if(t.xdomain=e,t.xscheme=o,"open"in new n(t)&&!t.forceJSONP)return new r(t);if(!s)throw new Error("JSONP disabled");return new i(t)},o.websocket=s},{"./polling-jsonp":22,"./polling-xhr":23,"./websocket":25,"./xmlhttprequest":26}],22:[function(t,e){var o=t("./polling"),n=t("component-inherit"),r=t("../globalThis");e.exports=l;var i,s=/\n/g,a=/\\n/g;function c(){}function l(t){o.call(this,t),this.query=this.query||{},i||(i=r.___eio=r.___eio||[]),this.index=i.length;var e=this;i.push(function(t){e.onData(t)}),this.query.j=this.index,"function"==typeof addEventListener&&addEventListener("beforeunload",function(){e.script&&(e.script.onerror=c)},!1)}n(l,o),l.prototype.supportsBinary=!1,l.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),o.prototype.doClose.call(this)},l.prototype.doPoll=function(){var t=this,e=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),e.async=!0,e.src=this.uri(),e.onerror=function(e){t.onError("jsonp poll error",e)};var o=document.getElementsByTagName("script")[0];o?o.parentNode.insertBefore(e,o):(document.head||document.body).appendChild(e),this.script=e,"undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent)&&setTimeout(function(){var t=document.createElement("iframe");document.body.appendChild(t),document.body.removeChild(t)},100)},l.prototype.doWrite=function(t,e){var o=this;if(!this.form){var n,r=document.createElement("form"),i=document.createElement("textarea"),c=this.iframeId="eio_iframe_"+this.index;r.className="socketio",r.style.position="absolute",r.style.top="-1000px",r.style.left="-1000px",r.target=c,r.method="POST",r.setAttribute("accept-charset","utf-8"),i.name="d",r.appendChild(i),document.body.appendChild(r),this.form=r,this.area=i}function l(){h(),e()}function h(){if(o.iframe)try{o.form.removeChild(o.iframe)}catch(e){o.onError("jsonp polling iframe removal error",e)}try{var t='<iframe src="javascript:0" name="'+o.iframeId+'">';n=document.createElement(t)}catch(e){(n=document.createElement("iframe")).name=o.iframeId,n.src="javascript:0"}n.id=o.iframeId,o.form.appendChild(n),o.iframe=n}this.form.action=this.uri(),h(),t=t.replace(a,"\\\n"),this.area.value=t.replace(s,"\\n");try{this.form.submit()}catch(u){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"===o.iframe.readyState&&l()}:this.iframe.onload=l}},{"../globalThis":17,"./polling":24,"component-inherit":14}],23:[function(t,e){var o=t("./xmlhttprequest"),n=t("./polling"),r=t("component-emitter"),i=t("component-inherit"),s=t("debug")("engine.io-client:polling-xhr"),a=t("../globalThis");function c(){}function l(t){if(n.call(this,t),this.requestTimeout=t.requestTimeout,this.extraHeaders=t.extraHeaders,"undefined"!=typeof location){var e="https:"===location.protocol,o=location.port;o||(o=e?443:80),this.xd="undefined"!=typeof location&&t.hostname!==location.hostname||o!==t.port,this.xs=t.secure!==e}}function h(t){this.method=t.method||"GET",this.uri=t.uri,this.xd=!!t.xd,this.xs=!!t.xs,this.async=!1!==t.async,this.data=void 0!==t.data?t.data:null,this.agent=t.agent,this.isBinary=t.isBinary,this.supportsBinary=t.supportsBinary,this.enablesXDR=t.enablesXDR,this.withCredentials=t.withCredentials,this.requestTimeout=t.requestTimeout,this.pfx=t.pfx,this.key=t.key,this.passphrase=t.passphrase,this.cert=t.cert,this.ca=t.ca,this.ciphers=t.ciphers,this.rejectUnauthorized=t.rejectUnauthorized,this.extraHeaders=t.extraHeaders,this.create()}function u(){for(var t in h.requests)h.requests.hasOwnProperty(t)&&h.requests[t].abort()}e.exports=l,e.exports.Request=h,i(l,n),l.prototype.supportsBinary=!0,l.prototype.request=function(t){return(t=t||{}).uri=this.uri(),t.xd=this.xd,t.xs=this.xs,t.agent=this.agent||!1,t.supportsBinary=this.supportsBinary,t.enablesXDR=this.enablesXDR,t.withCredentials=this.withCredentials,t.pfx=this.pfx,t.key=this.key,t.passphrase=this.passphrase,t.cert=this.cert,t.ca=this.ca,t.ciphers=this.ciphers,t.rejectUnauthorized=this.rejectUnauthorized,t.requestTimeout=this.requestTimeout,t.extraHeaders=this.extraHeaders,new h(t)},l.prototype.doWrite=function(t,e){var o="string"!=typeof t&&void 0!==t,n=this.request({method:"POST",data:t,isBinary:o}),r=this;n.on("success",e),n.on("error",function(t){r.onError("xhr post error",t)}),this.sendXhr=n},l.prototype.doPoll=function(){s("xhr poll");var t=this.request(),e=this;t.on("data",function(t){e.onData(t)}),t.on("error",function(t){e.onError("xhr poll error",t)}),this.pollXhr=t},r(h.prototype),h.prototype.create=function(){var t={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};t.pfx=this.pfx,t.key=this.key,t.passphrase=this.passphrase,t.cert=this.cert,t.ca=this.ca,t.ciphers=this.ciphers,t.rejectUnauthorized=this.rejectUnauthorized;var e=this.xhr=new o(t),n=this;try{s("xhr open %s: %s",this.method,this.uri),e.open(this.method,this.uri,this.async);try{if(this.extraHeaders)for(var r in e.setDisableHeaderCheck&&e.setDisableHeaderCheck(!0),this.extraHeaders)this.extraHeaders.hasOwnProperty(r)&&e.setRequestHeader(r,this.extraHeaders[r])}catch(i){}if("POST"===this.method)try{this.isBinary?e.setRequestHeader("Content-type","application/octet-stream"):e.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(i){}try{e.setRequestHeader("Accept","*/*")}catch(i){}"withCredentials"in e&&(e.withCredentials=this.withCredentials),this.requestTimeout&&(e.timeout=this.requestTimeout),this.hasXDR()?(e.onload=function(){n.onLoad()},e.onerror=function(){n.onError(e.responseText)}):e.onreadystatechange=function(){if(2===e.readyState)try{var t=e.getResponseHeader("Content-Type");(n.supportsBinary&&"application/octet-stream"===t||"application/octet-stream; charset=UTF-8"===t)&&(e.responseType="arraybuffer")}catch(i){}4===e.readyState&&(200===e.status||1223===e.status?n.onLoad():setTimeout(function(){n.onError("number"==typeof e.status?e.status:0)},0))},s("xhr data %s",this.data),e.send(this.data)}catch(i){return void setTimeout(function(){n.onError(i)},0)}"undefined"!=typeof document&&(this.index=h.requestsCount++,h.requests[this.index]=this)},h.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},h.prototype.onData=function(t){this.emit("data",t),this.onSuccess()},h.prototype.onError=function(t){this.emit("error",t),this.cleanup(!0)},h.prototype.cleanup=function(t){if(void 0!==this.xhr&&null!==this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=c:this.xhr.onreadystatechange=c,t)try{this.xhr.abort()}catch(e){}"undefined"!=typeof document&&delete h.requests[this.index],this.xhr=null}},h.prototype.onLoad=function(){var t;try{var e;try{e=this.xhr.getResponseHeader("Content-Type")}catch(o){}t=("application/octet-stream"===e||"application/octet-stream; charset=UTF-8"===e)&&this.xhr.response||this.xhr.responseText}catch(o){this.onError(o)}null!=t&&this.onData(t)},h.prototype.hasXDR=function(){return"undefined"!=typeof XDomainRequest&&!this.xs&&this.enablesXDR},h.prototype.abort=function(){this.cleanup()},h.requestsCount=0,h.requests={},"undefined"!=typeof document&&("function"==typeof attachEvent?attachEvent("onunload",u):"function"==typeof addEventListener&&addEventListener("onpagehide"in a?"pagehide":"unload",u,!1))},{"../globalThis":17,"./polling":24,"./xmlhttprequest":26,"component-emitter":13,"component-inherit":14,debug:15}],24:[function(t,e){var o=t("../transport"),n=t("parseqs"),r=t("engine.io-parser"),i=t("component-inherit"),s=t("yeast"),a=t("debug")("engine.io-client:polling");e.exports=l;var c=null!=new(t("./xmlhttprequest"))({xdomain:!1}).responseType;function l(t){var e=t&&t.forceBase64;c&&!e||(this.supportsBinary=!1),o.call(this,t)}i(l,o),l.prototype.name="polling",l.prototype.doOpen=function(){this.poll()},l.prototype.pause=function(t){var e=this;function o(){a("paused"),e.readyState="paused",t()}if(this.readyState="pausing",this.polling||!this.writable){var n=0;this.polling&&(a("we are currently polling - waiting to pause"),n++,this.once("pollComplete",function(){a("pre-pause polling complete"),--n||o()})),this.writable||(a("we are currently writing - waiting to pause"),n++,this.once("drain",function(){a("pre-pause writing complete"),--n||o()}))}else o()},l.prototype.poll=function(){a("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},l.prototype.onData=function(t){var e=this;a("polling got data %s",t),r.decodePayload(t,this.socket.binaryType,function(t){if("opening"===e.readyState&&"open"===t.type&&e.onOpen(),"close"===t.type)return e.onClose(),!1;e.onPacket(t)}),"closed"!==this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"===this.readyState?this.poll():a('ignoring poll - transport state "%s"',this.readyState))},l.prototype.doClose=function(){var t=this;function e(){a("writing close packet"),t.write([{type:"close"}])}"open"===this.readyState?(a("transport open - closing"),e()):(a("transport not open - deferring close"),this.once("open",e))},l.prototype.write=function(t){var e=this;this.writable=!1;var o=function(){e.writable=!0,e.emit("drain")};r.encodePayload(t,this.supportsBinary,function(t){e.doWrite(t,o)})},l.prototype.uri=function(){var t=this.query||{},e=this.secure?"https":"http",o="";return!1!==this.timestampRequests&&(t[this.timestampParam]=s()),this.supportsBinary||t.sid||(t.b64=1),t=n.encode(t),this.port&&("https"===e&&443!==Number(this.port)||"http"===e&&80!==Number(this.port))&&(o=":"+this.port),t.length&&(t="?"+t),e+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+o+this.path+t}},{"../transport":20,"./xmlhttprequest":26,"component-inherit":14,debug:15,"engine.io-parser":27,parseqs:36,yeast:47}],25:[function(t,e){(function(o){var n,r,i=t("../transport"),s=t("engine.io-parser"),a=t("parseqs"),c=t("component-inherit"),l=t("yeast"),h=t("debug")("engine.io-client:websocket");if("undefined"!=typeof WebSocket?n=WebSocket:"undefined"!=typeof self&&(n=self.WebSocket||self.MozWebSocket),"undefined"==typeof window)try{r=t("ws")}catch(d){}var u=n||r;function p(t){t&&t.forceBase64&&(this.supportsBinary=!1),this.perMessageDeflate=t.perMessageDeflate,this.usingBrowserWebSocket=n&&!t.forceNode,this.protocols=t.protocols,this.usingBrowserWebSocket||(u=r),i.call(this,t)}e.exports=p,c(p,i),p.prototype.name="websocket",p.prototype.supportsBinary=!0,p.prototype.doOpen=function(){if(this.check()){var t=this.uri(),e=this.protocols,o={};this.isReactNative||(o.agent=this.agent,o.perMessageDeflate=this.perMessageDeflate,o.pfx=this.pfx,o.key=this.key,o.passphrase=this.passphrase,o.cert=this.cert,o.ca=this.ca,o.ciphers=this.ciphers,o.rejectUnauthorized=this.rejectUnauthorized),this.extraHeaders&&(o.headers=this.extraHeaders),this.localAddress&&(o.localAddress=this.localAddress);try{this.ws=this.usingBrowserWebSocket&&!this.isReactNative?e?new u(t,e):new u(t):new u(t,e,o)}catch(n){return this.emit("error",n)}void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType="nodebuffer"):this.ws.binaryType="arraybuffer",this.addEventListeners()}},p.prototype.addEventListeners=function(){var t=this;this.ws.onopen=function(){t.onOpen()},this.ws.onclose=function(){t.onClose()},this.ws.onmessage=function(e){t.onData(e.data)},this.ws.onerror=function(e){t.onError("websocket error",e)}},p.prototype.write=function(t){var e=this;this.writable=!1;for(var n=t.length,r=0,i=n;r<i;r++)(function(t){s.encodePacket(t,e.supportsBinary,function(r){if(!e.usingBrowserWebSocket){var i={};t.options&&(i.compress=t.options.compress),e.perMessageDeflate&&("string"==typeof r?o.byteLength(r):r.length)<e.perMessageDeflate.threshold&&(i.compress=!1)}try{e.usingBrowserWebSocket?e.ws.send(r):e.ws.send(r,i)}catch(d){h("websocket closed before onclose event")}--n||(e.emit("flush"),setTimeout(function(){e.writable=!0,e.emit("drain")},0))})})(t[r])},p.prototype.onClose=function(){i.prototype.onClose.call(this)},p.prototype.doClose=function(){void 0!==this.ws&&this.ws.close()},p.prototype.uri=function(){var t=this.query||{},e=this.secure?"wss":"ws",o="";return this.port&&("wss"===e&&443!==Number(this.port)||"ws"===e&&80!==Number(this.port))&&(o=":"+this.port),this.timestampRequests&&(t[this.timestampParam]=l()),this.supportsBinary||(t.b64=1),(t=a.encode(t)).length&&(t="?"+t),e+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+o+this.path+t},p.prototype.check=function(){return!(!u||"__initialize"in u&&this.name===p.prototype.name)}}).call(this,t("buffer").Buffer)},{"../transport":20,buffer:3,"component-inherit":14,debug:15,"engine.io-parser":27,parseqs:36,ws:2,yeast:47}],26:[function(t,e){var o=t("has-cors"),n=t("../globalThis");e.exports=function(t){var e=t.xdomain,r=t.xscheme,i=t.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!e||o))return new XMLHttpRequest}catch(s){}try{if("undefined"!=typeof XDomainRequest&&!r&&i)return new XDomainRequest}catch(s){}if(!e)try{return new(n[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(s){}}},{"../globalThis":17,"has-cors":31}],27:[function(t,e,o){var n,r=t("./keys"),i=t("has-binary2"),s=t("arraybuffer.slice"),a=t("after"),c=t("./utf8");"undefined"!=typeof ArrayBuffer&&(n=t("base64-arraybuffer"));var l="undefined"!=typeof navigator&&/Android/i.test(navigator.userAgent),h="undefined"!=typeof navigator&&/PhantomJS/i.test(navigator.userAgent),u=l||h;o.protocol=3;var p=o.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},d=r(p),f={type:"error",data:"parser error"},g=t("blob");function m(t,e){return e("b"+o.packets[t.type]+t.data.data)}function y(t,e,n){if(!e)return o.encodeBase64Packet(t,n);var r=t.data,i=new Uint8Array(r),s=new Uint8Array(1+r.byteLength);s[0]=p[t.type];for(var a=0;a<i.length;a++)s[a+1]=i[a];return n(s.buffer)}function C(t,e,n){if(!e)return o.encodeBase64Packet(t,n);var r=new FileReader;return r.onload=function(){o.encodePacket({type:t.type,data:r.result},e,!0,n)},r.readAsArrayBuffer(t.data)}function b(t,e,n){if(!e)return o.encodeBase64Packet(t,n);if(u)return C(t,e,n);var r=new Uint8Array(1);return r[0]=p[t.type],n(new g([r.buffer,t.data]))}function v(t){try{t=c.decode(t,{strict:!1})}catch(e){return!1}return t}function k(t,e,o){for(var n=new Array(t.length),r=a(t.length,o),i=function(t,o,r){e(o,function(e,o){n[t]=o,r(e,n)})},s=0;s<t.length;s++)i(s,t[s],r)}o.encodePacket=function(t,e,o,n){"function"==typeof e&&(n=e,e=!1),"function"==typeof o&&(n=o,o=null);var r=void 0===t.data?void 0:t.data.buffer||t.data;if("undefined"!=typeof ArrayBuffer&&r instanceof ArrayBuffer)return y(t,e,n);if(void 0!==g&&r instanceof g)return b(t,e,n);if(r&&r.base64)return m(t,n);var i=p[t.type];return void 0!==t.data&&(i+=o?c.encode(String(t.data),{strict:!1}):String(t.data)),n(""+i)},o.encodeBase64Packet=function(t,e){var n,r="b"+o.packets[t.type];if(void 0!==g&&t.data instanceof g){var i=new FileReader;return i.onload=function(){var t=i.result.split(",")[1];e(r+t)},i.readAsDataURL(t.data)}try{n=String.fromCharCode.apply(null,new Uint8Array(t.data))}catch(l){for(var s=new Uint8Array(t.data),a=new Array(s.length),c=0;c<s.length;c++)a[c]=s[c];n=String.fromCharCode.apply(null,a)}return r+=btoa(n),e(r)},o.decodePacket=function(t,e,n){if(void 0===t)return f;if("string"==typeof t){if("b"===t.charAt(0))return o.decodeBase64Packet(t.substr(1),e);if(n&&!1===(t=v(t)))return f;var r=t.charAt(0);return Number(r)==r&&d[r]?t.length>1?{type:d[r],data:t.substring(1)}:{type:d[r]}:f}r=new Uint8Array(t)[0];var i=s(t,1);return g&&"blob"===e&&(i=new g([i])),{type:d[r],data:i}},o.decodeBase64Packet=function(t,e){var o=d[t.charAt(0)];if(!n)return{type:o,data:{base64:!0,data:t.substr(1)}};var r=n.decode(t.substr(1));return"blob"===e&&g&&(r=new g([r])),{type:o,data:r}},o.encodePayload=function(t,e,n){"function"==typeof e&&(n=e,e=null);var r=i(t);if(e&&r)return g&&!u?o.encodePayloadAsBlob(t,n):o.encodePayloadAsArrayBuffer(t,n);if(!t.length)return n("0:");function s(t){return t.length+":"+t}k(t,function(t,n){o.encodePacket(t,!!r&&e,!1,function(t){n(null,s(t))})},function(t,e){return n(e.join(""))})},o.decodePayload=function(t,e,n){if("string"!=typeof t)return o.decodePayloadAsBinary(t,e,n);var r;if("function"==typeof e&&(n=e,e=null),""===t)return n(f,0,1);for(var i,s,a="",c=0,l=t.length;c<l;c++){var h=t.charAt(c);if(":"===h){if(""===a||a!=(i=Number(a)))return n(f,0,1);if(a!=(s=t.substr(c+1,i)).length)return n(f,0,1);if(s.length){if(r=o.decodePacket(s,e,!1),f.type===r.type&&f.data===r.data)return n(f,0,1);if(!1===n(r,c+i,l))return}c+=i,a=""}else a+=h}return""!==a?n(f,0,1):void 0},o.encodePayloadAsArrayBuffer=function(t,e){if(!t.length)return e(new ArrayBuffer(0));k(t,function(t,e){o.encodePacket(t,!0,!0,function(t){return e(null,t)})},function(t,o){var n=o.reduce(function(t,e){var o;return t+(o="string"==typeof e?e.length:e.byteLength).toString().length+o+2},0),r=new Uint8Array(n),i=0;return o.forEach(function(t){var e="string"==typeof t,o=t;if(e){for(var n=new Uint8Array(t.length),s=0;s<t.length;s++)n[s]=t.charCodeAt(s);o=n.buffer}r[i++]=e?0:1;var a=o.byteLength.toString();for(s=0;s<a.length;s++)r[i++]=parseInt(a[s]);for(r[i++]=255,n=new Uint8Array(o),s=0;s<n.length;s++)r[i++]=n[s]}),e(r.buffer)})},o.encodePayloadAsBlob=function(t,e){k(t,function(t,e){o.encodePacket(t,!0,!0,function(t){var o=new Uint8Array(1);if(o[0]=1,"string"==typeof t){for(var n=new Uint8Array(t.length),r=0;r<t.length;r++)n[r]=t.charCodeAt(r);t=n.buffer,o[0]=0}var i=(t instanceof ArrayBuffer?t.byteLength:t.size).toString(),s=new Uint8Array(i.length+1);for(r=0;r<i.length;r++)s[r]=parseInt(i[r]);if(s[i.length]=255,g){var a=new g([o.buffer,s.buffer,t]);e(null,a)}})},function(t,o){return e(new g(o))})},o.decodePayloadAsBinary=function(t,e,n){"function"==typeof e&&(n=e,e=null);for(var r=t,i=[];r.byteLength>0;){for(var a=new Uint8Array(r),c=0===a[0],l="",h=1;255!==a[h];h++){if(l.length>310)return n(f,0,1);l+=a[h]}r=s(r,2+l.length),l=parseInt(l);var u=s(r,0,l);if(c)try{u=String.fromCharCode.apply(null,new Uint8Array(u))}catch(g){var p=new Uint8Array(u);for(u="",h=0;h<p.length;h++)u+=String.fromCharCode(p[h])}i.push(u),r=s(r,l)}var d=i.length;i.forEach(function(t,r){n(o.decodePacket(t,e,!0),r,d)})}},{"./keys":28,"./utf8":29,after:7,"arraybuffer.slice":8,"base64-arraybuffer":10,blob:11,"has-binary2":30}],28:[function(t,e){e.exports=Object.keys||function(t){var e=[],o=Object.prototype.hasOwnProperty;for(var n in t)o.call(t,n)&&e.push(n);return e}},{}],29:[function(t,e){var o,n,r,i=String.fromCharCode;function s(t){for(var e,o,n=[],r=0,i=t.length;r<i;)(e=t.charCodeAt(r++))>=55296&&e<=56319&&r<i?56320==(64512&(o=t.charCodeAt(r++)))?n.push(((1023&e)<<10)+(1023&o)+65536):(n.push(e),r--):n.push(e);return n}function a(t){for(var e,o=t.length,n=-1,r="";++n<o;)(e=t[n])>65535&&(r+=i((e-=65536)>>>10&1023|55296),e=56320|1023&e),r+=i(e);return r}function c(t,e){if(t>=55296&&t<=57343){if(e)throw Error("Lone surrogate U+"+t.toString(16).toUpperCase()+" is not a scalar value");return!1}return!0}function l(t,e){return i(t>>e&63|128)}function h(t,e){if(0==(4294967168&t))return i(t);var o="";return 0==(4294965248&t)?o=i(t>>6&31|192):0==(4294901760&t)?(c(t,e)||(t=65533),o=i(t>>12&15|224),o+=l(t,6)):0==(4292870144&t)&&(o=i(t>>18&7|240),o+=l(t,12),o+=l(t,6)),o+i(63&t|128)}function u(){if(r>=n)throw Error("Invalid byte index");var t=255&o[r];if(r++,128==(192&t))return 63&t;throw Error("Invalid continuation byte")}function p(t){var e,i;if(r>n)throw Error("Invalid byte index");if(r==n)return!1;if(e=255&o[r],r++,0==(128&e))return e;if(192==(224&e)){if((i=(31&e)<<6|u())>=128)return i;throw Error("Invalid continuation byte")}if(224==(240&e)){if((i=(15&e)<<12|u()<<6|u())>=2048)return c(i,t)?i:65533;throw Error("Invalid continuation byte")}if(240==(248&e)&&(i=(7&e)<<18|u()<<12|u()<<6|u())>=65536&&i<=1114111)return i;throw Error("Invalid UTF-8 detected")}e.exports={version:"2.1.2",encode:function(t,e){for(var o=!1!==(e=e||{}).strict,n=s(t),r=n.length,i=-1,a="";++i<r;)a+=h(n[i],o);return a},decode:function(t,e){var i=!1!==(e=e||{}).strict;o=s(t),n=o.length,r=0;for(var c,l=[];!1!==(c=p(i));)l.push(c);return a(l)}}},{}],30:[function(t,e){(function(o){var n=t("isarray"),r=Object.prototype.toString,i="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===r.call(Blob),s="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===r.call(File);e.exports=function t(e){if(!e||"object"!=typeof e)return!1;if(n(e)){for(var r=0,a=e.length;r<a;r++)if(t(e[r]))return!0;return!1}if("function"==typeof o&&o.isBuffer&&o.isBuffer(e)||"function"==typeof ArrayBuffer&&e instanceof ArrayBuffer||i&&e instanceof Blob||s&&e instanceof File)return!0;if(e.toJSON&&"function"==typeof e.toJSON&&1===arguments.length)return t(e.toJSON(),!0);for(var c in e)if(Object.prototype.hasOwnProperty.call(e,c)&&t(e[c]))return!0;return!1}}).call(this,t("buffer").Buffer)},{buffer:3,isarray:33}],31:[function(t,e){try{e.exports="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(o){e.exports=!1}},{}],32:[function(t,e){var o=[].indexOf;e.exports=function(t,e){if(o)return t.indexOf(e);for(var n=0;n<t.length;++n)if(t[n]===e)return n;return-1}},{}],33:[function(t,e,o){arguments[4][4][0].apply(o,arguments)},{dup:4}],34:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function s(t,e,o){return e&&i(t.prototype,e),o&&i(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t}function a(){return(a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n])}return t}).apply(this,arguments)}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&h(t,e)}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function h(t,e){return(h=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function u(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function p(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function d(t,e){if(e&&("object"==typeof e||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return p(t)}function f(t){var e=u();return function(){var o,n=l(t);if(e){var r=l(this).constructor;o=Reflect.construct(n,arguments,r)}else o=n.apply(this,arguments);return d(this,o)}}Object.defineProperty(o,"__esModule",{value:!0});var g=function(){function t(){r(this,t)}return s(t,[{key:"listenForWhisper",value:function(t,e){return this.listen(".client-"+t,e)}},{key:"notification",value:function(t){return this.listen(".Illuminate\\Notifications\\Events\\BroadcastNotificationCreated",t)}},{key:"stopListeningForWhisper",value:function(t,e){return this.stopListening(".client-"+t,e)}}]),t}(),m=function(){function t(e){r(this,t),this.setNamespace(e)}return s(t,[{key:"format",value:function(t){return"."===t.charAt(0)||"\\"===t.charAt(0)?t.substr(1):(this.namespace&&(t=this.namespace+"."+t),t.replace(/\./g,"\\"))}},{key:"setNamespace",value:function(t){this.namespace=t}}]),t}(),y=function(){c(e,g);var t=f(e);function e(o,n,i){var s;return r(this,e),(s=t.call(this)).name=n,s.pusher=o,s.options=i,s.eventFormatter=new m(s.options.namespace),s.subscribe(),s}return s(e,[{key:"subscribe",value:function(){this.subscription=this.pusher.subscribe(this.name)}},{key:"unsubscribe",value:function(){this.pusher.unsubscribe(this.name)}},{key:"listen",value:function(t,e){return this.on(this.eventFormatter.format(t),e),this}},{key:"listenToAll",value:function(t){var e=this;return this.subscription.bind_global(function(o,n){if(!o.startsWith("pusher:")){var r=e.options.namespace.replace(/\./g,"\\"),i=o.startsWith(r)?o.substring(r.length+1):"."+o;t(i,n)}}),this}},{key:"stopListening",value:function(t,e){return e?this.subscription.unbind(this.eventFormatter.format(t),e):this.subscription.unbind(this.eventFormatter.format(t)),this}},{key:"stopListeningToAll",value:function(t){return t?this.subscription.unbind_global(t):this.subscription.unbind_global(),this}},{key:"subscribed",value:function(t){return this.on("pusher:subscription_succeeded",function(){t()}),this}},{key:"error",value:function(t){return this.on("pusher:subscription_error",function(e){t(e)}),this}},{key:"on",value:function(t,e){return this.subscription.bind(t,e),this}}]),e}(),C=function(){c(e,y);var t=f(e);function e(){return r(this,e),t.apply(this,arguments)}return s(e,[{key:"whisper",value:function(t,e){return this.pusher.channels.channels[this.name].trigger("client-".concat(t),e),this}}]),e}(),b=function(){c(e,y);var t=f(e);function e(){return r(this,e),t.apply(this,arguments)}return s(e,[{key:"whisper",value:function(t,e){return this.pusher.channels.channels[this.name].trigger("client-".concat(t),e),this}}]),e}(),v=function(){c(e,y);var t=f(e);function e(){return r(this,e),t.apply(this,arguments)}return s(e,[{key:"here",value:function(t){return this.on("pusher:subscription_succeeded",function(e){t(Object.keys(e.members).map(function(t){return e.members[t]}))}),this}},{key:"joining",value:function(t){return this.on("pusher:member_added",function(e){t(e.info)}),this}},{key:"leaving",value:function(t){return this.on("pusher:member_removed",function(e){t(e.info)}),this}},{key:"whisper",value:function(t,e){return this.pusher.channels.channels[this.name].trigger("client-".concat(t),e),this}}]),e}(),k=function(){c(e,g);var t=f(e);function e(o,n,i){var s;return r(this,e),(s=t.call(this)).events={},s.listeners={},s.name=n,s.socket=o,s.options=i,s.eventFormatter=new m(s.options.namespace),s.subscribe(),s}return s(e,[{key:"subscribe",value:function(){this.socket.emit("subscribe",{channel:this.name,auth:this.options.auth||{}})}},{key:"unsubscribe",value:function(){this.unbind(),this.socket.emit("unsubscribe",{channel:this.name,auth:this.options.auth||{}})}},{key:"listen",value:function(t,e){return this.on(this.eventFormatter.format(t),e),this}},{key:"stopListening",value:function(t,e){return this.unbindEvent(this.eventFormatter.format(t),e),this}},{key:"subscribed",value:function(t){return this.on("connect",function(e){t(e)}),this}},{key:"error",value:function(){return this}},{key:"on",value:function(t,e){var o=this;return this.listeners[t]=this.listeners[t]||[],this.events[t]||(this.events[t]=function(e,n){o.name===e&&o.listeners[t]&&o.listeners[t].forEach(function(t){return t(n)})},this.socket.on(t,this.events[t])),this.listeners[t].push(e),this}},{key:"unbind",value:function(){var t=this;Object.keys(this.events).forEach(function(e){t.unbindEvent(e)})}},{key:"unbindEvent",value:function(t,e){this.listeners[t]=this.listeners[t]||[],e&&(this.listeners[t]=this.listeners[t].filter(function(t){return t!==e})),e&&0!==this.listeners[t].length||(this.events[t]&&(this.socket.removeListener(t,this.events[t]),delete this.events[t]),delete this.listeners[t])}}]),e}(),S=function(){c(e,k);var t=f(e);function e(){return r(this,e),t.apply(this,arguments)}return s(e,[{key:"whisper",value:function(t,e){return this.socket.emit("client event",{channel:this.name,event:"client-".concat(t),data:e}),this}}]),e}(),w=function(){c(e,S);var t=f(e);function e(){return r(this,e),t.apply(this,arguments)}return s(e,[{key:"here",value:function(t){return this.on("presence:subscribed",function(e){t(e.map(function(t){return t.user_info}))}),this}},{key:"joining",value:function(t){return this.on("presence:joining",function(e){return t(e.user_info)}),this}},{key:"leaving",value:function(t){return this.on("presence:leaving",function(e){return t(e.user_info)}),this}}]),e}(),P=function(){c(e,g);var t=f(e);function e(){return r(this,e),t.apply(this,arguments)}return s(e,[{key:"subscribe",value:function(){}},{key:"unsubscribe",value:function(){}},{key:"listen",value:function(){return this}},{key:"stopListening",value:function(){return this}},{key:"subscribed",value:function(){return this}},{key:"error",value:function(){return this}},{key:"on",value:function(){return this}}]),e}(),_=function(){c(e,P);var t=f(e);function e(){return r(this,e),t.apply(this,arguments)}return s(e,[{key:"whisper",value:function(){return this}}]),e}(),D=function(){c(e,P);var t=f(e);function e(){return r(this,e),t.apply(this,arguments)}return s(e,[{key:"here",value:function(){return this}},{key:"joining",value:function(){return this}},{key:"leaving",value:function(){return this}},{key:"whisper",value:function(){return this}}]),e}(),L=function(){function t(e){r(this,t),this._defaultOptions={auth:{headers:{}},authEndpoint:"/broadcasting/auth",userAuthentication:{endpoint:"/broadcasting/user-auth",headers:{}},broadcaster:"pusher",csrfToken:null,bearerToken:null,host:null,key:null,namespace:"App.Events"},this.setOptions(e),this.connect()}return s(t,[{key:"setOptions",value:function(t){this.options=a(this._defaultOptions,t);var e=this.csrfToken();return e&&(this.options.auth.headers["X-CSRF-TOKEN"]=e,this.options.userAuthentication.headers["X-CSRF-TOKEN"]=e),(e=this.options.bearerToken)&&(this.options.auth.headers.Authorization="Bearer "+e,this.options.userAuthentication.headers.Authorization="Bearer "+e),t}},{key:"csrfToken",value:function(){var t;return"undefined"!=typeof window&&window.Laravel&&window.Laravel.csrfToken?window.Laravel.csrfToken:this.options.csrfToken?this.options.csrfToken:"undefined"!=typeof document&&"function"==typeof document.querySelector&&(t=document.querySelector('meta[name="csrf-token"]'))?t.getAttribute("content"):null}}]),t}(),N=function(){c(e,L);var t=f(e);function e(){var o;return r(this,e),(o=t.apply(this,arguments)).channels={},o}return s(e,[{key:"connect",value:function(){void 0!==this.options.client?this.pusher=this.options.client:this.pusher=new Pusher(this.options.key,this.options)}},{key:"signin",value:function(){this.pusher.signin()}},{key:"listen",value:function(t,e,o){return this.channel(t).listen(e,o)}},{key:"channel",value:function(t){return this.channels[t]||(this.channels[t]=new y(this.pusher,t,this.options)),this.channels[t]}},{key:"privateChannel",value:function(t){return this.channels["private-"+t]||(this.channels["private-"+t]=new C(this.pusher,"private-"+t,this.options)),this.channels["private-"+t]}},{key:"encryptedPrivateChannel",value:function(t){return this.channels["private-encrypted-"+t]||(this.channels["private-encrypted-"+t]=new b(this.pusher,"private-encrypted-"+t,this.options)),this.channels["private-encrypted-"+t]}},{key:"presenceChannel",value:function(t){return this.channels["presence-"+t]||(this.channels["presence-"+t]=new v(this.pusher,"presence-"+t,this.options)),this.channels["presence-"+t]}},{key:"leave",value:function(t){var e=this;[t,"private-"+t,"private-encrypted-"+t,"presence-"+t].forEach(function(t){e.leaveChannel(t)})}},{key:"leaveChannel",value:function(t){this.channels[t]&&(this.channels[t].unsubscribe(),delete this.channels[t])}},{key:"socketId",value:function(){return this.pusher.connection.socket_id}},{key:"disconnect",value:function(){this.pusher.disconnect()}}]),e}(),T=function(){c(e,L);var t=f(e);function e(){var o;return r(this,e),(o=t.apply(this,arguments)).channels={},o}return s(e,[{key:"connect",value:function(){var t=this,e=this.getSocketIO();return this.socket=e(this.options.host,this.options),this.socket.on("reconnect",function(){Object.values(t.channels).forEach(function(t){t.subscribe()})}),this.socket}},{key:"getSocketIO",value:function(){if(void 0!==this.options.client)return this.options.client;if("undefined"!=typeof io)return io;throw new Error("Socket.io client not found. Should be globally available or passed via options.client")}},{key:"listen",value:function(t,e,o){return this.channel(t).listen(e,o)}},{key:"channel",value:function(t){return this.channels[t]||(this.channels[t]=new k(this.socket,t,this.options)),this.channels[t]}},{key:"privateChannel",value:function(t){return this.channels["private-"+t]||(this.channels["private-"+t]=new S(this.socket,"private-"+t,this.options)),this.channels["private-"+t]}},{key:"presenceChannel",value:function(t){return this.channels["presence-"+t]||(this.channels["presence-"+t]=new w(this.socket,"presence-"+t,this.options)),this.channels["presence-"+t]}},{key:"leave",value:function(t){var e=this;[t,"private-"+t,"presence-"+t].forEach(function(t){e.leaveChannel(t)})}},{key:"leaveChannel",value:function(t){this.channels[t]&&(this.channels[t].unsubscribe(),delete this.channels[t])}},{key:"socketId",value:function(){return this.socket.id}},{key:"disconnect",value:function(){this.socket.disconnect()}}]),e}(),R=function(){c(e,L);var t=f(e);function e(){var o;return r(this,e),(o=t.apply(this,arguments)).channels={},o}return s(e,[{key:"connect",value:function(){}},{key:"listen",value:function(){return new P}},{key:"channel",value:function(){return new P}},{key:"privateChannel",value:function(){return new _}},{key:"presenceChannel",value:function(){return new D}},{key:"leave",value:function(){}},{key:"leaveChannel",value:function(){}},{key:"socketId",value:function(){return"fake-socket-id"}},{key:"disconnect",value:function(){}}]),e}(),M=function(){function t(e){r(this,t),this.options=e,this.connect(),this.options.withoutInterceptors||this.registerInterceptors()}return s(t,[{key:"channel",value:function(t){return this.connector.channel(t)}},{key:"connect",value:function(){"pusher"==this.options.broadcaster?this.connector=new N(this.options):"socket.io"==this.options.broadcaster?this.connector=new T(this.options):"null"==this.options.broadcaster?this.connector=new R(this.options):"function"==typeof this.options.broadcaster&&(this.connector=new this.options.broadcaster(this.options))}},{key:"disconnect",value:function(){this.connector.disconnect()}},{key:"join",value:function(t){return this.connector.presenceChannel(t)}},{key:"leave",value:function(t){this.connector.leave(t)}},{key:"leaveChannel",value:function(t){this.connector.leaveChannel(t)}},{key:"listen",value:function(t,e,o){return this.connector.listen(t,e,o)}},{key:"private",value:function(t){return this.connector.privateChannel(t)}},{key:"encryptedPrivate",value:function(t){return this.connector.encryptedPrivateChannel(t)}},{key:"socketId",value:function(){return this.connector.socketId()}},{key:"registerInterceptors",value:function(){"function"==typeof Vue&&Vue.http&&this.registerVueRequestInterceptor(),"function"==typeof axios&&this.registerAxiosRequestInterceptor(),"function"==typeof jQuery&&this.registerjQueryAjaxSetup(),"object"===("undefined"==typeof Turbo?"undefined":n(Turbo))&&this.registerTurboRequestInterceptor()}},{key:"registerVueRequestInterceptor",value:function(){var t=this;Vue.http.interceptors.push(function(e,o){t.socketId()&&e.headers.set("X-Socket-ID",t.socketId()),o()})}},{key:"registerAxiosRequestInterceptor",value:function(){var t=this;axios.interceptors.request.use(function(e){return t.socketId()&&(e.headers["X-Socket-Id"]=t.socketId()),e})}},{key:"registerjQueryAjaxSetup",value:function(){var t=this;void 0!==jQuery.ajax&&jQuery.ajaxPrefilter(function(e,o,n){t.socketId()&&n.setRequestHeader("X-Socket-Id",t.socketId())})}},{key:"registerTurboRequestInterceptor",value:function(){var t=this;document.addEventListener("turbo:before-fetch-request",function(e){e.detail.fetchOptions.headers["X-Socket-Id"]=t.socketId()})}}]),t}();o.Channel=g,o.default=M},{}],35:[function(t,e){var o=1e3,n=60*o,r=60*n,i=24*r,s=365.25*i;function a(t){if(!((t=String(t)).length>100)){var e=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(t);if(e){var a=parseFloat(e[1]);switch((e[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return a*s;case"days":case"day":case"d":return a*i;case"hours":case"hour":case"hrs":case"hr":case"h":return a*r;case"minutes":case"minute":case"mins":case"min":case"m":return a*n;case"seconds":case"second":case"secs":case"sec":case"s":return a*o;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return a;default:return}}}}function c(t){return t>=i?Math.round(t/i)+"d":t>=r?Math.round(t/r)+"h":t>=n?Math.round(t/n)+"m":t>=o?Math.round(t/o)+"s":t+"ms"}function l(t,e,o){if(!(t<e))return t<1.5*e?Math.floor(t/e)+" "+o:Math.ceil(t/e)+" "+o+"s"}e.exports=function(t,e){e=e||{};var s,h=typeof t;if("string"===h&&t.length>0)return a(t);if("number"===h&&!1===isNaN(t))return e.long?l(s=t,i,"day")||l(s,r,"hour")||l(s,n,"minute")||l(s,o,"second")||s+" ms":c(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))}},{}],36:[function(t,e,o){o.encode=function(t){var e="";for(var o in t)t.hasOwnProperty(o)&&(e.length&&(e+="&"),e+=encodeURIComponent(o)+"="+encodeURIComponent(t[o]));return e},o.decode=function(t){for(var e={},o=t.split("&"),n=0,r=o.length;n<r;n++){var i=o[n].split("=");e[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return e}},{}],37:[function(t,e){var o=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,n=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];e.exports=function(t){var e,r,i,s,a=t,c=t.indexOf("["),l=t.indexOf("]");-1!=c&&-1!=l&&(t=t.substring(0,c)+t.substring(c,l).replace(/:/g,";")+t.substring(l,t.length));for(var h=o.exec(t||""),u={},p=14;p--;)u[n[p]]=h[p]||"";return-1!=c&&-1!=l&&(u.source=a,u.host=u.host.substring(1,u.host.length-1).replace(/;/g,":"),u.authority=u.authority.replace("[","").replace("]","").replace(/;/g,":"),u.ipv6uri=!0),u.pathNames=(i=u.path,s=i.replace(/\/{2,9}/g,"/").split("/"),"/"!=i.substr(0,1)&&0!==i.length||s.splice(0,1),"/"==i.substr(i.length-1,1)&&s.splice(s.length-1,1),s),u.queryKey=(e=u.query,r={},e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(t,e,o){e&&(r[e]=o)}),r),u}},{}],38:[function(t,e,o){var n=t("./url"),r=t("socket.io-parser"),i=t("./manager"),s=t("debug")("socket.io-client");e.exports=o=c;var a=o.managers={};function c(t,e){"object"==typeof t&&(e=t,t=void 0),e=e||{};var o,r=n(t),c=r.source,l=r.id,h=r.path,u=a[l]&&h in a[l].nsps;return e.forceNew||e["force new connection"]||!1===e.multiplex||u?(s("ignoring socket cache for %s",c),o=i(c,e)):(a[l]||(s("new io instance for %s",c),a[l]=i(c,e)),o=a[l]),r.query&&!e.query&&(e.query=r.query),o.socket(r.path,e)}o.protocol=r.protocol,o.connect=c,o.Manager=t("./manager"),o.Socket=t("./socket")},{"./manager":39,"./socket":41,"./url":42,debug:15,"socket.io-parser":44}],39:[function(t,e){var o=t("engine.io-client"),n=t("./socket"),r=t("component-emitter"),i=t("socket.io-parser"),s=t("./on"),a=t("component-bind"),c=t("debug")("socket.io-client:manager"),l=t("indexof"),h=t("backo2"),u=Object.prototype.hasOwnProperty;function p(t,e){if(!(this instanceof p))return new p(t,e);t&&"object"==typeof t&&(e=t,t=void 0),(e=e||{}).path=e.path||"/socket.io",this.nsps={},this.subs=[],this.opts=e,this.reconnection(!1!==e.reconnection),this.reconnectionAttempts(e.reconnectionAttempts||1/0),this.reconnectionDelay(e.reconnectionDelay||1e3),this.reconnectionDelayMax(e.reconnectionDelayMax||5e3),this.randomizationFactor(e.randomizationFactor||.5),this.backoff=new h({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==e.timeout?2e4:e.timeout),this.readyState="closed",this.uri=t,this.connecting=[],this.lastPing=null,this.encoding=!1,this.packetBuffer=[];var o=e.parser||i;this.encoder=new o.Encoder,this.decoder=new o.Decoder,this.autoConnect=!1!==e.autoConnect,this.autoConnect&&this.open()}e.exports=p,p.prototype.emitAll=function(){for(var t in this.emit.apply(this,arguments),this.nsps)u.call(this.nsps,t)&&this.nsps[t].emit.apply(this.nsps[t],arguments)},p.prototype.updateSocketIds=function(){for(var t in this.nsps)u.call(this.nsps,t)&&(this.nsps[t].id=this.generateId(t))},p.prototype.generateId=function(t){return("/"===t?"":t+"#")+this.engine.id},r(p.prototype),p.prototype.reconnection=function(t){return arguments.length?(this._reconnection=!!t,this):this._reconnection},p.prototype.reconnectionAttempts=function(t){return arguments.length?(this._reconnectionAttempts=t,this):this._reconnectionAttempts},p.prototype.reconnectionDelay=function(t){return arguments.length?(this._reconnectionDelay=t,this.backoff&&this.backoff.setMin(t),this):this._reconnectionDelay},p.prototype.randomizationFactor=function(t){return arguments.length?(this._randomizationFactor=t,this.backoff&&this.backoff.setJitter(t),this):this._randomizationFactor},p.prototype.reconnectionDelayMax=function(t){return arguments.length?(this._reconnectionDelayMax=t,this.backoff&&this.backoff.setMax(t),this):this._reconnectionDelayMax},p.prototype.timeout=function(t){return arguments.length?(this._timeout=t,this):this._timeout},p.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()},p.prototype.open=p.prototype.connect=function(t){if(c("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;c("opening %s",this.uri),this.engine=o(this.uri,this.opts);var e=this.engine,n=this;this.readyState="opening",this.skipReconnect=!1;var r=s(e,"open",function(){n.onopen(),t&&t()}),i=s(e,"error",function(e){if(c("connect_error"),n.cleanup(),n.readyState="closed",n.emitAll("connect_error",e),t){var o=new Error("Connection error");o.data=e,t(o)}else n.maybeReconnectOnOpen()});if(!1!==this._timeout){var a=this._timeout;c("connect attempt will timeout after %d",a),0===a&&r.destroy();var l=setTimeout(function(){c("connect attempt timed out after %d",a),r.destroy(),e.close(),e.emit("error","timeout"),n.emitAll("connect_timeout",a)},a);this.subs.push({destroy:function(){clearTimeout(l)}})}return this.subs.push(r),this.subs.push(i),this},p.prototype.onopen=function(){c("open"),this.cleanup(),this.readyState="open",this.emit("open");var t=this.engine;this.subs.push(s(t,"data",a(this,"ondata"))),this.subs.push(s(t,"ping",a(this,"onping"))),this.subs.push(s(t,"pong",a(this,"onpong"))),this.subs.push(s(t,"error",a(this,"onerror"))),this.subs.push(s(t,"close",a(this,"onclose"))),this.subs.push(s(this.decoder,"decoded",a(this,"ondecoded")))},p.prototype.onping=function(){this.lastPing=new Date,this.emitAll("ping")},p.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)},p.prototype.ondata=function(t){this.decoder.add(t)},p.prototype.ondecoded=function(t){this.emit("packet",t)},p.prototype.onerror=function(t){c("error",t),this.emitAll("error",t)},p.prototype.socket=function(t,e){var o=this.nsps[t];if(!o){o=new n(this,t,e),this.nsps[t]=o;var r=this;o.on("connecting",i),o.on("connect",function(){o.id=r.generateId(t)}),this.autoConnect&&i()}function i(){~l(r.connecting,o)||r.connecting.push(o)}return o},p.prototype.destroy=function(t){var e=l(this.connecting,t);~e&&this.connecting.splice(e,1),this.connecting.length||this.close()},p.prototype.packet=function(t){c("writing packet %j",t);var e=this;t.query&&0===t.type&&(t.nsp+="?"+t.query),e.encoding?e.packetBuffer.push(t):(e.encoding=!0,this.encoder.encode(t,function(o){for(var n=0;n<o.length;n++)e.engine.write(o[n],t.options);e.encoding=!1,e.processPacketQueue()}))},p.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var t=this.packetBuffer.shift();this.packet(t)}},p.prototype.cleanup=function(){c("cleanup");for(var t=this.subs.length,e=0;e<t;e++)this.subs.shift().destroy();this.packetBuffer=[],this.encoding=!1,this.lastPing=null,this.decoder.destroy()},p.prototype.close=p.prototype.disconnect=function(){c("disconnect"),this.skipReconnect=!0,this.reconnecting=!1,"opening"===this.readyState&&this.cleanup(),this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()},p.prototype.onclose=function(t){c("onclose"),this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",t),this._reconnection&&!this.skipReconnect&&this.reconnect()},p.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var t=this;if(this.backoff.attempts>=this._reconnectionAttempts)c("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var e=this.backoff.duration();c("will wait %dms before reconnect attempt",e),this.reconnecting=!0;var o=setTimeout(function(){t.skipReconnect||(c("attempting reconnect"),t.emitAll("reconnect_attempt",t.backoff.attempts),t.emitAll("reconnecting",t.backoff.attempts),t.skipReconnect||t.open(function(e){e?(c("reconnect attempt error"),t.reconnecting=!1,t.reconnect(),t.emitAll("reconnect_error",e.data)):(c("reconnect success"),t.onreconnect())}))},e);this.subs.push({destroy:function(){clearTimeout(o)}})}},p.prototype.onreconnect=function(){var t=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",t)}},{"./on":40,"./socket":41,backo2:9,"component-bind":12,"component-emitter":13,debug:15,"engine.io-client":18,indexof:32,"socket.io-parser":44}],40:[function(t,e){e.exports=function(t,e,o){return t.on(e,o),{destroy:function(){t.removeListener(e,o)}}}},{}],41:[function(t,e){var o=t("socket.io-parser"),n=t("component-emitter"),r=t("to-array"),i=t("./on"),s=t("component-bind"),a=t("debug")("socket.io-client:socket"),c=t("parseqs"),l=t("has-binary2");e.exports=p;var h={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},u=n.prototype.emit;function p(t,e,o){this.io=t,this.nsp=e,this.json=this,this.ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,this.flags={},o&&o.query&&(this.query=o.query),this.io.autoConnect&&this.open()}n(p.prototype),p.prototype.subEvents=function(){if(!this.subs){var t=this.io;this.subs=[i(t,"open",s(this,"onopen")),i(t,"packet",s(this,"onpacket")),i(t,"close",s(this,"onclose"))]}},p.prototype.open=p.prototype.connect=function(){return this.connected?this:(this.subEvents(),this.io.reconnecting||this.io.open(),"open"===this.io.readyState&&this.onopen(),this.emit("connecting"),this)},p.prototype.send=function(){var t=r(arguments);return t.unshift("message"),this.emit.apply(this,t),this},p.prototype.emit=function(t){if(h.hasOwnProperty(t))return u.apply(this,arguments),this;var e=r(arguments),n={type:(void 0!==this.flags.binary?this.flags.binary:l(e))?o.BINARY_EVENT:o.EVENT,data:e,options:{}};return n.options.compress=!this.flags||!1!==this.flags.compress,"function"==typeof e[e.length-1]&&(a("emitting packet with ack id %d",this.ids),this.acks[this.ids]=e.pop(),n.id=this.ids++),this.connected?this.packet(n):this.sendBuffer.push(n),this.flags={},this},p.prototype.packet=function(t){t.nsp=this.nsp,this.io.packet(t)},p.prototype.onopen=function(){if(a("transport is open - connecting"),"/"!==this.nsp)if(this.query){var t="object"==typeof this.query?c.encode(this.query):this.query;a("sending connect packet with query %s",t),this.packet({type:o.CONNECT,query:t})}else this.packet({type:o.CONNECT})},p.prototype.onclose=function(t){a("close (%s)",t),this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",t)},p.prototype.onpacket=function(t){var e=t.nsp===this.nsp,n=t.type===o.ERROR&&"/"===t.nsp;if(e||n)switch(t.type){case o.CONNECT:this.onconnect();break;case o.EVENT:case o.BINARY_EVENT:this.onevent(t);break;case o.ACK:case o.BINARY_ACK:this.onack(t);break;case o.DISCONNECT:this.ondisconnect();break;case o.ERROR:this.emit("error",t.data)}},p.prototype.onevent=function(t){var e=t.data||[];a("emitting event %j",e),null!=t.id&&(a("attaching ack callback to event"),e.push(this.ack(t.id))),this.connected?u.apply(this,e):this.receiveBuffer.push(e)},p.prototype.ack=function(t){var e=this,n=!1;return function(){if(!n){n=!0;var i=r(arguments);a("sending ack %j",i),e.packet({type:l(i)?o.BINARY_ACK:o.ACK,id:t,data:i})}}},p.prototype.onack=function(t){var e=this.acks[t.id];"function"==typeof e?(a("calling ack %s with %j",t.id,t.data),e.apply(this,t.data),delete this.acks[t.id]):a("bad ack %s",t.id)},p.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},p.prototype.emitBuffered=function(){var t;for(t=0;t<this.receiveBuffer.length;t++)u.apply(this,this.receiveBuffer[t]);for(this.receiveBuffer=[],t=0;t<this.sendBuffer.length;t++)this.packet(this.sendBuffer[t]);this.sendBuffer=[]},p.prototype.ondisconnect=function(){a("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},p.prototype.destroy=function(){if(this.subs){for(var t=0;t<this.subs.length;t++)this.subs[t].destroy();this.subs=null}this.io.destroy(this)},p.prototype.close=p.prototype.disconnect=function(){return this.connected&&(a("performing disconnect (%s)",this.nsp),this.packet({type:o.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this},p.prototype.compress=function(t){return this.flags.compress=t,this},p.prototype.binary=function(t){return this.flags.binary=t,this}},{"./on":40,"component-bind":12,"component-emitter":13,debug:15,"has-binary2":30,parseqs:36,"socket.io-parser":44,"to-array":46}],42:[function(t,e){var o=t("parseuri"),n=t("debug")("socket.io-client:url");e.exports=function(t,e){var r=t;e=e||"undefined"!=typeof location&&location,null==t&&(t=e.protocol+"//"+e.host),"string"==typeof t&&("/"===t.charAt(0)&&(t="/"===t.charAt(1)?e.protocol+t:e.host+t),/^(https?|wss?):\/\//.test(t)||(n("protocol-less url %s",t),t=void 0!==e?e.protocol+"//"+t:"https://"+t),n("parse %s",t),r=o(t)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";var i=-1!==r.host.indexOf(":")?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+i+":"+r.port,r.href=r.protocol+"://"+i+(e&&e.port===r.port?"":":"+r.port),r}},{debug:15,parseuri:37}],43:[function(t,e,o){var n=t("isarray"),r=t("./is-buffer"),i=Object.prototype.toString,s="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===i.call(Blob),a="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===i.call(File);function c(t,e){if(!t)return t;if(r(t)){var o={_placeholder:!0,num:e.length};return e.push(t),o}if(n(t)){for(var i=new Array(t.length),s=0;s<t.length;s++)i[s]=c(t[s],e);return i}if("object"==typeof t&&!(t instanceof Date)){for(var a in i={},t)i[a]=c(t[a],e);return i}return t}function l(t,e){if(!t)return t;if(t&&t._placeholder)return e[t.num];if(n(t))for(var o=0;o<t.length;o++)t[o]=l(t[o],e);else if("object"==typeof t)for(var r in t)t[r]=l(t[r],e);return t}o.deconstructPacket=function(t){var e=[],o=t.data,n=t;return n.data=c(o,e),n.attachments=e.length,{packet:n,buffers:e}},o.reconstructPacket=function(t,e){return t.data=l(t.data,e),t.attachments=void 0,t},o.removeBlobs=function(t,e){var o=0,i=t;(function t(c,l,h){if(!c)return c;if(s&&c instanceof Blob||a&&c instanceof File){o++;var u=new FileReader;u.onload=function(){h?h[l]=this.result:i=this.result,--o||e(i)},u.readAsArrayBuffer(c)}else if(n(c))for(var p=0;p<c.length;p++)t(c[p],p,c);else if("object"==typeof c&&!r(c))for(var d in c)t(c[d],d,c)})(i),o||e(i)}},{"./is-buffer":45,isarray:33}],44:[function(t,e,o){var n=t("debug")("socket.io-parser"),r=t("component-emitter"),i=t("./binary"),s=t("isarray"),a=t("./is-buffer");function c(){}o.protocol=4,o.types=["CONNECT","DISCONNECT","EVENT","ACK","ERROR","BINARY_EVENT","BINARY_ACK"],o.CONNECT=0,o.DISCONNECT=1,o.EVENT=2,o.ACK=3,o.ERROR=4,o.BINARY_EVENT=5,o.BINARY_ACK=6,o.Encoder=c,o.Decoder=d;var l=o.ERROR+'"encode error"';function h(t){var e=""+t.type;if(o.BINARY_EVENT!==t.type&&o.BINARY_ACK!==t.type||(e+=t.attachments+"-"),t.nsp&&"/"!==t.nsp&&(e+=t.nsp+","),null!=t.id&&(e+=t.id),null!=t.data){var r=u(t.data);if(!1===r)return l;e+=r}return n("encoded %j as %s",t,e),e}function u(t){try{return JSON.stringify(t)}catch(e){return!1}}function p(t,e){i.removeBlobs(t,function(t){var o=i.deconstructPacket(t),n=h(o.packet),r=o.buffers;r.unshift(n),e(r)})}function d(){this.reconstructor=null}function f(t){var e=0,r={type:Number(t.charAt(0))};if(null==o.types[r.type])return y("unknown packet type "+r.type);if(o.BINARY_EVENT===r.type||o.BINARY_ACK===r.type){for(var i=e+1;"-"!==t.charAt(++e)&&e!=t.length;);var a=t.substring(i,e);if(a!=Number(a)||"-"!==t.charAt(e))throw new Error("Illegal attachments");r.attachments=Number(a)}if("/"===t.charAt(e+1)){for(i=e+1;++e&&","!==(l=t.charAt(e))&&e!==t.length;);r.nsp=t.substring(i,e)}else r.nsp="/";var c=t.charAt(e+1);if(""!==c&&Number(c)==c){for(i=e+1;++e;){var l;if(null==(l=t.charAt(e))||Number(l)!=l){--e;break}if(e===t.length)break}r.id=Number(t.substring(i,e+1))}if(t.charAt(++e)){var h=g(t.substr(e));if(!1===h||r.type!==o.ERROR&&!s(h))return y("invalid payload");r.data=h}return n("decoded %s as %j",t,r),r}function g(t){try{return JSON.parse(t)}catch(e){return!1}}function m(t){this.reconPack=t,this.buffers=[]}function y(t){return{type:o.ERROR,data:"parser error: "+t}}c.prototype.encode=function(t,e){n("encoding packet %j",t),o.BINARY_EVENT===t.type||o.BINARY_ACK===t.type?p(t,e):e([h(t)])},r(d.prototype),d.prototype.add=function(t){var e;if("string"==typeof t)e=f(t),o.BINARY_EVENT===e.type||o.BINARY_ACK===e.type?(this.reconstructor=new m(e),0===this.reconstructor.reconPack.attachments&&this.emit("decoded",e)):this.emit("decoded",e);else{if(!a(t)&&!t.base64)throw new Error("Unknown type: "+t);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");(e=this.reconstructor.takeBinaryData(t))&&(this.reconstructor=null,this.emit("decoded",e))}},d.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},m.prototype.takeBinaryData=function(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){var e=i.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),e}return null},m.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}},{"./binary":43,"./is-buffer":45,"component-emitter":13,debug:15,isarray:33}],45:[function(t,e){(function(t){e.exports=function(e){return o&&t.isBuffer(e)||n&&(e instanceof ArrayBuffer||r(e))};var o="function"==typeof t&&"function"==typeof t.isBuffer,n="function"==typeof ArrayBuffer,r=function(t){return"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer}}).call(this,t("buffer").Buffer)},{buffer:3}],46:[function(t,e){e.exports=function(t,e){for(var o=[],n=(e=e||0)||0;n<t.length;n++)o[n-e]=t[n];return o}},{}],47:[function(t,e){"use strict";var o,n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),r=64,i={},s=0,a=0;function c(t){var e="";do{e=n[t%r]+e,t=Math.floor(t/r)}while(t>0);return e}function l(){var t=c(+new Date);return t!==o?(s=0,o=t):t+"."+c(s++)}for(;a<r;a++)i[n[a]]=a;l.encode=c,l.decode=function(t){var e=0;for(a=0;a<t.length;a++)e=e*r+i[t.charAt(a)];return e},e.exports=l},{}],ClickSoundComponent:[function(t,e,o){"use strict";cc._RF.push(e,"00bf4ztalhNVoWG4SmO7AfR","ClickSoundComponent");var n=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});const r=t("../MKIndex"),i=t("../../Business/Data/CommonDefine"),{ccclass:s,property:a}=cc._decorator;let c=class extends cc.Component{onLoad(){this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchNode,this)}onDestroy(){}onTouchNode(){0==this.node.getComponent(cc.Button).interactable?r.AudioEngine.playEffect(i.SoundList.BtnWrong):r.AudioEngine.playEffect(i.SoundList.Click)}};c=n([s],c),o.default=c,cc._RF.pop()},{"../../Business/Data/CommonDefine":"CommonDefine","../MKIndex":"MKIndex"}],CommonDefine:[function(t,e,o){"use strict";cc._RF.push(e,"9efc0rsiaVG/piSLAHE8XaR","CommonDefine"),Object.defineProperty(o,"__esModule",{value:!0}),o.RecordData=o.SpriteList=o.SoundList=o.PrefabList=o.PointScoreArr=o.LeftCardsAnchorDist=o.FlipTime=o.DrawCardFlyTime=o.PlayerCardScale=o.TableCardScale=o.MAX_POINT=o.MAX_GROUP=o.DEAL_CARDS_COUNT=o.MAX_HAND_CARDS=o.TOTAL_CARDS_COUNT=o.MAX_PLAYERS=o.GroupFlag=o.GroupType=o.LangList=o.GameStage=o.SceneType=o.UserType=void 0,function(t){t[t.Guest=1]="Guest",t[t.Account=2]="Account"}(o.UserType||(o.UserType={})),function(t){t[t.Loading=0]="Loading",t[t.Lobby=1]="Lobby",t[t.Game=2]="Game"}(o.SceneType||(o.SceneType={})),function(t){t[t.Waiting=0]="Waiting",t[t.Prepare=1]="Prepare",t[t.Deal=2]="Deal",t[t.PickCard=3]="PickCard",t[t.Discard=4]="Discard",t[t.ConfirmGroup=5]="ConfirmGroup",t[t.Finish=6]="Finish"}(o.GameStage||(o.GameStage={})),function(t){t[t.en=0]="en",t[t.hi=1]="hi"}(o.LangList||(o.LangList={})),function(t){t[t.Invalid=0]="Invalid",t[t.Set=1]="Set",t[t.Impure=2]="Impure",t[t.Pure=3]="Pure"}(o.GroupType||(o.GroupType={})),function(t){t[t.None=0]="None",t[t.Invalid=1]="Invalid",t[t.SecondNeed=2]="SecondNeed",t[t.FirstNeed=3]="FirstNeed",t[t.Set=4]="Set",t[t.ImpureSeq=5]="ImpureSeq",t[t.PureSeq=6]="PureSeq",t[t.SecondLife=7]="SecondLife",t[t.FirstLife=8]="FirstLife"}(o.GroupFlag||(o.GroupFlag={})),o.MAX_PLAYERS=5,o.TOTAL_CARDS_COUNT=52,o.MAX_HAND_CARDS=14,o.DEAL_CARDS_COUNT=13,o.MAX_GROUP=5,o.MAX_POINT=80,o.TableCardScale=1,o.PlayerCardScale=.5,o.DrawCardFlyTime=.2,o.FlipTime=.2,o.LeftCardsAnchorDist=7,o.PointScoreArr=[10,2,3,4,5,6,7,8,9,10,10,10,10];class n{}o.PrefabList=n,n.AwardLayer="Scenes/Game/award_layer",n.DropLayer="Scenes/Game/drop_layer",n.MenuLayer="Scenes/Game/menu_layer",n.PaytableLayer="Scenes/Game/paytable_layer",n.HelpLayer="Scenes/Game/help_layer",n.GameRecordLayer="Scenes/Lobby/game_record_layer",n.RecordCell="Scenes/Lobby/RecordCell",n.RecordPage="Scenes/Lobby/RecordPage",n.BroadCastCell="Scenes/Game/BroadCastCell",n.PlayerNode="Scenes/Game/PlayerNode",n.PokerNode="Scenes/Game/PokerNode",n.ResultLayer="Scenes/Game/result_layer",n.GameEntyuCell="Scenes/Lobby/GameEntyuCell",n.InforLayer="Scenes/Game/infor_layer";class r{}o.SoundList=r,r.Bgm="Sound/bgm_hall",r.Click="Sound/click",r.Win="Sound/win",r.BigWin="Sound/big_winner",r.DiceSpin="Sound/dice_spin",r.Chip="Sound/chip",r.BtnWrong="Sound/btn_wrong",r.Dealcard2="Sound/deal_card2",r.Button01="Sound/btn01",r.Button02="Sound/btn02",r.CardFlip1="Sound/card_flip1",r.CardFlip2="Sound/card_flip2",r.Alarm="Sound/alarm";class i{}o.SpriteList=i,i.GameEntey="Texture/Lobby/img_entry",i.TipsDiscard="Texture/Game/Background/img_msg_discard",i.TipsPick="Texture/Game/Background/img_msg_pick",o.RecordData=class{},cc._RF.pop()},{}],ConfigManager:[function(t,e,o){"use strict";cc._RF.push(e,"61ecdS7zDhJaIyXsWMOoGLM","ConfigManager"),Object.defineProperty(o,"__esModule",{value:!0});class n{static setUrlConfig(t){n.urlConfig=t}static setAppInfo(t){n.appInfo=t}}o.default=n,n.urlConfig=null,n.appInfo=null,cc._RF.pop()},{}],ConfirmDialog:[function(t,e,o){"use strict";cc._RF.push(e,"a824eCDWdpEqJh4R8QjqzfN","ConfirmDialog");var n,r=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});const{ccclass:i,property:s}=cc._decorator;let a=n=class extends cc.Component{constructor(){super(...arguments),this.m_txtContent=null,this.m_btnOK=null,this.m_btnCancel=null,this.m_btnClose=null,this.m_okPos=null,this.m_callback=null,this.m_showCancel=null}onLoad(){this.m_okPos=this.m_btnOK.node.position}onDestroy(){}show(t,e,o){this.m_callback=e,this.m_txtContent.string=t,this.m_showCancel=void 0===o||o,this.m_showCancel?(this.m_btnCancel.node.active=!0,this.m_btnClose.node.active=!0,this.m_btnOK.node.position=this.m_okPos):(this.m_btnCancel.node.active=!1,this.m_btnClose.node.active=!1,this.m_btnOK.node.x=0)}onTouchOK(){this.m_callback&&this.m_callback(!0),this.closeSelf()}onTouchCancel(){this.m_callback&&this.m_callback(!1),this.closeSelf()}onTouchClose(){this.m_showCancel&&(this.m_callback&&this.m_callback(!1),this.closeSelf())}closeSelf(){this.node&&this.node.destroy()}static show(t,e,o,r){if(null==n.defaultSkin){let t=cc.resources.get("Scenes/Common/ConfirmDialog",cc.Prefab);if(null==t)return void cc.log("Please init ConfirmDialog defaultSkin on app init");n.defaultSkin=t}n.showWithFile(n.defaultSkin,t,e,o)}static showWithFile(t,e,o,r){let i=cc.director.getScene(),s=null,a=i.getChildByName("ConfirmDialog");null==a?((s=cc.instantiate(t).getComponent(n)).node.name="ConfirmDialog",i.addChild(s.node)):s=a.getComponent(n),s.show(e,o,r)}static hide(){let t=cc.director.getScene().getChildByName("ConfirmDialog");t&&t.destroy()}};a.defaultSkin=null,r([s(cc.Label)],a.prototype,"m_txtContent",void 0),r([s(cc.Button)],a.prototype,"m_btnOK",void 0),r([s(cc.Button)],a.prototype,"m_btnCancel",void 0),r([s(cc.Button)],a.prototype,"m_btnClose",void 0),a=n=r([i],a),o.default=a,cc._RF.pop()},{}],DataManager:[function(t,e,o){"use strict";cc._RF.push(e,"bb44c7d08JNtpYy1h8nVOKI","DataManager"),Object.defineProperty(o,"__esModule",{value:!0});const n=t("./UserData"),r=t("./HomeData"),i=t("./GameData");class s{static init(){s.userData=new n.default,s.homeData=new r.HomeData,s.gameData=new i.GameData}}o.default=s,cc._RF.pop()},{"./GameData":"GameData","./HomeData":"HomeData","./UserData":"UserData"}],DropLayer:[function(t,e,o){"use strict";cc._RF.push(e,"3683b6O0P5B7bSFXLzzHfZu","DropLayer");var n=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});const r=t("../MobileKit/MKIndex"),i=t("../Business/Data/DataManager"),s=t("./Common/PopupBase"),a=t("./Common/UIUtils"),c=t("../Business/Logic/GameController"),{ccclass:l,property:h,menu:u}=cc._decorator;let p=class extends s.default{constructor(){super(...arguments),this.txtTips=null,this.btnCancel=null,this.btnOK=null,this.animationDuration=.3}static get path(){return"Scenes/Game/message_layer"}updateDisplay(){let t="\u20b9"+a.UIUtils.getShortNumber(i.default.gameData.getDropChips());this.txtTips.string=r.LocalLang.get("game_drop_tips",[t]),a.UIUtils.ButtonEvent(this.btnCancel,this.onTouchClose.bind(this)),a.UIUtils.ButtonEvent(this.btnOK,this.onTouchOkey.bind(this))}onTouchOkey(){r.commandCenter.emit(new c.CmdDrop),this.hide()}onTouchClose(){this.hide()}};n([h(cc.Label)],p.prototype,"txtTips",void 0),n([h(cc.Button)],p.prototype,"btnCancel",void 0),n([h(cc.Button)],p.prototype,"btnOK",void 0),p=n([l],p),o.default=p,cc._RF.pop()},{"../Business/Data/DataManager":"DataManager","../Business/Logic/GameController":"GameController","../MobileKit/MKIndex":"MKIndex","./Common/PopupBase":"PopupBase","./Common/UIUtils":"UIUtils"}],FilterCell:[function(t,e,o){"use strict";cc._RF.push(e,"0f153SLIxZJAprC+YSThgRZ","FilterCell");var n=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0}),o.FilterCell=void 0;const r=t("../../Business/Data/DataManager"),i=t("../Common/UIUtils"),{ccclass:s,property:a,menu:c}=cc._decorator;let l=class extends cc.Component{constructor(){super(...arguments),this.txtPointValue=null,this.pointValueIdx=0,this.callback=null}onLoad(){i.UIUtils.NodeClickEvent(this.node,this.onToucFilterRecord.bind(this))}setData(t,e){this.pointValueIdx=t;let o=r.default.homeData.getPointValueList();this.txtPointValue.string=o[t].toString(),t=t>4?4:t,this.callback=e}onToucFilterRecord(){this.callback(this.pointValueIdx)}};n([a(cc.Label)],l.prototype,"txtPointValue",void 0),l=n([s,c("Lobby/FilterCell")],l),o.FilterCell=l,cc._RF.pop()},{"../../Business/Data/DataManager":"DataManager","../Common/UIUtils":"UIUtils"}],GameAction:[function(t,e,o){"use strict";cc._RF.push(e,"5725aL0vPtBNqkFplGAH0Ve","GameAction");var n=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});const r=t("../MobileKit/MKIndex"),i=t("../Business/Data/DataManager"),s=t("../Business/Data/CommonDefine"),a=t("../Business/Logic/GameNotice"),c=t("./Common/UIUtils"),l=t("./Common/PopupManager"),h=t("../Business/Logic/GameController"),u=t("./Common/PrefabPool"),p=t("./PokerNode"),{ccclass:d,property:f,menu:g}=cc._decorator;let m=class extends cc.Component{constructor(){super(...arguments),this.btnDiscard=null,this.btnGroup=null,this.btnDrop=null,this.btnConfirm=null,this.txtDropChips=null,this.txtScore=null,this.txtBalance=null,this.tableCardLeftPosNode=null,this.tableCardLeft=null,this.tableCardRight=null,this.dealCardPos=null,this.handCardPanel=null,this.imgGroupFlag=null,this.imgHandCardMask=null,this.gameData=null,this.handPokerList=[],this.imgGroupFlagList=[],this.btnChowCard=null,this.btnDrawCard=null,this.cardUpY=0,this.cardGap=0,this.groupGap=0,this.cardWidth=0,this.cardHeight=0,this.touchMoved=!1,this.dragCard=null,this.touchBeganPos=null,this.touchedCardPos=null,this.dragCardGroupList=[],this.selectCardsList=[],this.tableCardLeftPos=null,this.tableCardRightPos=null}onLoad(){r.noticeCenter.registAllNotice(this),this.gameData=i.default.gameData,this.initUI(),this.resetGameStage(),this.clearGame()}initUI(){this.handPokerList=[];for(let o=0;o<s.MAX_HAND_CARDS;++o){let t=u.default.get(s.PrefabList.PokerNode).getComponent(p.default);t.node.active=!1,this.handCardPanel.addChild(t.node),this.handPokerList.push(t),t.setPoker(-1)}this.imgGroupFlagList.push(this.imgGroupFlag);for(let o=1;o<s.MAX_GROUP;++o){let t=cc.instantiate(this.imgGroupFlag.node);this.imgGroupFlag.node.parent.addChild(t),this.imgGroupFlagList.push(t.getComponent(cc.Sprite))}this.imgGroupFlagList.forEach(t=>{t.node.active=!1,t.node.zIndex=100}),this.cardWidth=this.handPokerList[0].node.width,this.cardHeight=this.handPokerList[0].node.height,this.groupGap=this.cardWidth/3;let t=(this.node.width-20-this.groupGap*(s.MAX_GROUP-1)-5*this.cardWidth)/(s.MAX_HAND_CARDS-5),e=this.cardWidth/2;this.cardGap=Math.min(e,t),this.cardUpY=this.cardHeight/8,this.tableCardLeftPos=this.handCardPanel.convertToNodeSpaceAR(this.tableCardLeftPosNode.parent.convertToWorldSpaceAR(this.tableCardLeftPosNode.position)),this.tableCardRightPos=this.handCardPanel.convertToNodeSpaceAR(this.tableCardRight.parent.convertToWorldSpaceAR(this.tableCardRight.position)),this.btnDrawCard=this.tableCardLeft.getComponent(cc.Button),this.btnChowCard=this.tableCardRight.getComponent(cc.Button),this.handCardPanel.on(cc.Node.EventType.TOUCH_START,this.onTouchBegin,this),this.handCardPanel.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.handCardPanel.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.handCardPanel.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchEnd,this),this.btnGroup.node.on("click",this.onTouchGroup,this),this.btnDrop.node.on("click",this.onTouchDrop,this),this.btnDiscard.node.on("click",this.onTouchDiscard,this),this.btnConfirm.node.on("click",this.onTouchConfirm,this),this.tableCardLeft.on("click",this.onTouchDrawCard,this),this.tableCardRight.on("click",this.onTouchChowCard,this)}clearGame(){this.txtScore.string="",this.btnConfirm.node.active=!1,this.btnDrop.node.active=!1,this.btnGroup.node.active=!1,this.btnDiscard.node.active=!1,this.showHandCardMask(!1),this.showPickCard(!1),this.clearHandCards(),this.clearGroupFlag(),this.stopDealCardsAction()}stopDealCardsAction(){let t=this.handPokerList;for(let e=0;e<t.length;++e){let o=t[e];o.node.scaleX=1,o.node.stopAllActions()}this.handCardPanel.stopAllActions()}initTestPoker(){let t=[];for(let o=0;o<106;o++)t.push(o);let e=[];for(let o=0;o<5;o++){let o=[];for(let e=0;e<13;e++){let e=r.Utils.randRange(0,t.length-1);o.push(t[e]),t.splice(e,1)}e.push(o)}return e.forEach(t=>{t.sort((t,e)=>t-e)}),e}clearHandCards(){this.handPokerList.forEach(t=>{t.node.active=!1,t.node.x=0,t.node.y=0,t.node.scale=1,t.node.stopAllActions(),t.setPoker(-1)})}clearGroupFlag(){for(let t=0;t<s.MAX_GROUP;++t)this.imgGroupFlagList[t].node.active=!1}resetGameStage(){let t=this.dealCardPos.getPosition();this.tableCardLeft.setPosition(t.x,t.y)}onTouchGroup(){if(this.selectCardsList.length<2)return;this.btnGroup.interactable=!1;let t=[];this.selectCardsList.forEach(e=>{t.push(e.getPokerData().getCode())}),this.gameData.getHandCardData().groupCard(t),this.updateCardGroup(this.gameData.getHandCardData().getGroupList()),r.AudioEngine.playEffect(s.SoundList.Button02)}onTouchDiscard(){if(1!=this.selectCardsList.length)return;this.btnDiscard.interactable=!1;let t=this.selectCardsList[0];this.selectCardsList.length=0;let e=t.getPokerData().getCode();this.sendDiscard(e),r.AudioEngine.playEffect(s.SoundList.Button01)}onTouchDrop(){l.default.show(s.PrefabList.DropLayer),r.AudioEngine.playEffect(s.SoundList.Button01)}onTouchConfirm(){r.commandCenter.emit(new h.CmdConfirmGroup),this.btnConfirm.interactable=!1,r.AudioEngine.playEffect(s.SoundList.Button02)}sendDiscard(t){if(t==this.gameData.getChowCard()){let t=this.gameData.getHandCardData().getGroupList();return void this.updateCardGroup(t)}let e=new h.CmdDisCard;e.card=t,r.commandCenter.emit(e)}onTouchDrawCard(){r.AudioEngine.playEffect(s.SoundList.CardFlip1),this.tableCardLeft,this.showPickCard(!1);let t=new h.CmdDrawCard;r.commandCenter.emit(t)}onTouchChowCard(){r.AudioEngine.playEffect(s.SoundList.CardFlip1),this.showPickCard(!1);let t=new h.CmdChowCard;r.commandCenter.emit(t)}showPickCard(t){t?(this.btnDrawCard.interactable=!0,this.btnChowCard.interactable=!0):(this.btnDrawCard.interactable=!1,this.btnChowCard.interactable=!1)}canChangeCards(){let t=this.gameData.getSelfPlayer();return!!t&&!(t.isDropped()||t.isWinner()||t.isConfirmed()||!t.isPlaying())}onNtcJokerCard(){this.updateBtnState(),this.updateCardGroup(this.gameData.getHandCardData().getGroupList());for(let t of this.handPokerList)c.UIUtils.setJokerFlag(t)}dealCards(t){let e=this.gameData.getHandCardData().getHandCardList(),o=cc.tween(this.handCardPanel);for(let n=0;n<13;n++){let t=this.handPokerList[n];t.setPoker(-1),t.node.stopAllActions(),o.call(()=>{let e=this.dealCardPos.parent.convertToWorldSpaceAR(this.dealCardPos.position),o=this.handCardPanel.convertToNodeSpaceAR(e),r=(this.cardGap+10)*n-400,i=new cc.Vec3(r,0);t.node.active=!0,c.UIUtils.cardFly(t.node,o,i,1,.5)}),o.delay(.05)}this.handPokerList.forEach((t,n)=>{o.call(()=>{t.node.stopAllActions(),c.UIUtils.flipToFront(t.node,.5,()=>{t.setPoker(e[n])})}),o.delay(.05)}),o.delay(.5),o.call(()=>{this.updateCardGroup(this.gameData.getHandCardData().getGroupList());let t=this.tableCardLeftPosNode.getPosition();cc.tween(this.tableCardLeft).to(.5,{x:t.x,y:t.y},{easing:"smooth"})}),t&&o.call(()=>{t()}),o.start(),i.default.gameData.getHandCardData().sortGroupByColor()}discard(t,e){let o=null;if(this.handPokerList.forEach(e=>{e.getPokerData().getCode()!=t||(o=e)}),o){o.node.stopAllActions(),o.node.scale=1,o.node.active=!0;let t=cc.tween(o.node);t.to(s.DrawCardFlyTime,{position:this.tableCardRightPos,scale:s.TableCardScale}),t.call(()=>{r.AudioEngine.playEffect(s.SoundList.CardFlip1),e(),o.node.active=!1,o.setPoker(-1);let t=this.gameData.getHandCardData().getGroupList();this.updateCardGroup(t)}),t.start()}else e()}drawCard(t){this.addCard(this.tableCardLeftPos,t,!0)}chowCard(t){this.addCard(this.tableCardRightPos,t,!1)}addCard(t,e,o){let n=this.gameData.getHandCardData().getGroupList();this.updateCardGroup(n);let r=null;for(let s of this.handPokerList)if(s.getPokerData().getCode()==e){r=s;break}if(null==r)return;let i=r.node.position;r.node.stopAllActions(),o?r.setPoker(-1):(r.setPoker(e),c.UIUtils.setJokerFlag(r)),r.node.scale=s.TableCardScale,r.node.position=t,r.node.active=!0;let a=cc.tween(r.node);a.to(s.DrawCardFlyTime,{position:i,scale:1}),o&&a.call(()=>{c.UIUtils.flipToFront(r.node,s.FlipTime,()=>{r.setPoker(e)})}).delay(s.FlipTime).call(()=>{c.UIUtils.setJokerFlag(r)}),a.start()}onTouchBegin(t){if(!this.canChangeCards())return;if(this.gameData.getJokerCard()<0)return;this.touchMoved=!1,this.dragCard=null,this.touchBeganPos=t.getLocation();let e=this.handCardPanel.convertToNodeSpaceAR(t.getLocation()),o=this.getTouchCard(e);o&&(o.node.y=this.cardUpY,this.dragCard=o,this.dragCardGroupList=this.gameData.getHandCardData().copyGroupList(),this.touchedCardPos=o.node.position)}onTouchMove(t){if(!this.canChangeCards())return;if(null==this.dragCard)return;let e=t.getLocation(),o=e.x-this.touchBeganPos.x,n=e.y-this.touchBeganPos.y;if((Math.abs(o)>this.cardGap||Math.abs(n)>this.cardGap)&&(this.touchMoved=!0),this.touchMoved){let t=this.touchedCardPos.x+o,e=this.touchedCardPos.y+n;e<this.cardUpY&&(e=this.cardUpY),this.dragCard.node.zIndex=50,this.dragCard.node.x=t,this.dragCard.node.y=e;let r=this.findInsertPoker(this.dragCard);if(r){let t=this.dragCard.getPokerData().getCode(),e=r.getPokerData().getCode(),o=this.dragCard.node.x>r.node.x;if(t<0||e<0)return;this.gameData.getHandCardData().moveCard(this.dragCardGroupList,t,e,o)&&this.dragCardGroup(this.dragCardGroupList)}}}onTouchEnd(t){if(this.canChangeCards())if(this.touchMoved&&this.dragCard)if(this.dragCardGroupList.length>0&&(this.gameData.getHandCardData().setCardGroup(this.dragCardGroupList),this.dragCardGroupList=[]),this.dragCard.node.y>this.cardHeight){let t=this.dragCard.getPokerData().getCode();this.dragCard=null,this.gameData.getActiveSeat()==this.gameData.getSelfSeat()&&this.gameData.getGameStage()==s.GameStage.Discard?this.sendDiscard(t):(this.gameData.getHandCardData().updateCardGroupList(),this.updateCardGroup(this.gameData.getHandCardData().getGroupList()))}else this.dragCard=null,this.gameData.getHandCardData().updateCardGroupList(),this.updateCardGroup(this.gameData.getHandCardData().getGroupList()),r.AudioEngine.playEffect(s.SoundList.CardFlip1);else{this.dragCard=null;let e=this.handCardPanel.convertToNodeSpaceAR(t.getLocation()),o=this.getTouchCard(e);if(o){let t=this.selectCardsList.indexOf(o);t<0?(this.selectCardsList.push(o),o.node.y=this.cardUpY):(this.selectCardsList.splice(t,1),o.node.y=0),this.updateBtnState()}}else this.dragCard=null}getTouchCard(t){let e=null;for(let o=this.handPokerList.length-1;o>=0;o--){let n=this.handPokerList[o];if(n.node.active&&n.node.getBoundingBox().contains(t)){e=n;break}}return e}findInsertPoker(t){let e=[];for(let s of this.handPokerList)s.node.active&&e.push(s);e.sort(function(t,e){return t.node.x-e.node.x});let o=e.indexOf(t),n=null;o<e.length-1&&(n=e[o+1]);let r=null;o>0&&(r=e[o-1]);let i=null;return n&&r?i=Math.abs(t.node.x-n.node.x)<Math.abs(t.node.x-r.node.x)?n:r:n?i=n:r&&(i=r),i}dragCardGroup(t){this.clearGroupFlag();let e=(t.length-1)*this.groupGap;for(let r=0;r<t.length;++r)e+=(t[r].cards.length-1)*this.cardGap+this.cardWidth;let o=-e/2,n=0;for(let r=0;r<t.length;++r){let e=t[r],i=e.cards.length,s=this.imgGroupFlagList[r];s.node.active=!0,s.node.width=(i-1)*this.cardGap+this.cardWidth+10,s.node.x=o+s.node.width/2-5,c.UIUtils.setGroupFlag(s,e.groupFlag);for(let t=0;t<i;++t){let r=e.cards[t],s=null;for(let t=0;t<this.handPokerList.length;++t){let e=this.handPokerList[t];if(e.node.active&&e.getPokerData().getCode()==r){s=e;break}}null!=s?(this.dragCard!=s&&(s.node.x=this.cardWidth/2+o,s.node.y=0,s.node.zIndex=n),n++,o+=t==i-1?this.cardWidth:this.cardGap):cc.log("handCardsList card error")}o+=this.groupGap}}stopDragCard(){this.dragCard&&(this.dragCard=null,this.gameData.getHandCardData().updateCardGroupList(),this.updateCardGroup(this.gameData.getHandCardData().getGroupList()),this.dragCardGroupList=[])}showHandCardMask(t){this.imgHandCardMask.active=t}updateCardGroup(t){this.clearHandCards(),this.clearGroupFlag(),this.selectCardsList.length=0;let e=(t.length-1)*this.groupGap;for(let r=0;r<t.length;++r)e+=(t[r].cards.length-1)*this.cardGap+this.cardWidth;this.handCardPanel.width=e;let o=-e/2,n=0;for(let r=0;r<t.length;++r){let e=t[r],i=e.cards.length,a=this.imgGroupFlagList[r];a.node.active=!0,a.node.width=(i-1)*this.cardGap+this.cardWidth+10,a.node.x=o+a.node.width/2-5,c.UIUtils.setGroupFlag(a,e.groupFlag);for(let t=0;t<i;++t){let r=e.cards[t];if(n>=s.MAX_HAND_CARDS){cc.log("handCardsList card error");continue}let a=this.handPokerList[n];a.node.active=!0,a.setPoker(r),c.UIUtils.setJokerFlag(a),a.node.x=this.cardWidth/2+o,a.node.y=0,a.node.zIndex=n,n++,o+=t==i-1?this.cardWidth:this.cardGap}o+=this.groupGap}this.txtScore.string=this.gameData.getHandCardData().getPoint().toString(),this.updateDropChips()}updateBtnState(){let t=this.gameData.getGameStage();t==s.GameStage.PickCard?(this.btnDrop.node.active=!0,this.btnDrop.interactable=!0,this.btnGroup.node.active=!0,this.btnDiscard.node.active=!0,this.gameData.getActiveSeat()==this.gameData.getSelfSeat()?(this.btnDiscard.interactable=!1,this.updateBtnGroup()):this.canChangeCards()?(this.btnDiscard.interactable=!1,this.updateBtnGroup()):(this.btnConfirm.node.active=!1,this.btnDrop.node.active=!1,this.btnGroup.node.active=!1,this.btnDiscard.node.active=!1)):t==s.GameStage.Discard?(this.btnDrop.node.active=!0,this.btnDrop.interactable=!0,this.btnGroup.node.active=!0,this.btnDiscard.node.active=!0,this.gameData.getActiveSeat()==this.gameData.getSelfSeat()?(this.btnDrop.interactable=!1,this.updateBtnGroup(),this.updateBtnDiscard()):this.canChangeCards()?(this.btnDrop.node.active=!0,this.btnGroup.node.active=!0,this.btnDiscard.node.active=!0,this.updateBtnGroup()):(this.btnConfirm.node.active=!1,this.btnDrop.node.active=!1,this.btnGroup.node.active=!1,this.btnDiscard.node.active=!1)):t==s.GameStage.ConfirmGroup?this.canChangeCards()?(this.btnDrop.node.active=!0,this.btnDrop.interactable=!1,this.btnGroup.node.active=!0,this.btnDiscard.node.active=!1,this.btnConfirm.node.active=!0,this.btnConfirm.interactable=!0,this.updateBtnGroup()):(this.btnDrop.node.active=!1,this.btnGroup.node.active=!1,this.btnDiscard.node.active=!1,this.btnConfirm.node.active=!1):t==s.GameStage.Deal?(this.btnDrop.node.active=!1,this.btnGroup.node.active=!1,this.btnDiscard.node.active=!1):t==s.GameStage.Finish&&(this.btnDrop.node.active=!1,this.btnGroup.node.active=!1,this.btnDiscard.node.active=!1)}updateBtnGroup(){let t=this.selectCardsList.length;this.btnGroup.interactable=t>1}updateBtnDiscard(){let t=this.selectCardsList.length;this.btnDiscard.interactable=1==t}updateDropChips(){this.txtDropChips.string=c.UIUtils.getShortNumber(this.gameData.getDropChips())}updateBalance(){this.txtBalance.string=c.UIUtils.getShortNumber(i.default.userData.getBalance())}onNtcDiscard(t){t.seat==this.gameData.getSelfSeat()&&(this.btnDrop.interactable=!0,this.selectCardsList.length=0,this.stopDragCard())}onNtcGameInfo(t){if(this.gameData.getSelfSeat()<0||!this.gameData.getSelfPlayer().isPlaying())return;let e=this.gameData.getGameStage();if(e!=s.GameStage.Prepare&&e!=s.GameStage.Waiting){let t=this.gameData.getHandCardData().getGroupList();this.updateCardGroup(t),this.updateBtnState(),this.updateDropChips(),this.canChangeCards()||this.showHandCardMask(!0)}e==s.GameStage.PickCard&&this.gameData.getSelfSeat()==this.gameData.getActiveSeat()&&this.showPickCard(!0)}onNtcResetGame(t){this.clearGame()}onNtcStandUp(t){this.gameData.getSelfSeat()<0&&this.clearGame()}onNtcWaitPickCard(t){this.updateBtnState(),t.seat==this.gameData.getSelfSeat()?this.showPickCard(!0):this.showPickCard(!1)}onNtcDrawCard(t){this.showPickCard(!1),this.updateDropChips(),t.seat==this.gameData.getSelfSeat()&&(this.btnDrop.interactable=!1,this.selectCardsList.length=0,this.stopDragCard())}onNtcChowCard(t){this.showPickCard(!1),this.updateDropChips(),t.seat==this.gameData.getSelfSeat()&&(this.btnDrop.interactable=!1,this.selectCardsList.length=0,this.stopDragCard())}onNtcDrop(t){t.seat==this.gameData.getSelfSeat()&&(this.selectCardsList.length=0,this.stopDragCard(),this.showHandCardMask(!0))}onNtcShow(t){this.selectCardsList.length=0,this.updateBtnState(),t.seat==this.gameData.getSelfSeat()?this.showHandCardMask(!0):this.updateDropChips()}onNtcConfirmGroup(t){this.updateBtnState(),t.seat==this.gameData.getSelfSeat()&&this.showHandCardMask(!0)}onNtcFinish(){this.updateBalance(),this.clearGame()}};n([f({type:cc.Button,displayName:""})],m.prototype,"btnDiscard",void 0),n([f({type:cc.Button,displayName:""})],m.prototype,"btnGroup",void 0),n([f({type:cc.Button,displayName:""})],m.prototype,"btnDrop",void 0),n([f({type:cc.Button,displayName:""})],m.prototype,"btnConfirm",void 0),n([f(cc.Label)],m.prototype,"txtDropChips",void 0),n([f(cc.Label)],m.prototype,"txtScore",void 0),n([f(cc.Label)],m.prototype,"txtBalance",void 0),n([f({type:cc.Node,displayName:"\u684c\u4e0a\u724c\u5de6\u908aDraw\u5340\u7684\u4f4d\u7f6e"})],m.prototype,"tableCardLeftPosNode",void 0),n([f({type:cc.Node,displayName:"\u684c\u4e0a\u724c\u5de6\u908aDraw\u5340"})],m.prototype,"tableCardLeft",void 0),n([f({type:cc.Node,displayName:"\u684c\u4e0a\u724c\u53f3\u908aChow\u5340"})],m.prototype,"tableCardRight",void 0),n([f({type:cc.Node,displayName:"\u767c\u724c\u4f4d\u7f6e"})],m.prototype,"dealCardPos",void 0),n([f({type:cc.Node,displayName:"\u624b\u724c\u653e\u7f6e\u5340"})],m.prototype,"handCardPanel",void 0),n([f({type:cc.Sprite,displayName:"Flag\u986f\u793a\u7d44\u4ef6"})],m.prototype,"imgGroupFlag",void 0),n([f({type:cc.Node,displayName:""})],m.prototype,"imgHandCardMask",void 0),n([r.onNotice(a.NtcSetJoker)],m.prototype,"onNtcJokerCard",null),n([r.onNotice(a.NtcDiscard)],m.prototype,"onNtcDiscard",null),n([r.onNotice(a.NtcGameInfo)],m.prototype,"onNtcGameInfo",null),n([r.onNotice(a.NtcResetGame)],m.prototype,"onNtcResetGame",null),n([r.onNotice(a.NtcStandUp)],m.prototype,"onNtcStandUp",null),n([r.onNotice(a.NtcWaitPickCard)],m.prototype,"onNtcWaitPickCard",null),n([r.onNotice(a.NtcDrawCard)],m.prototype,"onNtcDrawCard",null),n([r.onNotice(a.NtcChowCard)],m.prototype,"onNtcChowCard",null),n([r.onNotice(a.NtcDrop)],m.prototype,"onNtcDrop",null),n([r.onNotice(a.NtcShow)],m.prototype,"onNtcShow",null),n([r.onNotice(a.NtcConfirmGroup)],m.prototype,"onNtcConfirmGroup",null),n([r.onNotice(a.NtcFinish)],m.prototype,"onNtcFinish",null),m=n([d],m),o.default=m,cc._RF.pop()},{"../Business/Data/CommonDefine":"CommonDefine","../Business/Data/DataManager":"DataManager","../Business/Logic/GameController":"GameController","../Business/Logic/GameNotice":"GameNotice","../MobileKit/MKIndex":"MKIndex","./Common/PopupManager":"PopupManager","./Common/PrefabPool":"PrefabPool","./Common/UIUtils":"UIUtils","./PokerNode":"PokerNode"}],GameController:[function(t,e,o){"use strict";cc._RF.push(e,"b33e4rPpodINYZCfe4x62BN","GameController");var n=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0}),o.GameController=o.CmdSetJoker=o.CmdConfirmGroup=o.CmdDrop=o.CmdDisCard=o.CmdChowCard=o.CmdDrawCard=o.CmdQuitGame=o.CmdSwitchTable=o.CmdIntoGame=o.CmdTestResult=o.CmdTestToWaitDiscard=o.CmdTestToWaitPick=o.CmdTestStart=void 0;const r=t("../../MobileKit/MKIndex"),i=t("../../Business/Data/DataManager"),s=t("../../Business/Data/CommonDefine"),a=t("./GameNotice"),c=t("../NetWork/NetworkManager"),l=t("../Data/HandCardsData"),h=t("../Data/PlayerData"),u=t("./SceneController");let p=class{};p=n([r.createCommand],p),o.CmdTestStart=p;let d=class{};d=n([r.createCommand],d),o.CmdTestToWaitPick=d;let f=class{};f=n([r.createCommand],f),o.CmdTestToWaitDiscard=f;let g=class{};g=n([r.createCommand],g),o.CmdTestResult=g;let m=class{constructor(t){this.gameCode="",this.gameCode=t}};m=n([r.createCommand],m),o.CmdIntoGame=m;let y=class{};y=n([r.createCommand],y),o.CmdSwitchTable=y;let C=class{};C=n([r.createCommand],C),o.CmdQuitGame=C;let b=class{};b=n([r.createCommand],b),o.CmdDrawCard=b;let v=class{};v=n([r.createCommand],v),o.CmdChowCard=v;let k=class{constructor(){this.card=-1}};k=n([r.createCommand],k),o.CmdDisCard=k;let S=class{};S=n([r.createCommand],S),o.CmdDrop=S;let w=class{};w=n([r.createCommand],w),o.CmdConfirmGroup=w;let P=class{constructor(){this.jokerCard=-1}};P=n([r.createCommand],P),o.CmdSetJoker=P;class _ extends r.Controller{constructor(){super(),this.m_socket=null,this.setName("SettingController"),r.noticeCenter.registAllNotice(this),r.commandCenter.registAllCommand(this),this.m_socket=c.default.getInstance().getCommonSocket(),this.m_socket.registAllMsg(this),this.gameData=i.default.gameData}onExit(){r.noticeCenter.targetOff(this),r.commandCenter.targetOff(this)}onCmdTestStart(t){let e={},o=1;cc.tween(this).call(()=>{(e={}).player={};for(let t=0;t<3;t++)e.player.index=t,e.player.canPlay=!0,this.onNetSitDown(e),o+=1}).delay(1).call(()=>{(e={}).timeout=1e3,this.onNetReady(e)}).delay(1).call(()=>{e={};let t=[];for(let e=0;e<104;e++)t.push(e);i.default.gameData.getPlayerList().forEach(e=>{if(e.getSeat()>-1){let o=[];for(let e=0;e<13;e++){let e=r.Utils.randRange(0,t.length-1),n=t[e];t.splice(e,1),o.push(n)}e.setHandCards(o)}}),e.baseBet=10,e.timeout=1e4;let o=r.Utils.randRange(0,t.length-1),n=t[o];t.splice(o,1),e.firstPoker=n;let s=this.gameData.getSelfPlayer().getHandCards();e.myPokers=[],s.forEach(t=>{e.myPokers.push(t)}),e.myGroups=[];for(let r=0;r<4;r++){let t=3*r,o=[];o=[s[t],s[t+1],s[t+2]],3==r&&o.push(s[t+3]);let n={};n.pokers=o,n.groupFlag=0,e.myGroups.push(n)}let a=r.Utils.randRange(0,t.length-1),c=t[a];t.splice(a,1),e.jokerPoker=c,this.onNetDealCards(e)}).start()}onCmdTestToWaitPick(t){let e={};e.index=this.gameData.getSelfSeat(),e.timeout=1e4,this.onNetWaitPickPoker(e)}onCmdTestToWaitDiscard(t){let e={};e.index=this.gameData.getSelfSeat(),e.timeout=1e4,this.onNetWaitDiscard(e),cc.tween(this).delay(5).call(()=>{r.commandCenter.emit(new g)}).start()}onCmdTestResult(t){let e={myGold:25e3,timeout:1e4,winLostInfo:[]};i.default.gameData.getPlayerList().forEach(t=>{if(t.getSeat()<0)return;let o={},n=[0,1,2,3,4,5,6,7,9,8,10,11,12];o.groups=[];for(let e=0;e<4;e++){let r=3*e,s=[];s=[n[r],n[r+1],n[r+2]],3==e&&s.push(n[r+3]);let a={};a.pokers=s,t.getSeat()==i.default.gameData.getSelfSeat()?a.life=8:a.life=1,o.groups.push(a)}o.name="Player "+t.getSeat(),o.index=t.getSeat(),t.getSeat()==i.default.gameData.getSelfSeat()?(o.isWin=!0,o.point=0,o.winLosGold=1e4):(o.isWin=!1,o.point=77,o.winLosGold=2e3),e.winLostInfo.push(o)})}onCmdIntoGame(t){this.sendIntoGame(t.gameCode)}sendIntoGame(t){let e={};e.gameCode=t,cc.log("[send] IntoRoom = "+JSON.stringify(e)),this.m_socket.send("INTO_ROOM",e);let o={status:{}};o.status.state=s.GameStage.Prepare,o.status.nowPlayerIndex=3,o.players=[];let n={};n.index=o.status.nowPlayerIndex,n.canPlay=!0,o.players.push(n),o.my={},o.my.index=o.status.nowPlayerIndex,o.my.groups={},o.start={},o.start.baseBet=10,this.onAckIntoGame(o)}onAckIntoGame(t){let e=t;cc.log("IntoRoomRsp = "+JSON.stringify(e)),this.setGameDataFromMsg(e),r.noticeCenter.emit(new a.NtcGameInfo)}setGameDataFromMsg(t){let e=this.gameData;e.resetAllData(),e.setGameStage(t.status.state),e.setStageLeftTime(t.status.timeout/1e3);let o=e.getPlayerList();for(let n=0;n<t.players.length;++n){let e=t.players[n],r=o[e.index];r&&this.setPlayerFromMsg(r,e)}if(e.setSelfSeat(t.my.index),e.setActiveSeat(t.status.nowPlayerIndex),e.setPointValue(t.start.baseBet),t.status.state>s.GameStage.Prepare){e.setPoint(t.my.groups.point),e.setJokerCard(t.start.jokerPoker),e.setOpenCard(t.start.firstPoker),t.my.playRoundNum>=1&&e.setGetCard(!0);let o=e.getHandCardData();o.setHandCards(t.start.myPokers),o.updateCardGroupList()}}setPlayerFromMsg(t,e){t.setSeat(e.index),t.setPlaying(e.canPlay)}BackToLobby(){r.commandCenter.emit(new u.CmdScene(s.SceneType.Lobby))}onNetSitDown(t){let e=t;cc.log("[receive] PushUpTable = "+JSON.stringify(e)),this.setSitDownData(e)}setSitDownData(t){let e=this.gameData.getPlayerList()[t.player.index];if(!e)return void cc.log("error, cannot find player");this.setPlayerFromMsg(e,t.player);let o=new a.NtcSitDown;o.seat=e.getSeat(),r.noticeCenter.emit(o)}onNetStandUp(t){let e=t;cc.log("[receive] PushDownTable = "+JSON.stringify(e)),this.setStandUpData(e)}setStandUpData(t){let e=t.index,o=this.gameData,n=o.getPlayerList()[e];if(!n)return void cc.log("error, cannot find player");n.resetAllData(),e==o.getSelfSeat()&&o.setSelfSeat(-1);let i=new a.NtcStandUp;i.seat=e,r.noticeCenter.emit(i)}cardGroupToMsg(t){let e=[];return t.forEach(t=>{if(t.cards.length>0){let o={};o.pokers=t.cards,o.life=Number(t.groupFlag),e.push(o)}}),e}getCardGroupFromMsg(t){let e=[];return t.forEach(t=>{if(t.pokers.length>0){let o=new l.CardGroupData;o.cards=t.pokers,o.groupFlag=Number(t.life),e.push(o)}}),e}onNetReady(t){let e=t;cc.log("[receive] Ready = "+JSON.stringify(e)),this.gameData.setStageLeftTime(e.timeout/1e3),this.gameData.setGameStage(s.GameStage.Prepare);let o=new a.NtcPrepare;r.noticeCenter.emit(o)}onNetDealCards(t){let e=t;cc.log("[receive] Deal Cards = "+JSON.stringify(e));let o=this.gameData;o.resetGameData(),o.setPointValue(e.baseBet),o.setStageLeftTime(e.timeout/1e3),o.setGameStage(s.GameStage.Deal),o.setOpenCard(e.firstPoker);let n=o.getPlayerList();for(let r of n)r.getSeat()>=0&&r.setPlaying(!0);let i=this.gameData.getHandCardData();i.dealCards(e.myPokers),i.setCardGroup(this.getCardGroupFromMsg(e.myGroups)),i.updateCardGroupList();let c=new a.NtcDealCards;c.jokerCard=e.jokerPoker,r.noticeCenter.emit(c)}onSetJokerPoker(t){this.gameData.setJokerCard(t.jokerCard),this.gameData.getHandCardData().updateCardGroupList(),r.noticeCenter.emit(new a.NtcSetJoker)}onCmdSwitchTable(t){cc.log("[send] SwitchTable = "+JSON.stringify(void 0)),this.m_socket.send("SWITCH_TABLE",void 0)}onAckSwitchTable(t){cc.log("[receive] SwitchTableRsp code = "+t.state.code);let e=t;cc.log("ChangeTableRsp = "+JSON.stringify(e)),this.gameData.resetAllData(),r.noticeCenter.emit(new a.NtcResetGame),this.setGameDataFromMsg(e),r.noticeCenter.emit(new a.NtcGameInfo)}onCmdQuitGame(t){this.m_socket.isConnected(),cc.log("[send] ExitGame = "+JSON.stringify(void 0)),this.m_socket.send("EXIT_GAME",void 0),this.onAckExitGame({})}onAckExitGame(t){let e=t;cc.log("ExitRoomRsp = "+JSON.stringify(e)),this.BackToLobby()}onCmdDisCard(t){this.gameData.getHandCardData().discard(t.card),this.gameData.setChowCard(-1);let e={};e.poker=t.card,e.groups=this.cardGroupToMsg(this.gameData.getHandCardData().getGroupList()),e.point=this.gameData.getHandCardData().getPoint(),cc.log("[send] PlayPoker = "+JSON.stringify(e)),this.m_socket.send("DISCARD",e);let o={};o.poker=t.card,o.index=i.default.gameData.getSelfSeat(),this.onNetDiscard(o)}onNetWaitDiscard(t){let e=t;cc.log("[receive] WaitPlayPoker = "+JSON.stringify(e));let o=this.gameData;o.setActiveSeat(e.index),o.setStageLeftTime(e.timeout/1e3),o.setGameStage(s.GameStage.Discard);let n=new a.NtcWaitDiscard;n.seat=e.index,r.noticeCenter.emit(n)}onAckDiscard(t){let e=t;if(cc.log("PlayPokerRsp = "+JSON.stringify(e)),e.groups&&e.groups.length>0){let t=this.gameData.getHandCardData();t.setCardGroup(this.getCardGroupFromMsg(e.groups)),t.updateCardGroupList()}}onNetDiscard(t){let e=t;cc.log("[receive] PushPlayPoker = "+JSON.stringify(e));let o=this.gameData;o.setOpenCard(e.poker),o.isPreDiscard()||(o.getHandCardData().discard(e.poker),o.setChowCard(-1)),o.setPreDiscard(!1);let n=new a.NtcDiscard;n.seat=e.index,n.card=e.poker,r.noticeCenter.emit(n)}onNetWaitPickPoker(t){let e=t;cc.log("[receive] WaitGetPoker = "+JSON.stringify(e));let o=this.gameData;o.setActiveSeat(e.index),o.setStageLeftTime(e.timeout/1e3),o.setGameStage(s.GameStage.PickCard);let n=new a.NtcWaitPickCard;n.seat=e.index,r.noticeCenter.emit(n)}onCmdDrawCard(t){cc.log("[send] GetPoker = "+JSON.stringify(void 0)),this.m_socket.send("DRAW_CARD",void 0);let e={};e.poker=r.Utils.randRange(0,104),e.index=i.default.gameData.getSelfSeat(),this.onNetDrawPoker(e)}onNetDrawPoker(t){let e=t;cc.log("[receive] PushGetPoker = "+JSON.stringify(e)),e.index==this.gameData.getSelfSeat()&&e.poker>=0&&(this.gameData.getHandCardData().addCard(e.poker),this.gameData.setGetCard(!0)),this.gameData;let o=new a.NtcDrawCard;o.seat=e.index,o.card=e.poker,r.noticeCenter.emit(o)}onCmdChowCard(t){cc.log("[send] GetLastPoker = "+JSON.stringify(void 0)),this.m_socket.send("CHOW_CARD",void 0);let e={};e.poker=i.default.gameData.getOpenCard(),e.index=i.default.gameData.getSelfSeat(),this.onNetChowPoker(e)}onNetChowPoker(t){let e=t;cc.log("[receive] PushGetLastPoker = "+JSON.stringify(e)),e.index==this.gameData.getSelfSeat()&&(this.gameData.getHandCardData().addCard(e.poker),this.gameData.setChowCard(e.poker)),this.gameData.setOpenCard(e.lastPoker);let o=new a.NtcChowCard;o.seat=e.index,o.card=e.poker,r.noticeCenter.emit(o)}onCmdDrop(){cc.log("[send] Native Drop = "+JSON.stringify(void 0)),this.m_socket.send("DROP",void 0)}onNetDrop(t){let e=t;cc.log("[receive] PushAdmitLos = "+JSON.stringify(e));let o=this.gameData.getPlayerBySeat(e.index);if(!o)return void cc.log("error, cannot find player");let n=Number(e.losGold);o.setDropped(!0),o.setPoint(e.losPoint),o.setWinLose(n),this.gameData.setTableChips(this.gameData.getTableChips()+Math.abs(n));var i=new a.NtcDrop;i.seat=e.index,i.point=e.losPoint,i.chips=Math.abs(n),r.noticeCenter.emit(i)}onNetWaitConfirmGroup(t){let e=t;cc.log("[receive] WaitShotPoker = "+JSON.stringify(e));let o=this.gameData;o.setStageLeftTime(e.timeout/1e3),o.setGameStage(s.GameStage.ConfirmGroup);let n=o.getPlayerBySeat(e.winIndex);n&&n.setWinner(!0),this.gameData.setWinSeat(e.winIndex);var i=new a.NtcShow;i.seat=e.winIndex,r.noticeCenter.emit(i)}onCmdConfirmGroup(){this.gameData.getHandCardData().updateCardGroupList(),(void 0).groups=this.cardGroupToMsg(this.gameData.getHandCardData().getGroupList()),(void 0).point=this.gameData.getHandCardData().getPoint(),cc.log("[send] FinishSortPoker = "+JSON.stringify(void 0)),this.m_socket.send("CONFIRM_GROUP",void 0)}onNetPlayerConfirmGroup(t){let e=t.body;cc.log("[receive] PushFinishSortPoker = "+JSON.stringify(e));let o=this.gameData.getPlayerBySeat(e.index);if(!o)return void cc.log("error, cannot find player");let n=Number(e.losGold);o.setConfirmed(!0),o.setPoint(e.losPoint),o.setWinLose(n),this.gameData.setTableChips(this.gameData.getTableChips()+Math.abs(n));var i=new a.NtcConfirmGroup;i.seat=e.index,i.point=e.losPoint,i.chips=Math.abs(n),r.noticeCenter.emit(i)}onNetGameResult(t){let e=t;cc.log("[receive] Stop = "+JSON.stringify(e)),i.default.userData.setBalance(Number(e.myGold)),this.gameData.setStageLeftTime(e.timeout/1e3),this.gameData.setGameStage(s.GameStage.Finish);let o=-1,n=this.gameData.getResultData();n.players=[];for(let r=0;r<e.winLostInfo.length;++r){let t=new h.PlayerData,i=e.winLostInfo[r];t.setCardGroup(this.getCardGroupFromMsg(i.groups)),t.setNickName(i.name),t.setWinner(i.isWin),t.setPoint(i.point),t.setWinLose(Number(i.winLosGold)),n.players.push(t),i.isWin&&(this.gameData.setTableChips(Number(i.winLosGold)),o=i.index)}o>=0&&this.gameData.setWinSeat(o),n.players.sort(function(t,e){return e.getWinLose()-t.getWinLose()}),n.jokerPoint=this.gameData.getJokerPoint(),r.noticeCenter.emit(new a.NtcFinish)}}n([r.onCommand(p)],_.prototype,"onCmdTestStart",null),n([r.onCommand(d)],_.prototype,"onCmdTestToWaitPick",null),n([r.onCommand(f)],_.prototype,"onCmdTestToWaitDiscard",null),n([r.onCommand(g)],_.prototype,"onCmdTestResult",null),n([r.onCommand(m)],_.prototype,"onCmdIntoGame",null),n([r.onMsg("INTO_ROOM")],_.prototype,"onAckIntoGame",null),n([r.onMsg("PLAYER_SIT_DOWN")],_.prototype,"onNetSitDown",null),n([r.onMsg("PLAYER_STAND_UP")],_.prototype,"onNetStandUp",null),n([r.onMsg("READY")],_.prototype,"onNetReady",null),n([r.onMsg("DEAL_CARDS")],_.prototype,"onNetDealCards",null),n([r.onCommand(P)],_.prototype,"onSetJokerPoker",null),n([r.onCommand(y)],_.prototype,"onCmdSwitchTable",null),n([r.onMsg("SWITCH_TABLE")],_.prototype,"onAckSwitchTable",null),n([r.onCommand(C)],_.prototype,"onCmdQuitGame",null),n([r.onMsg("EXIT_GAME")],_.prototype,"onAckExitGame",null),n([r.onCommand(k)],_.prototype,"onCmdDisCard",null),n([r.onMsg("WAIT_FOR_DISCARD")],_.prototype,"onNetWaitDiscard",null),n([r.onMsg("DISCARD")],_.prototype,"onAckDiscard",null),n([r.onMsg("DISCARD")],_.prototype,"onNetDiscard",null),n([r.onMsg("WAIT_FOR_PICK_POKER")],_.prototype,"onNetWaitPickPoker",null),n([r.onCommand(b)],_.prototype,"onCmdDrawCard",null),n([r.onMsg("DRAW_CARD")],_.prototype,"onNetDrawPoker",null),n([r.onCommand(v)],_.prototype,"onCmdChowCard",null),n([r.onMsg("CHOW_CARD")],_.prototype,"onNetChowPoker",null),n([r.onCommand(S)],_.prototype,"onCmdDrop",null),n([r.onMsg("DROP")],_.prototype,"onNetDrop",null),n([r.onMsg("WAIT_FOR_CONFIRM_GROUP")],_.prototype,"onNetWaitConfirmGroup",null),n([r.onCommand(w)],_.prototype,"onCmdConfirmGroup",null),n([r.onMsg("CONFIRM_GROUP")],_.prototype,"onNetPlayerConfirmGroup",null),n([r.onMsg("GAME_RESULT")],_.prototype,"onNetGameResult",null),o.GameController=_,cc._RF.pop()},{"../../Business/Data/CommonDefine":"CommonDefine","../../Business/Data/DataManager":"DataManager","../../MobileKit/MKIndex":"MKIndex","../Data/HandCardsData":"HandCardsData","../Data/PlayerData":"PlayerData","../NetWork/NetworkManager":"NetworkManager","./GameNotice":"GameNotice","./SceneController":"SceneController"}],GameData:[function(t,e,o){"use strict";cc._RF.push(e,"587c8jaYAZM36hqR3idCuRU","GameData"),Object.defineProperty(o,"__esModule",{value:!0}),o.GameData=o.ResultData=void 0;const n=t("./CommonDefine"),r=t("./PlayerData"),i=t("./HandCardsData"),s=t("./PokerData");class a{constructor(){this.jokerPoint=-1,this.players=[]}}o.ResultData=a,o.GameData=class{constructor(){this.m_gameStage=n.GameStage.Prepare,this.m_players=new Array(n.MAX_PLAYERS),this.m_posTrans=0,this.m_selfSeat=-1,this.m_pointValue=0,this.m_activeSeat=-1,this.m_stageLeftTime=0,this.m_jokerCard=-1,this.m_openCard=-1,this.m_isGetCard=!1,this.m_handCardData=null,this.m_point=0,this.m_chowCard=-1,this.m_isPreDiscard=!1,this.m_tableChips=0,this.m_winSeat=-1,this.m_resultData=new a,this.m_deckNum=0,this.m_maxWin=0,this.m_handCardData=new i.HandCardsData;for(var t=0;t<n.MAX_PLAYERS;++t)this.m_players[t]=new r.PlayerData}resetGameData(){this.m_gameStage=n.GameStage.Prepare,this.m_activeSeat=-1,this.m_stageLeftTime=0,this.m_jokerCard=-1,this.m_openCard=-1,this.m_isGetCard=!1,this.m_point=0,this.m_isPreDiscard=!1,this.m_tableChips=0,this.m_winSeat=-1,this.m_handCardData.resetGameData();for(var t=0;t<n.MAX_PLAYERS;++t){var e=this.m_players[t];e&&e.resetGameData()}}resetAllData(){this.resetGameData(),this.m_pointValue=0,this.m_selfSeat=-1,this.m_posTrans=0;for(var t=0;t<n.MAX_PLAYERS;++t){var e=this.m_players[t];e&&e.resetAllData()}this.m_deckNum=0,this.m_maxWin=0}getGameStage(){return this.m_gameStage}setGameStage(t){this.m_gameStage=t}setSelfSeat(t){this.m_selfSeat=t,t>=0&&(this.m_posTrans=(2-this.m_selfSeat+n.MAX_PLAYERS)%n.MAX_PLAYERS)}getSelfSeat(){return this.m_selfSeat}getSelfPlayer(){return this.m_selfSeat>=0?this.getPlayerBySeat(this.m_selfSeat):null}getPlayerList(){return this.m_players}getPlayerCount(){for(var t=0,e=0;e<this.m_players.length;++e)this.m_players[e].getSeat()>=0&&t++;return t}getPlayerBySeat(t){if(t<0)return null;let e=null;for(var o=0;o<this.m_players.length;++o){var n=this.m_players[o];if(n.getSeat()==t){e=n;break}}return e}getPosBySeat(t){return(t+this.m_posTrans)%n.MAX_PLAYERS}getSeatByPos(t){return(t-this.m_posTrans+n.MAX_PLAYERS)%n.MAX_PLAYERS}getPointValue(){return this.m_pointValue}setPointValue(t){this.m_pointValue=t}getActiveSeat(){return this.m_activeSeat}setActiveSeat(t){this.m_activeSeat=t}getStageLeftTime(){return this.m_stageLeftTime}setStageLeftTime(t){this.m_stageLeftTime=t}getJokerCard(){return this.m_jokerCard}getJokerPoint(){let t=s.PokerData.getPokerPoint(this.m_jokerCard);return s.PokerData.isJoker(this.m_jokerCard)&&(t=s.PokerPoint.PointA),t}setJokerCard(t){this.m_jokerCard=t,this.m_handCardData.setJokerPoint(this.getJokerPoint())}getOpenCard(){return this.m_openCard}setOpenCard(t){this.m_openCard=t}isWildJoker(t){return!(t<0)&&s.PokerData.getPokerPoint(t)==this.getJokerPoint()}getHandCardData(){return this.m_handCardData}getPoint(){return this.m_point}setPoint(t){this.m_point=t}setGetCard(t){this.m_isGetCard=t}isGetCard(){return this.m_isGetCard}getChowCard(){return this.m_chowCard}setChowCard(t){this.m_chowCard=t}setPreDiscard(t){this.m_isPreDiscard=t}isPreDiscard(){return this.m_isPreDiscard}setTableChips(t){this.m_tableChips=t}getTableChips(){return this.m_tableChips}getDropChips(){if(this.m_gameStage==n.GameStage.ConfirmGroup){let t=this.m_handCardData.getPoint();return 0==t&&(t=2),this.m_pointValue*t}return this.m_isGetCard?this.m_pointValue*n.MAX_POINT/2:this.m_pointValue*n.MAX_POINT/4}getWinSeat(){return this.m_winSeat}setWinSeat(t){this.m_winSeat=t}getResultData(){return this.m_resultData}setDeckNum(t){this.m_deckNum=t}getDeckNum(){return this.m_deckNum}setMaxWin(t){this.m_maxWin=t}getMaxWin(){return this.m_maxWin}isInGame(){let t=!0;if(this.getGameStage()==n.GameStage.Prepare||this.getGameStage()==n.GameStage.Finish)t=!1;else if(this.getSelfSeat()<0)t=!1;else{let e=this.getSelfPlayer();e.isPlaying()?e.isDropped()?t=!1:e.isWinner()?t=!1:e.isConfirmed()&&(t=!1):t=!1}return t}},cc._RF.pop()},{"./CommonDefine":"CommonDefine","./HandCardsData":"HandCardsData","./PlayerData":"PlayerData","./PokerData":"PokerData"}],GameEntryCell:[function(t,e,o){"use strict";cc._RF.push(e,"5b909jhCMVA1KYQM3pMKkzO","GameEntryCell");var n=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0}),o.GameEntryCell=void 0;const r=t("../../MobileKit/MKIndex"),i=t("../../Business/Data/DataManager"),s=t("../../Business/Logic/SceneController"),a=t("../Common/UIUtils"),c=t("../../Business/Data/CommonDefine"),{ccclass:l,property:h,menu:u}=cc._decorator;let p=class extends cc.Component{constructor(){super(...arguments),this.txtPointValue=null,this.imgBg=null,this.pointValueIdx=0}onLoad(){a.UIUtils.NodeClickEvent(this.node,this.onTouchEnterGame.bind(this))}setData(t){this.pointValueIdx=t;let e=i.default.homeData.getPointValueList();this.txtPointValue.string=e[t].toString(),t=t>4?4:t,this.imgBg.spriteFrame=cc.resources.get(c.SpriteList.GameEntey+t,cc.SpriteFrame)}onTouchEnterGame(){i.default.homeData.setGameId(this.pointValueIdx.toString()),r.commandCenter.emit(new s.CmdScene(c.SceneType.Game))}};n([h(cc.Label)],p.prototype,"txtPointValue",void 0),n([h(cc.Sprite)],p.prototype,"imgBg",void 0),p=n([l,u("Lobby/GameEntryCell")],p),o.GameEntryCell=p,cc._RF.pop()},{"../../Business/Data/CommonDefine":"CommonDefine","../../Business/Data/DataManager":"DataManager","../../Business/Logic/SceneController":"SceneController","../../MobileKit/MKIndex":"MKIndex","../Common/UIUtils":"UIUtils"}],GameNotice:[function(t,e,o){"use strict";cc._RF.push(e,"31af3V/1NxB4o3CuR3dhUJ9","GameNotice");var n=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0}),o.NtcFinish=o.NtcConfirmGroup=o.NtcShow=o.NtcDrop=o.NtcChowCard=o.NtcDrawCard=o.NtcWaitPickCard=o.NtcPrepare=o.NtcStandUp=o.NtcSitDown=o.NtcResetGame=o.NtcGameInfo=o.NtcDiscard=o.NtcWaitDiscard=o.NtcSetJoker=o.NtcDealCards=o.NtcDisConnect=void 0;const r=t("../../MobileKit/MKIndex");let i=class{};i=n([r.createNotice],i),o.NtcDisConnect=i;let s=class{constructor(){this.jokerCard=-1}};s=n([r.createNotice],s),o.NtcDealCards=s;let a=class{};a=n([r.createNotice],a),o.NtcSetJoker=a;let c=class{constructor(){this.seat=-1}};c=n([r.createNotice],c),o.NtcWaitDiscard=c;let l=class{constructor(){this.seat=-1,this.card=-1}};l=n([r.createNotice],l),o.NtcDiscard=l;let h=class{};h=n([r.createNotice],h),o.NtcGameInfo=h;let u=class{};u=n([r.createNotice],u),o.NtcResetGame=u;let p=class{constructor(){this.seat=-1}};p=n([r.createNotice],p),o.NtcSitDown=p;let d=class{constructor(){this.seat=-1}};d=n([r.createNotice],d),o.NtcStandUp=d;let f=class{};f=n([r.createNotice],f),o.NtcPrepare=f;let g=class{constructor(){this.seat=-1}};g=n([r.createNotice],g),o.NtcWaitPickCard=g;let m=class{constructor(){this.seat=-1,this.card=-1}};m=n([r.createNotice],m),o.NtcDrawCard=m;let y=class{constructor(){this.seat=-1,this.card=-1}};y=n([r.createNotice],y),o.NtcChowCard=y;let C=class{constructor(){this.seat=-1,this.point=0,this.chips=0}};C=n([r.createNotice],C),o.NtcDrop=C;let b=class{constructor(){this.seat=-1}};b=n([r.createNotice],b),o.NtcShow=b;let v=class{constructor(){this.seat=-1,this.point=0,this.chips=0}};v=n([r.createNotice],v),o.NtcConfirmGroup=v;let k=class{};k=n([r.createNotice],k),o.NtcFinish=k,cc._RF.pop()},{"../../MobileKit/MKIndex":"MKIndex"}],GameRecordLayer:[function(t,e,o){"use strict";cc._RF.push(e,"4b45aHvWhBEwoYHbbdBHw2o","GameRecordLayer");var n=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});const r=t("../../MobileKit/MKIndex"),i=t("../../Business/Data/DataManager"),s=t("../Common/PopupBase"),a=t("../Common/PrefabPool"),c=t("../../Business/Data/CommonDefine"),l=t("./RecordPage"),h=t("./FilterCell"),{ccclass:u,property:p,menu:d}=cc._decorator;let f=class extends s.default{constructor(){super(...arguments),this.txtPage=null,this.noDataTips=null,this.pageView=null,this.btnSwitchRight=null,this.btnSwitchLeft=null,this.filterLayerNode=null,this.btnShowFilter=null,this.txtNowShow=null,this.filterExpendLayer=null,this.filterCell=null,this.selectPointValue=-1,this.filterCellList=[]}static get path(){return"Scenes/Game/game_record_layer"}onLoad(){this.main||(this.main=this.node),this.btnShowFilter.node.on("click",this.onTouchShowFilter,this),this.btnSwitchRight.node.on("click",this.onTouchRight,this),this.btnSwitchLeft.node.on("click",this.onTouchLeft,this),this.pageView.node.on("page-turning",this.onPageTurning,this),this.initUI(),this.clearPage(),this.resetBtnState()}initUI(){this.filterCell.removeFromParent(!1),i.default.homeData.getPointValueList().forEach((t,e)=>{let o=cc.instantiate(this.filterCell);o.setParent(this.filterExpendLayer),o.getComponent(h.FilterCell).setData(e,this.showRecord.bind(this)),this.filterCellList.push(o)}),this.resizeFilterLayer(),this.filterLayerNode.active=!1}updateDisplay(){this.showRecord(0)}onAfterHide(){this.clearPage()}showRecord(t){if(t==this.selectPointValue)return;this.clearPage(),this.filterCellList.forEach((e,o)=>{e.active=o!=t}),this.selectPointValue=t;let e=i.default.homeData.getPointValueList();this.txtNowShow.string=e[t].toString();let o=i.default.userData.getGameRecordLst();if(0==o.length)return this.noDataTips.active=!0,this.btnSwitchLeft.interactable=!1,void(this.btnSwitchRight.interactable=!1);this.noDataTips.active=!1,o.length,o.sort((t,e)=>e.time-t.time);let n=o.filter(e=>e.pv==t),r=n.length/10,s=n.length%10==0?r:Math.floor(r)+1;for(let i=0;i<s;i++){let t=a.default.get(c.PrefabList.RecordPage),e=t.getComponent(l.RecordPage);this.pageView.addPage(t);let o=10*i,r=i==s-1?n.length:o+10,h=[];for(let i=o;i<r;i++)h.push(n[i]);e.setRecordList(h)}this.resetBtnState()}clearPage(){this.pageView.removeAllPages()}onTouchClose(){this.hide()}onTouchRight(){let t=this.pageView.getCurrentPageIndex()+1;t<this.pageView.getPages().length&&this.pageView.setCurrentPageIndex(t)}onTouchLeft(){let t=this.pageView.getCurrentPageIndex()-1;t<0||this.pageView.setCurrentPageIndex(t)}onTouchShowFilter(){this.filterLayerNode.active=!this.filterLayerNode.active,this.filterLayerNode.active&&r.AudioEngine.playEffect(c.SoundList.Click)}onPageTurning(t){this.resetBtnState()}resetBtnState(){let t=this.pageView.getCurrentPageIndex();this.txtPage.string=(t+1).toString();let e=this.pageView.getPages().length;0==t?(this.btnSwitchLeft.interactable=!1,this.btnSwitchRight.interactable=e>1):t+1==e?(this.btnSwitchLeft.interactable=!0,this.btnSwitchRight.interactable=!1):(this.btnSwitchLeft.interactable=!0,this.btnSwitchRight.interactable=!0)}resizeFilterLayer(){let t=i.default.homeData.getPointValueList();this.filterExpendLayer.height=27+(this.filterCell.height+6)*(t.length-1)}};n([p(cc.Label)],f.prototype,"txtPage",void 0),n([p(cc.Node)],f.prototype,"noDataTips",void 0),n([p(cc.PageView)],f.prototype,"pageView",void 0),n([p(cc.Button)],f.prototype,"btnSwitchRight",void 0),n([p(cc.Button)],f.prototype,"btnSwitchLeft",void 0),n([p(cc.Node)],f.prototype,"filterLayerNode",void 0),n([p(cc.Button)],f.prototype,"btnShowFilter",void 0),n([p(cc.Label)],f.prototype,"txtNowShow",void 0),n([p(cc.Node)],f.prototype,"filterExpendLayer",void 0),n([p(cc.Node)],f.prototype,"filterCell",void 0),f=n([u,d("Lobby/GameRecordLayer")],f),o.default=f,cc._RF.pop()},{"../../Business/Data/CommonDefine":"CommonDefine","../../Business/Data/DataManager":"DataManager","../../MobileKit/MKIndex":"MKIndex","../Common/PopupBase":"PopupBase","../Common/PrefabPool":"PrefabPool","./FilterCell":"FilterCell","./RecordPage":"RecordPage"}],GameScene:[function(t,e,o){"use strict";cc._RF.push(e,"a7d62FcWh5K2YaaMxNMEQCG","GameScene");var n=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});const r=t("../MobileKit/MKIndex"),i=t("../Business/Data/DataManager"),s=t("../Business/Data/CommonDefine"),a=t("../Business/Logic/GameNotice"),c=t("./Common/UIUtils"),l=t("./Common/PopupManager"),h=t("../Business/Logic/GameController"),u=t("./Common/PrefabPool"),p=t("./PlayerNode"),d=t("./PokerNode"),f=t("./GameAction"),g=t("./Common/MessageView"),m=t("../Business/Data/SaveDataManager"),y=t("./Common/ConfirmDialog"),{ccclass:C,property:b,menu:v}=cc._decorator;let k=class extends cc.Component{constructor(){super(...arguments),this.nowLanguage=s.LangList.en,this.txtBalance=null,this.txtScore=null,this.imgBottomTips=null,this.imgMsg=null,this.txtMsg=null,this.txtTableChips=null,this.bgTableChips=null,this.btnMenu=null,this.btnInfor=null,this.imgMusic=null,this.imgSound=null,this.imgMusicOn=null,this.imgMusicOff=null,this.imgSoundOn=null,this.imgSoundOff=null,this.menuLayer=null,this.btnSwitch=null,this.btnExit=null,this.btnHowToPlay=null,this.playerPosNode=null,this.tableCardLeft=null,this.tableCardLeftPosNode=null,this.tableCardRight=null,this.dealCardNode=null,this.playerList=[],this.leftTimeTag=11,this.firstInGame=!0,this.openCard=null,this.jokerCard=null,this.tableCardLeftPos=null,this.dealCardPos=null,this.musicOn=!1,this.soundOn=!1}get language(){return this.nowLanguage}set language(t){this.nowLanguage=t,r.LocalLang.setLanguage(s.LangList[t])}onLoad(){r.noticeCenter.registAllNotice(this),r.Utils.resize(),this.gameData=i.default.gameData,this.gameAction=this.node.getComponent(f.default),this.initUI(),this.updateBalance(),this.clearGame(),cc.view.setResizeCallback(()=>{r.Utils.resize()}),r.AudioEngine.playMusic(s.SoundList.Bgm,!0),r.AudioEngine.setMusicVolume(.4),cc.tween(this.node).call(()=>{r.commandCenter.emit(new h.CmdIntoGame(i.default.homeData.getGameId()))}).delay(.5).call(()=>{r.commandCenter.emit(new h.CmdTestStart)}).start()}initUI(){cc.macro.ENABLE_MULTI_TOUCH=!1,c.UIUtils.ButtonEvent(this.btnMenu,this.onTouchMenu.bind(this)),c.UIUtils.ButtonEvent(this.btnInfor,this.onTouchInfor.bind(this)),c.UIUtils.ButtonEvent(this.btnSwitch,this.onTouchSwitch.bind(this)),c.UIUtils.ButtonEvent(this.btnExit,this.onTouchExit.bind(this)),c.UIUtils.ButtonEvent(this.btnHowToPlay,this.onTouchHowToPlay.bind(this)),c.UIUtils.NodeClickEvent(this.imgMusic.node,this.onTouchMusic.bind(this)),c.UIUtils.NodeClickEvent(this.imgSound.node,this.onTouchSound.bind(this)),this.menuLayer.active=!1,this.musicOn=m.default.getMusicEnable(),this.soundOn=m.default.getEffectEnable(),this.imgMusic.spriteFrame=this.musicOn?this.imgMusicOn:this.imgMusicOff,this.imgSound.spriteFrame=this.soundOn?this.imgSoundOn:this.imgSoundOff,this.playerPosNode.children.forEach(t=>{let e=u.default.get(s.PrefabList.PlayerNode);e.setPosition(0,0),e.setParent(t);let o=e.getComponent(p.default);this.playerList.push(o),o.setTablePos(this.tableCardLeft,this.tableCardRight,this.bgTableChips)});let t=u.default.get(s.PrefabList.PokerNode);t.setParent(this.tableCardRight),t.setPosition(0,0),this.openCard=t.getComponent(d.default);let e=u.default.get(s.PrefabList.PokerNode);e.setParent(this.tableCardLeftPosNode),e.setPosition(0,0),this.jokerCard=e.getComponent(d.default),this.tableCardLeftPos=cc.v3(this.tableCardLeft.x,this.tableCardLeft.y,0),this.dealCardPos=cc.v3(this.dealCardNode.x,this.dealCardNode.y,0)}clearGame(){this.bgTableChips.active=!1,this.hideMsg(),this.jokerCard.node.active=!1,this.openCard.node.active=!1,this.tableCardLeft.position=this.tableCardLeftPos}stopDealCardsAction(){this.tableCardLeft.stopAllActions(),this.tableCardLeft.zIndex=0,this.jokerCard.node.stopAllActions(),this.jokerCard.node.angle=0,this.jokerCard.node.zIndex=0,this.openCard.node.stopAllActions(),this.openCard.node.zIndex=0}onTouchMenu(){this.menuLayer.active=!this.menuLayer.active}onTouchInfor(){l.default.show(s.PrefabList.InforLayer),this.menuLayer.active=!1}onTouchMusic(){this.musicOn=!this.musicOn,this.imgMusic.spriteFrame=this.musicOn?this.imgMusicOn:this.imgMusicOff,m.default.setMusicEnable(this.musicOn),r.AudioEngine.setMusicEnabled(this.musicOn)}onTouchSound(){this.soundOn=!this.soundOn,this.imgSound.spriteFrame=this.soundOn?this.imgSoundOn:this.imgSoundOff,m.default.setEffectEnable(this.soundOn),r.AudioEngine.setEffectsEnabled(this.soundOn),r.AudioEngine.playEffect(s.SoundList.Click)}onTouchSwitch(){r.commandCenter.emit(new h.CmdSwitchTable),this.menuLayer.active=!1}onTouchExit(){if(this.gameData.isInGame()){let t="\u20b9"+c.UIUtils.getShortNumber(i.default.gameData.getDropChips());y.default.show(r.LocalLang.get("game_quit_tips",[t]),t=>{t&&r.commandCenter.emit(new h.CmdQuitGame)})}else r.commandCenter.emit(new h.CmdQuitGame);this.menuLayer.active=!1}onTouchHowToPlay(){l.default.show(s.PrefabList.HelpLayer),this.menuLayer.active=!1}updateBalance(){this.txtBalance.string=c.UIUtils.getShortNumber(i.default.userData.getBalance(),!0)}updateOpenCard(t){this.openCard.node.active=!0,this.openCard.setPoker(t),c.UIUtils.setJokerFlag(this.openCard)}updateJokerCard(t){this.jokerCard.node.active=!0,this.jokerCard.node.position=this.tableCardLeftPos,this.jokerCard.setPoker(t),c.UIUtils.setJokerFlag(this.jokerCard),this.jokerCard.node.zIndex=0,this.tableCardLeft.position=this.tableCardLeftPos,this.tableCardLeft.zIndex=1}updatePlayers(){let t=this.gameData.getPlayerList();for(let e=0;e<t.length;++e){let o=t[e],n=this.gameData.getPosBySeat(e),r=this.playerList[n];r&&(o.getSeat()>=0?r.sitDown(o):r.standUp())}}updateTableChips(){let t=this.gameData.getTableChips();t>0?(this.bgTableChips.active=!0,this.txtTableChips.string=c.UIUtils.getShortNumber(t)):this.bgTableChips.active=!1}showMsg(t,e=2){this.imgMsg.node.opacity=255,this.txtMsg.string=t,this.imgMsg.node.stopAllActions(),cc.tween(this.imgMsg.node).delay(e).to(0,{opacity:0}).start()}hideMsg(){this.node.stopActionByTag(this.leftTimeTag),this.imgMsg.node.stopAllActions(),this.imgMsg.node.opacity=0}showBottomTips(t,e=2){this.imgBottomTips.node.opacity=255,this.imgBottomTips.node.stopAllActions(),this.imgBottomTips.spriteFrame=0==t?cc.resources.get(s.SpriteList.TipsDiscard,cc.SpriteFrame):cc.resources.get(s.SpriteList.TipsPick,cc.SpriteFrame),cc.tween(this.imgBottomTips.node).delay(e).to(0,{opacity:0}).start()}hideBottomTips(){this.imgBottomTips.node.stopAllActions(),this.imgBottomTips.node.opacity=0}showResult(t){cc.tween(this.node).delay(t).call(()=>{l.default.hide(),l.default.show(s.PrefabList.ResultLayer)}).start()}showStartingMsg(t){let e=Math.floor(t)-1;if(e<=0)return void this.showMsg(r.LocalLang.get("game_starting_game"));let o=cc.tween(this.node);o.tag(this.leftTimeTag);for(let n=e;0<n;n--)o.call(()=>{this.showMsg(r.LocalLang.get("game_starting_in_sec",[n]))}),o.delay(1);o.call(()=>{this.showMsg(r.LocalLang.get("game_starting_game"))}),cc.Tween.stopAllByTag(this.leftTimeTag),o.start()}dealTableCards(t){let e=cc.tween(this.tableCardLeft).to(.5,{x:this.tableCardLeftPos.x,y:this.tableCardLeftPos.y},{easing:"smooth"}),o=cc.tween(this.openCard.node).parallel(cc.tween().to(.5,{x:0,y:0},{easing:"smooth"}),cc.tween().call(()=>{r.AudioEngine.playEffect(s.SoundList.CardFlip1),c.UIUtils.flipToFront(this.openCard.node,.5,()=>{this.openCard.setPoker(i.default.gameData.getOpenCard())})}));this.jokerCard.setPoker(-1);let n=this.jokerCard.node.parent.convertToNodeSpaceAR(this.tableCardLeftPosNode.parent.convertToWorldSpaceAR(this.tableCardLeftPosNode.position));this.jokerCard.node.position=n,this.showMsg(r.LocalLang.get("game_dealing_wildjoker"),3);let a=cc.tween(this.jokerCard.node).by(.5,{x:-this.jokerCard.node.width-40},{easing:"smooth"}).call(()=>{r.AudioEngine.playEffect(s.SoundList.CardFlip2),c.UIUtils.flipToFront(this.jokerCard.node,.5,()=>{let e=new h.CmdSetJoker;e.jokerCard=t,r.commandCenter.emit(e),this.jokerCard.setPoker(i.default.gameData.getJokerCard()),c.UIUtils.setJokerFlag(this.jokerCard),c.UIUtils.setJokerFlag(this.openCard)})}).delay(.5).parallel(cc.tween().by(.5,{x:this.jokerCard.node.width-40},{easing:"smooth"}),cc.tween().to(.5,{angle:10},{easing:"smooth"})).delay(.5).call(()=>{this.hideMsg()});cc.tween(this.node).call(()=>{o.start()}).delay(.5).call(()=>{e.start()}).delay(.5).call(()=>{this.jokerCard.node.active=!0,a.start()}).delay(2).call(()=>{r.commandCenter.emit(new h.CmdTestToWaitPick)}).start()}onNtcGameInfo(){this.updatePlayers();let t=this.gameData.getGameStage();if(t!=s.GameStage.Prepare&&t!=s.GameStage.Waiting){this.updateOpenCard(this.gameData.getOpenCard()),this.updateJokerCard(this.gameData.getJokerCard());let t=this.gameData.getActiveSeat(),e=this.gameData.getPosBySeat(t),o=this.playerList[e];o&&o.startProgress(),this.updateTableChips()}t!=s.GameStage.Finish&&t!=s.GameStage.Prepare||this.showStartingMsg(this.gameData.getStageLeftTime()),t==s.GameStage.Waiting&&this.showMsg(r.LocalLang.get("game_waiting_players"),999),this.firstInGame&&t==s.GameStage.Prepare&&(l.default.show(s.PrefabList.InforLayer,!0),this.firstInGame=!1)}onNtcResetGame(){for(var t=0;t<this.playerList.length;++t)this.playerList[t].standUp();this.clearGame()}onNtcSitDown(t){let e=this.gameData.getPosBySeat(t.seat),o=this.playerList[e];o&&o.sitDown(this.gameData.getPlayerBySeat(t.seat))}onNtcStandUp(t){let e=this.gameData.getPosBySeat(t.seat),o=this.playerList[e];o&&o.standUp()}onNtcPrepare(){this.showStartingMsg(this.gameData.getStageLeftTime())}onNtcDealCards(t){this.stopDealCardsAction(),this.node.stopActionByTag(this.leftTimeTag),this.tableCardLeft.position=this.dealCardPos,this.openCard.setPoker(-1),this.openCard.node.active=!0;let e=this.openCard.node.parent.convertToNodeSpaceAR(this.dealCardNode.parent.convertToWorldSpaceAR(this.dealCardNode.position));this.openCard.node.position=e,this.showMsg(r.LocalLang.get("game_dealing_cards")),this.gameAction.dealCards(()=>{this.dealTableCards(t.jokerCard)}),r.AudioEngine.playEffect(s.SoundList.Dealcard2)}onNtcWaitDiscard(t){t.seat==this.gameData.getSelfSeat()?this.showBottomTips(0,this.gameData.getStageLeftTime()):this.hideMsg()}onNtcDiscard(t){if(t.seat==this.gameData.getSelfSeat())this.gameAction.discard(t.card,()=>{this.updateOpenCard(t.card)});else{let e=this.gameData.getPosBySeat(t.seat),o=this.playerList[e];if(!o)return;o.discard(t.card,()=>{this.updateOpenCard(t.card)})}r.commandCenter.emit(new h.CmdTestToWaitPick)}onNtcWaitPickCard(t){t.seat==this.gameData.getSelfSeat()?this.showBottomTips(1,this.gameData.getStageLeftTime()):this.hideMsg()}onNtcDrawCard(t){if(t.seat==this.gameData.getSelfSeat())this.gameAction.drawCard(t.card);else{let e=this.gameData.getPosBySeat(t.seat),o=this.playerList[e];if(!o)return;o.drawCard()}r.commandCenter.emit(new h.CmdTestToWaitDiscard)}onNtcChowCard(t){if(this.gameData.getOpenCard()>=0?this.updateOpenCard(this.gameData.getOpenCard()):this.openCard.node.active=!1,t.seat==this.gameData.getSelfSeat())this.gameAction.chowCard(t.card);else{let e=this.gameData.getPosBySeat(t.seat),o=this.playerList[e];if(!o)return;o.chowCard(t.card)}r.commandCenter.emit(new h.CmdTestToWaitDiscard)}onNtcDrop(t){let e=this.gameData.getPosBySeat(t.seat);this.playerList[e]}onNtcShow(t){this.hideMsg();let e=this.gameData.getPlayerBySeat(t.seat);null!=e&&t.seat!=this.gameData.getSelfSeat()&&g.default.show(r.LocalLang.get("game_show_winner",[e.getNickName()]))}onNtcConfirmGroup(t){let e=this.gameData.getPosBySeat(t.seat);this.playerList[e]}onNtcFinish(t){this.showStartingMsg(this.gameData.getStageLeftTime());let e=this.gameData.getPosBySeat(this.gameData.getWinSeat());this.playerList[e]?(this.bgTableChips.active=!1,this.showResult(1)):this.showResult(0)}};n([b({visible:!1})],k.prototype,"nowLanguage",void 0),n([b({type:cc.Enum(s.LangList),displayName:"\u8bed\u8a00"})],k.prototype,"language",null),n([b(cc.Label)],k.prototype,"txtBalance",void 0),n([b(cc.Label)],k.prototype,"txtScore",void 0),n([b({type:cc.Sprite,displayName:""})],k.prototype,"imgBottomTips",void 0),n([b({type:cc.Sprite,displayName:""})],k.prototype,"imgMsg",void 0),n([b({type:cc.Label,displayName:""})],k.prototype,"txtMsg",void 0),n([b({type:cc.Label,displayName:""})],k.prototype,"txtTableChips",void 0),n([b({type:cc.Node,displayName:""})],k.prototype,"bgTableChips",void 0),n([b(cc.Button)],k.prototype,"btnMenu",void 0),n([b(cc.Button)],k.prototype,"btnInfor",void 0),n([b(cc.Sprite)],k.prototype,"imgMusic",void 0),n([b(cc.Sprite)],k.prototype,"imgSound",void 0),n([b(cc.SpriteFrame)],k.prototype,"imgMusicOn",void 0),n([b(cc.SpriteFrame)],k.prototype,"imgMusicOff",void 0),n([b(cc.SpriteFrame)],k.prototype,"imgSoundOn",void 0),n([b(cc.SpriteFrame)],k.prototype,"imgSoundOff",void 0),n([b(cc.Node)],k.prototype,"menuLayer",void 0),n([b(cc.Button)],k.prototype,"btnSwitch",void 0),n([b(cc.Button)],k.prototype,"btnExit",void 0),n([b(cc.Button)],k.prototype,"btnHowToPlay",void 0),n([b(cc.Node)],k.prototype,"playerPosNode",void 0),n([b({type:cc.Node,displayName:""})],k.prototype,"tableCardLeft",void 0),n([b({type:cc.Node,displayName:""})],k.prototype,"tableCardLeftPosNode",void 0),n([b({type:cc.Node,displayName:""})],k.prototype,"tableCardRight",void 0),n([b({type:cc.Node,displayName:""})],k.prototype,"dealCardNode",void 0),n([r.onNotice(a.NtcGameInfo)],k.prototype,"onNtcGameInfo",null),n([r.onNotice(a.NtcResetGame)],k.prototype,"onNtcResetGame",null),n([r.onNotice(a.NtcSitDown)],k.prototype,"onNtcSitDown",null),n([r.onNotice(a.NtcStandUp)],k.prototype,"onNtcStandUp",null),n([r.onNotice(a.NtcPrepare)],k.prototype,"onNtcPrepare",null),n([r.onNotice(a.NtcDealCards)],k.prototype,"onNtcDealCards",null),n([r.onNotice(a.NtcWaitDiscard)],k.prototype,"onNtcWaitDiscard",null),n([r.onNotice(a.NtcDiscard)],k.prototype,"onNtcDiscard",null),n([r.onNotice(a.NtcWaitPickCard)],k.prototype,"onNtcWaitPickCard",null),n([r.onNotice(a.NtcDrawCard)],k.prototype,"onNtcDrawCard",null),n([r.onNotice(a.NtcChowCard)],k.prototype,"onNtcChowCard",null),n([r.onNotice(a.NtcDrop)],k.prototype,"onNtcDrop",null),n([r.onNotice(a.NtcShow)],k.prototype,"onNtcShow",null),n([r.onNotice(a.NtcConfirmGroup)],k.prototype,"onNtcConfirmGroup",null),n([r.onNotice(a.NtcFinish)],k.prototype,"onNtcFinish",null),k=n([C],k),o.default=k,cc._RF.pop()},{"../Business/Data/CommonDefine":"CommonDefine","../Business/Data/DataManager":"DataManager","../Business/Data/SaveDataManager":"SaveDataManager","../Business/Logic/GameController":"GameController","../Business/Logic/GameNotice":"GameNotice","../MobileKit/MKIndex":"MKIndex","./Common/ConfirmDialog":"ConfirmDialog","./Common/MessageView":"MessageView","./Common/PopupManager":"PopupManager","./Common/PrefabPool":"PrefabPool","./Common/UIUtils":"UIUtils","./GameAction":"GameAction","./PlayerNode":"PlayerNode","./PokerNode":"PokerNode"}],GameSocket:[function(t,e,o){"use strict";cc._RF.push(e,"6fc34cSKCtFQIY3btRfWLAm","GameSocket"),Object.defineProperty(o,"__esModule",{value:!0});const n=t("../../MobileKit/MKIndex");o.default=class extends n.Socket{constructor(){super()}connect(t){if(this.disconnect(),cc.sys.isNative){let e=cc.url.raw("resources/raw/android.cer");cc.log("Websocket : penUrl = ",e),cc.loader.md5Pipe?(e=cc.loader.md5Pipe.transformURL(e),cc.log("Websocket : md5Pipe = ",e),this.m_socket=new WebSocket(t,null,e)):(cc.log("Websocket : cc.loader.md5Pipe:",cc.loader.md5Pipe),this.m_socket=new WebSocket(t,null,e))}else this.m_socket=new WebSocket(t);this.m_socket.binaryType="arraybuffer",this.m_socket.onopen=this.onConnect.bind(this),this.m_socket.onmessage=this.onSocketDataReceived.bind(this),this.m_socket.onerror=this.onError.bind(this),this.m_socket.onclose=this.onClose.bind(this)}disconnect(){super.disconnect(),null!==this.m_socket&&(this.m_socket.onopen=null,this.m_socket.onmessage=null,this.m_socket.onerror=null,this.m_socket.onclose=null,this.m_socket.close(),this.m_socket=null)}send(t,e){this.isConnected()&&this.m_socket.send(this.encodeMsgID(t,e))}encodeMsgID(t,e){}decodeMsgID(t){}onSocketDataReceived(t){var e=t.data,o=this.decodeMsgID(e);this.onMessage(o)}},cc._RF.pop()},{"../../MobileKit/MKIndex":"MKIndex"}],GradientColor:[function(t,e,o){"use strict";cc._RF.push(e,"926bagTp+JG/5Bxdn0uOLz4","GradientColor");var n=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});const{ccclass:r,property:i,requireComponent:s,disallowMultiple:a,executeInEditMode:c,help:l,menu:h}=cc._decorator;let u=class extends cc.Component{constructor(){super(...arguments),this._colors=[cc.Color.RED,cc.Color.BLUE,cc.Color.RED,cc.Color.BLUE]}get colors(){return this._colors}set colors(t){t.length>4&&(t.length=4),this._colors=t,this.markForRender()}onEnable(){this.replaceFunction()}onDisable(){this.restoreFunction()}resetInEditor(){this.markForRender()}replaceFunction(){const t=this.getComponent(cc.RenderComponent);if(!t)return;const e=t._assembler;e instanceof cc.Assembler2D&&(e.updateColor=()=>{const t=e._renderData.uintVDatas[0];if(!t)return;const o=e.floatsPerVert,n=e.colorOffset,r=this.node.color;let i=0;for(let e=n,s=t.length;e<s;e+=o)t[e]=(this.colors[i++]||r)._val},this.markForRender())}restoreFunction(){const t=this.getComponent(cc.RenderComponent);if(!t)return;const e=t._assembler;e instanceof cc.Assembler2D&&(e.updateColor=cc.Assembler2D.prototype.updateColor,this.markForRender())}markForRender(){this.node._renderFlag|=cc.RenderFlow.FLAG_COLOR}};n([i()],u.prototype,"_colors",void 0),n([i({type:[cc.Color],tooltip:!1})],u.prototype,"colors",null),u=n([r,s(cc.RenderComponent),a,c,l("https://gitee.com/ifaswind/eazax-ccc/blob/master/components/renderers/GradientColor.ts"),h("\u7ec4\u4ef6\u5e93/GradientColor")],u),o.default=u,cc._RF.pop()},{}],HandCardsData:[function(t,e,o){"use strict";cc._RF.push(e,"8bbb8wyyidJpaBr4siF6KSX","HandCardsData"),Object.defineProperty(o,"__esModule",{value:!0}),o.HandCardsData=o.CardGroupData=void 0;const n=t("./CommonDefine"),r=t("./PokerData");function i(t){let e=r.PokerData.getPokerPoint(t);return n.PointScoreArr[e]}function s(t,e){return t-e}function a(t,e){return(r.PokerData.getPokerPoint(t)-1+13)%13-(r.PokerData.getPokerPoint(e)-1+13)%13}class c{constructor(){this.cards=[],this.groupType=n.GroupType.Invalid,this.groupFlag=n.GroupFlag.None}}o.CardGroupData=c,o.HandCardsData=class{constructor(){this.cardGroupList=[],this.point=0,this.jokerPoint=-1}resetGameData(){this.handCardList=[],this.cardGroupList=[],this.jokerPoint=-1,this.point=0}setJokerPoint(t){this.jokerPoint=t}getHandCardList(){return this.handCardList}getGroupList(){return this.cardGroupList}copyGroupList(){let t=[];for(let e of this.cardGroupList){let o=new c;o.cards=e.cards.slice(0),o.groupFlag=e.groupFlag,o.groupType=e.groupType,t.push(o)}return t}getPoint(){return this.point}setHandCards(t){this.handCardList=t;for(let e of this.handCardList){let t=!1;for(let o of this.cardGroupList)for(let n of o.cards)if(n==e){t=!0;break}t||this.addCard(e)}}dealCards(t){t.length>n.MAX_HAND_CARDS&&(t=t.slice(0,n.MAX_HAND_CARDS),cc.log("dealCards card error")),this.handCardList=t}addCard(t){if(t<0)return void cc.log("add card error, card = "+t);let e=0;for(let o of this.cardGroupList)e+=o.cards.length;if(e>=n.MAX_HAND_CARDS)cc.log("add card error");else{if(this.cardGroupList.length==n.MAX_GROUP)this.cardGroupList[n.MAX_GROUP-1].cards.push(t);else{let e=new c;e.cards.push(t),this.cardGroupList.push(e)}this.updateCardGroupList()}}discard(t){this.cardGroupList.forEach((e,o)=>{e.cards.forEach((e,n,r)=>{if(e==t)return r.splice(n,1),void(0==r.length&&this.cardGroupList.splice(o,1))})}),this.updateCardGroupList()}moveCard(t,e,o,n){if(e<0||o<0)return!1;if(e==o)return!1;let r=!1;for(let s=0;s<t.length;++s){let e=t[s];for(let t=0;t<e.cards.length;++t)if(e.cards[t]==o){r=!0;break}}if(!r)return!1;let i=!1;for(let s=0;s<t.length;++s){let o=t[s];for(let t=0;t<o.cards.length;++t)if(o.cards[t]==e){i=!0;break}}if(!i)return!1;for(let s=0;s<t.length;++s){let r=t[s];for(let t=0;t<r.cards.length;++t)if(r.cards[t]==o){let o=-1;if((o=n?r.cards[t+1]:r.cards[t-1])==e)return!1;break}}for(let s=0;s<t.length;++s){let o=t[s];for(let n=0;n<o.cards.length;++n)if(o.cards[n]==e){o.cards.splice(n,1),0==o.cards.length&&t.splice(s,1);break}}for(let s=0;s<t.length;++s){let r=t[s];for(let t=0;t<r.cards.length;++t)if(r.cards[t]==o){n?r.cards.splice(t+1,0,e):r.cards.splice(t,0,e);break}}return!0}groupCard(t){for(let o of t)this.discard(o);let e=new c;if(e.cards=t,this.cardGroupList.unshift(e),this.cardGroupList.length>n.MAX_GROUP){let t=this.cardGroupList.pop(),e=this.cardGroupList[this.cardGroupList.length-1];e.cards.push.apply(e.cards,t.cards)}this.updateCardGroupList()}calGroupType(t){if(t.length<=2||t.length>13)return n.GroupType.Invalid;let e=0,o=0,i=0,a=[],c=new Map,l=new Map;if(t.forEach(t=>{if(r.PokerData.isJoker(t))e+=1;else if(this.isWildJoker(t))a.push(t);else{let e=r.PokerData.getPokerPoint(t),n=r.PokerData.getPokerColor(t);c.get(n)||(c.set(n,!0),o+=1),l.get(e)||(l.set(e,!0),i+=1)}}),o>1){if(1==i&&t.length<=4&&o+e+a.length==t.length)return n.GroupType.Set}else{if(1!=o)return n.GroupType.Impure;if(i+e+a.length==t.length){if(1==i)return n.GroupType.Impure;let o=[];for(let t of l.keys())o.push(t);o.sort(s);let h=function(t){let e=t[t.length-1]-t[0];if(t[0]==r.PokerPoint.PointA){let o=t[t.length-1];o!=r.PokerPoint.PointK&&o!=r.PokerPoint.PointQ||(e=13-t[1])}return e};if(h(o)<=t.length-1){if(e>0||a.length>1)return n.GroupType.Impure;if(0==a.length)return n.GroupType.Pure;{let e=a[0],i=r.PokerData.getPokerColor(e);for(let t of c.keys())if(i!=t)return n.GroupType.Impure;let l=r.PokerData.getPokerPoint(e);return o.push(l),o.sort(s),h(o)<=t.length-1?n.GroupType.Pure:n.GroupType.Impure}}}}return n.GroupType.Invalid}setCardGroup(t){0!=t.length&&(this.cardGroupList=t)}updateCardGroupList(){this.calcCardGroupFlag(this.cardGroupList),this.point=this.calcPoint(this.cardGroupList)}calcCardGroupFlag(t){let e=new Map;e.set(n.GroupType.Invalid,[]),e.set(n.GroupType.Set,[]),e.set(n.GroupType.Impure,[]),e.set(n.GroupType.Pure,[]),t.forEach((t,o)=>{let n=this.calGroupType(t.cards);e.get(n).push(o)}),e.get(n.GroupType.Invalid).forEach(e=>{t[e].groupFlag=t[e].cards.length>2?n.GroupFlag.Invalid:n.GroupFlag.None});let o=e.get(n.GroupType.Impure).length,r=e.get(n.GroupType.Pure).length;e.get(n.GroupType.Set).forEach(e=>{t[e].groupFlag=0==r?n.GroupFlag.SecondNeed:r+o<2?n.GroupFlag.SecondNeed:n.GroupFlag.Set});let i=0==r?n.GroupFlag.FirstNeed:n.GroupFlag.ImpureSeq;if(e.get(n.GroupType.Impure).forEach(e=>{t[e].groupFlag=i}),e.get(n.GroupType.Pure).forEach(e=>{t[e].groupFlag=n.GroupFlag.PureSeq}),r>0){let o=0;for(let r of e.get(n.GroupType.Pure))if(1==(o+=1))t[r].groupFlag=n.GroupFlag.FirstLife;else if(2==o){t[r].groupFlag=n.GroupFlag.SecondLife;break}if(2!=o)for(let r of e.get(n.GroupType.Impure)){t[r].groupFlag=n.GroupFlag.SecondLife;break}}}calcPoint(t){let e=0;for(let o=0;o<t.length;++o){let s=t[o].cards,a=t[o].groupFlag;if(n.GroupFlag.FirstLife!=a&&n.GroupFlag.SecondLife!=a&&n.GroupFlag.PureSeq!=a&&n.GroupFlag.ImpureSeq!=a&&n.GroupFlag.Set!=a)for(let t of s)r.PokerData.isJoker(t)||this.isWildJoker(t)||(e+=i(t))}return Math.min(80,e)}isWildJoker(t){return r.PokerData.getPokerPoint(t)==this.jokerPoint}sortGroupByColor(){this.cardGroupList=[],this.handCardList=this.handCardList.sort(a);let t=new Map;this.handCardList.forEach(e=>{let o=Math.floor(e%r.PokerCount/r.PokerPointCount);t.has(o)?t.get(o).push(e):t.set(o,[e])}),t.forEach(t=>{let e=new c;e.cards=t,this.cardGroupList.push(e)}),this.updateCardGroupList()}},cc._RF.pop()},{"./CommonDefine":"CommonDefine","./PokerData":"PokerData"}],HeartBeatHandler:[function(t,e,o){"use strict";cc._RF.push(e,"cbbe6PK4uNJaqhiv8nPLltL","HeartBeatHandler"),Object.defineProperty(o,"__esModule",{value:!0}),o.HeartBeatHandler=void 0,o.HeartBeatHandler=class{constructor(){this.m_idle=10,this.m_maxMissCount=2,this.m_idleCallBack=null,this.m_timeOutCallBack=null,this.m_missCallBack=null,this.m_logName="",this.m_curMissCount=0,this.m_lastTickTime=-1,this.m_curIdle=-1,cc.director.getScheduler().enableForTarget(this)}set idle(t){this.m_idle=t}set maxMissCount(t){this.m_maxMissCount=t}set idleCallBack(t){this.m_idleCallBack=t}set timeOutCallBack(t){this.m_timeOutCallBack=t}set missCallBack(t){this.m_missCallBack=t}set logName(t){this.m_logName=t}startIdle(){this.clearState();let t=(new Date).getTime();this.m_lastTickTime=t,cc.director.getScheduler().unscheduleAllForTarget(this),cc.director.getScheduler().schedule(this.onIdleTime,this,1),cc.log(this.m_logName+" start idle.")}stopIdle(){this.m_curMissCount=0,this.m_lastTickTime=-1,cc.director.getScheduler().unscheduleAllForTarget(this),cc.log(this.m_logName+" stop idle.")}onReceiveHeartBeat(){this.clearState()}clearState(){this.m_curMissCount=0,this.m_curIdle=this.m_idle}sendIdle(){this.m_curMissCount++,2==this.m_curMissCount&&(cc.log(this.m_logName+" miss heart beat."),null!=this.m_missCallBack&&this.m_missCallBack()),this.m_maxMissCount>0&&this.m_curMissCount>this.m_maxMissCount?this.onHeartBeatTimeOut():null!=this.m_idleCallBack&&this.m_idleCallBack()}onIdleTime(t){let e=(new Date).getTime();this.m_lastTickTime>0&&(t=(e-this.m_lastTickTime)/1e3),this.m_lastTickTime=e,t>this.m_idle*this.m_maxMissCount?this.onHeartBeatTimeOut():(this.m_curIdle-=t,this.m_curIdle<=0&&(this.m_curIdle=this.m_idle,this.sendIdle()))}onHeartBeatTimeOut(){cc.log(this.m_logName+" heart beat time out."),this.stopIdle(),null!=this.m_timeOutCallBack&&this.m_timeOutCallBack()}},cc._RF.pop()},{}],HelpLayer:[function(t,e,o){"use strict";cc._RF.push(e,"e4adfdVRVBBArTusuUkFp/l","HelpLayer");var n=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});const r=t("../MobileKit/MKIndex"),i=t("./Common/PopupBase"),s=t("../Business/Data/CommonDefine"),{ccclass:a,property:c,menu:l}=cc._decorator;let h=class extends i.default{constructor(){super(...arguments),this.shortcutLayer=null,this.scrollView=null,this.animationDuration=.3}static get path(){return"Scenes/Game/HelpLayer"}onLoad(){this.shortcutLayer.children.forEach(t=>{t.on(cc.Node.EventType.TOUCH_END,this.onTouchShortcut,this)})}updateDisplay(){this.scrollView.scrollToTop(.1)}onTouchShortcut(t){let e=t.target.name,o=this.scrollView.content.children.find(t=>t.name==e);if(!o)return;r.AudioEngine.playEffect(s.SoundList.Click);let n=0;n=o.getSiblingIndex()>7?40:30;let i=(-o.y+n*o.getSiblingIndex())/this.scrollView.content.height;this.scrollView.stopAutoScroll(),this.scrollView.scrollToPercentVertical(1-i,.1,!0)}onTouchOkey(){this.hide()}onTouchClose(){this.hide()}};n([c(cc.Node)],h.prototype,"shortcutLayer",void 0),n([c(cc.ScrollView)],h.prototype,"scrollView",void 0),h=n([a,l("Game/HelpLayer")],h),o.default=h,cc._RF.pop()},{"../Business/Data/CommonDefine":"CommonDefine","../MobileKit/MKIndex":"MKIndex","./Common/PopupBase":"PopupBase"}],HomeData:[function(t,e,o){"use strict";cc._RF.push(e,"43833cz8yRD7r9Zq0qV9kBo","HomeData"),Object.defineProperty(o,"__esModule",{value:!0}),o.HomeData=o.MaintainData=void 0;const n=t("./BroadcastData");o.MaintainData=class{constructor(){this.m_start=0,this.m_end=0,this.m_content=new Map,this.m_hasData=!1}isNearTime(){return this.m_hasData}isMaintainTime(){var t=(new Date).getTime();return t>this.m_start&&t<this.m_end}},o.HomeData=class{constructor(){this.m_chipsUnit=1,this.m_pointValueList=[],this.m_gameId="",this.m_ws="",this.m_broadcastData=new n.default}getChipsUnit(){return this.m_chipsUnit}setChipsUnit(t){this.m_chipsUnit=t}getPointValueList(){return this.m_pointValueList}setPointValueList(t){this.m_pointValueList=t}getGameId(){return this.m_gameId}setGameId(t){this.m_gameId=t}getWs(){return this.m_ws}setWs(t){this.m_ws=t}getBroadcastData(){return this.m_broadcastData}},cc._RF.pop()},{"./BroadcastData":"BroadcastData"}],HttpUtils:[function(t,e,o){"use strict";cc._RF.push(e,"6dcb9C9N2ZAg5+91n23jf2N","HttpUtils"),Object.defineProperty(o,"__esModule",{value:!0});const n=t("../../MobileKit/MKIndex");o.default=class{static generateSign(t){var e=[];for(var o in t)e.push(o);e.sort();for(var r="",i=0;i<e.length;++i){let o=e[i];r+=o+t[o]}return r+="ddgame",n.CryptoUtils.md5(r)}},cc._RF.pop()},{"../../MobileKit/MKIndex":"MKIndex"}],InforLayer:[function(t,e,o){"use strict";cc._RF.push(e,"57a2aHqg8VNequMt7ge6nb7","InforLayer");var n=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});const r=t("../MobileKit/MKIndex"),i=t("../Business/Data/DataManager"),s=t("./Common/PopupBase"),a=t("./Common/UIUtils"),c=t("../Business/Data/CommonDefine"),{ccclass:l,property:h,menu:u}=cc._decorator;let p=class extends s.default{constructor(){super(...arguments),this.txtTips=null,this.txtPointValue=null,this.txtMaxWin=null,this.txtDecks=null,this.btnOkey=null,this.animationDuration=.3}static get path(){return"Scenes/Game/message_layer"}onLoad(){a.UIUtils.ButtonEvent(this.btnOkey,this.onTouchClose.bind(this))}updateDisplay(t=!1){let e="\u20b9"+a.UIUtils.getShortNumber(i.default.gameData.getDropChips());this.txtTips.string=r.LocalLang.get("game_infor_tips",[e]),this.txtPointValue.string=i.default.gameData.getPointValue().toString(),this.txtMaxWin.string=a.UIUtils.getIndiaFormat(80*i.default.gameData.getPointValue()*c.MAX_PLAYERS),this.txtDecks.string="2",t&&this.setAutoClose()}setAutoClose(){cc.tween(this.node).delay(3).call(this.onTouchClose.bind(this)).start()}onTouchClose(){this.hide()}};n([h(cc.Label)],p.prototype,"txtTips",void 0),n([h(cc.Label)],p.prototype,"txtPointValue",void 0),n([h(cc.Label)],p.prototype,"txtMaxWin",void 0),n([h(cc.Label)],p.prototype,"txtDecks",void 0),n([h(cc.Button)],p.prototype,"btnOkey",void 0),p=n([l,u("Game/InforLayer")],p),o.default=p,cc._RF.pop()},{"../Business/Data/CommonDefine":"CommonDefine","../Business/Data/DataManager":"DataManager","../MobileKit/MKIndex":"MKIndex","./Common/PopupBase":"PopupBase","./Common/UIUtils":"UIUtils"}],LanguageLayer:[function(t,e,o){"use strict";cc._RF.push(e,"de8164TwFRB+LdFXf1H7BpI","LanguageLayer");var n=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});const r=t("../MobileKit/MKIndex"),i=t("./Common/PopupBase"),{ccclass:s,property:a,menu:c}=cc._decorator;let l=class extends i.default{constructor(){super(...arguments),this.langBtnArr=[],this.animationDuration=0,this.langIdx=0}static get path(){return"Scenes/Game/language_layer"}onLoad(){this.main||(this.main=this.node),r.noticeCenter.registAllNotice(this),this.langArr=["en","hi"];let t=r.LocalLang.getLanguage(),e=this.langArr.indexOf(t);e>=0&&(this.langBtnArr[e].check(),this.langIdx=e)}onTouchClose(){this.hide()}onTouchLang(t,e){this.langIdx=Number(e)}onTouchConfirm(){r.LocalLang.setLanguage(this.langArr[this.langIdx]),this.hide()}};n([a([cc.Toggle])],l.prototype,"langBtnArr",void 0),l=n([s],l),o.default=l,cc._RF.pop()},{"../MobileKit/MKIndex":"MKIndex","./Common/PopupBase":"PopupBase"}],LoadingConfig:[function(t,e,o){"use strict";cc._RF.push(e,"ce28cPR/G1B07ofLePg+SKH","LoadingConfig"),Object.defineProperty(o,"__esModule",{value:!0}),o.SpriteFrameResLst=o.LoadingResLst=void 0;const n=t("../Business/Data/CommonDefine");o.LoadingResLst=new Map,o.SpriteFrameResLst=new Map,o.LoadingResLst.set(n.SoundList.Bgm,cc.AudioClip),o.LoadingResLst.set(n.SoundList.Click,cc.AudioClip),o.LoadingResLst.set("Sound/win",cc.AudioClip),o.LoadingResLst.set("Sound/big_winner",cc.AudioClip),o.LoadingResLst.set("Sound/chip",cc.AudioClip),o.LoadingResLst.set(n.SoundList.BtnWrong,cc.AudioClip),o.LoadingResLst.set(n.SoundList.Dealcard2,cc.AudioClip),o.LoadingResLst.set(n.SoundList.Bgm,cc.AudioClip),o.LoadingResLst.set(n.SoundList.Button01,cc.AudioClip),o.LoadingResLst.set(n.SoundList.Button02,cc.AudioClip),o.LoadingResLst.set(n.SoundList.CardFlip1,cc.AudioClip),o.LoadingResLst.set(n.SoundList.CardFlip2,cc.AudioClip),o.LoadingResLst.set(n.SoundList.Alarm,cc.AudioClip),o.LoadingResLst.set(n.PrefabList.PlayerNode,cc.Prefab),o.LoadingResLst.set(n.PrefabList.PokerNode,cc.Prefab),o.LoadingResLst.set(n.PrefabList.GameEntyuCell,cc.Prefab),o.LoadingResLst.set(n.PrefabList.RecordCell,cc.Prefab),o.LoadingResLst.set(n.PrefabList.RecordPage,cc.Prefab),o.LoadingResLst.set("Scenes/Common/MessageView",cc.Prefab),o.LoadingResLst.set("Scenes/Common/ConfirmDialog",cc.Prefab),o.SpriteFrameResLst.set(n.SpriteList.TipsPick,cc.SpriteFrame),o.SpriteFrameResLst.set(n.SpriteList.TipsDiscard,cc.SpriteFrame),o.SpriteFrameResLst.set("Texture/Game/img_group_green",cc.SpriteFrame),o.SpriteFrameResLst.set("Texture/Game/img_group_blue",cc.SpriteFrame),o.SpriteFrameResLst.set("Texture/Game/img_group_red",cc.SpriteFrame),o.SpriteFrameResLst.set("Texture/Lobby/img_entry0",cc.SpriteFrame),o.SpriteFrameResLst.set("Texture/Lobby/img_entry1",cc.SpriteFrame),o.SpriteFrameResLst.set("Texture/Lobby/img_entry2",cc.SpriteFrame),o.SpriteFrameResLst.set("Texture/Lobby/img_entry3",cc.SpriteFrame),o.SpriteFrameResLst.set("Texture/Lobby/img_entry4",cc.SpriteFrame),o.SpriteFrameResLst.set("Texture/Game/Poker/clubs_1",cc.SpriteFrame),o.SpriteFrameResLst.set("Texture/Game/Poker/clubs_2",cc.SpriteFrame),o.SpriteFrameResLst.set("Texture/Game/Poker/clubs_3",cc.SpriteFrame),o.SpriteFrameResLst.set("Texture/Game/Poker/clubs_4",cc.SpriteFrame),o.SpriteFrameResLst.set("Texture/Game/Poker/clubs_5",cc.SpriteFrame),o.SpriteFrameResLst.set("Texture/Game/Poker/clubs_6",cc.SpriteFrame),o.SpriteFrameResLst.set("Texture/Game/Poker/clubs_7",cc.SpriteFrame),o.SpriteFrameResLst.set("Texture/Game/Poker/clubs_8",cc.SpriteFrame),o.SpriteFrameResLst.set("Texture/Game/Poker/clubs_9",cc.SpriteFrame),o.SpriteFrameResLst.set("Texture/Game/Poker/clubs_10",cc.SpriteFrame),o.SpriteFrameResLst.set("Texture/Game/Poker/clubs_j",cc.SpriteFrame),o.SpriteFrameResLst.set("Texture/Game/Poker/clubs_q",cc.SpriteFrame),o.SpriteFrameResLst.set("Texture/Game/Poker/clubs_k",cc.SpriteFrame),o.SpriteFrameResLst.set("Texture/Game/Poker/clubs_down",cc.SpriteFrame),o.SpriteFrameResLst.set("Texture/Game/Poker/diamonds_1",cc.SpriteFrame),o.SpriteFrameResLst.set("Texture/Game/Poker/diamonds_2",cc.SpriteFrame),o.SpriteFrameResLst.set("Texture/Game/Poker/diamonds_3",cc.SpriteFrame),o.SpriteFrameResLst.set("Texture/Game/Poker/diamonds_4",cc.SpriteFrame),o.SpriteFrameResLst.set("Texture/Game/Poker/diamonds_5",cc.SpriteFrame),o.SpriteFrameResLst.set("Texture/Game/Poker/diamonds_6",cc.SpriteFrame),o.SpriteFrameResLst.set("Texture/Game/Poker/diamonds_7",cc.SpriteFrame),o.SpriteFrameResLst.set("Texture/Game/Poker/diamonds_8",cc.SpriteFrame),o.SpriteFrameResLst.set("Texture/Game/Poker/diamonds_9",cc.SpriteFrame),o.SpriteFrameResLst.set("Texture/Game/Poker/diamonds_10",cc.SpriteFrame),o.SpriteFrameResLst.set("Texture/Game/Poker/diamonds_j",cc.SpriteFrame),o.SpriteFrameResLst.set("Texture/Game/Poker/diamonds_q",cc.SpriteFrame),o.SpriteFrameResLst.set("Texture/Game/Poker/diamonds_k",cc.SpriteFrame),o.SpriteFrameResLst.set("Texture/Game/Poker/diamonds_down",cc.SpriteFrame),o.SpriteFrameResLst.set("Texture/Game/Poker/hearts_down",cc.SpriteFrame),o.SpriteFrameResLst.set("Texture/Game/Poker/joker_big",cc.SpriteFrame),o.SpriteFrameResLst.set("Texture/Game/Poker/joker_small",cc.SpriteFrame),o.SpriteFrameResLst.set("Texture/Game/Poker/poker_bg",cc.SpriteFrame),o.SpriteFrameResLst.set("Texture/Game/Poker/poker_back",cc.SpriteFrame),o.SpriteFrameResLst.set("Texture/Game/Poker/spades_down",cc.SpriteFrame),o.SpriteFrameResLst.set("Texture/Game/Poker/j_clubs",cc.SpriteFrame),o.SpriteFrameResLst.set("Texture/Game/Poker/q_clubs",cc.SpriteFrame),o.SpriteFrameResLst.set("Texture/Game/Poker/k_clubs",cc.SpriteFrame),o.SpriteFrameResLst.set("Texture/Game/Poker/j_hearts",cc.SpriteFrame),o.SpriteFrameResLst.set("Texture/Game/Poker/q_hearts",cc.SpriteFrame),o.SpriteFrameResLst.set("Texture/Game/Poker/k_hearts",cc.SpriteFrame),o.SpriteFrameResLst.set("Texture/Game/Poker/j_spades",cc.SpriteFrame),o.SpriteFrameResLst.set("Texture/Game/Poker/q_spades",cc.SpriteFrame),o.SpriteFrameResLst.set("Texture/Game/Poker/k_spades",cc.SpriteFrame),o.SpriteFrameResLst.set("Texture/Game/Poker/j_diamonds",cc.SpriteFrame),o.SpriteFrameResLst.set("Texture/Game/Poker/q_diamonds",cc.SpriteFrame),o.SpriteFrameResLst.set("Texture/Game/Poker/k_diamonds",cc.SpriteFrame),cc._RF.pop()},{"../Business/Data/CommonDefine":"CommonDefine"}],LoadingScene:[function(t,e,o){"use strict";cc._RF.push(e,"b3227XK/V5PI5kdwcCTTjvS","LoadingScene");var n=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});const r=t("../MobileKit/MKIndex"),i=t("../Business/Data/DataManager"),s=t("../Business/Data/ConfigManager"),a=t("../Business/Data/CommonDefine"),c=t("../Business/Logic/SceneController"),l=t("./LoadingConfig"),h=t("../Business/Logic/GameController"),u=t("../Business/Data/SaveDataManager"),p=t("../Business/NetWork/NetworkController"),d=t("../Business/NetWork/NetworkNotice"),{ccclass:f,property:g,menu:m}=cc._decorator;let y=class extends cc.Component{constructor(){super(...arguments),this.urlConfig=null,this.appInfo=null,this.progressBar=null,this.txtLoading=null,this.loadResOK=!1,this.loadSpriteFrameOK=!1,this.loginOK=!0}onLoad(){r.noticeCenter.registAllNotice(this),this.initApp(),cc.director.preloadScene("Game",this.onSceneProgress.bind(this),()=>{}),this.txtLoading.string="0 %",this.progressBar.progress=0}initApp(){i.default.init(),u.default.init(),r.commandCenter.addController(new c.SceneController),r.commandCenter.addController(new h.GameController),r.commandCenter.addController(new p.NetworkController),r.AudioEngine.setEffectsEnabled(u.default.getEffectEnable()),r.AudioEngine.setMusicEnabled(u.default.getMusicEnable()),r.AudioEngine.setEffectsVolume(.5),r.AudioEngine.setMusicVolume(.5),r.LocalLang.setLanguage("en"),this.initTestData(),s.default.setUrlConfig(this.urlConfig.json),s.default.setAppInfo(this.appInfo.json),this.loadRes()}initTestData(){i.default.userData.setUid(5566),i.default.userData.setNickName("User 1234567890"),i.default.userData.setBalance(5e4),i.default.homeData.setPointValueList([5,10,20,40,100]),i.default.homeData.setChipsUnit(1),i.default.homeData.setGameId("0"),i.default.userData.setGameRecordLst([{balance:767,time:1660210006147,pv:4,isWin:!1},{balance:1801,time:1659537223957,pv:3,isWin:!0},{balance:324,time:1659477042944,pv:1,isWin:!1},{balance:1775,time:1660554944361,pv:0,isWin:!0},{balance:815,time:1659688686469,pv:0,isWin:!1},{balance:984,time:1660066596467,pv:4,isWin:!0},{balance:101,time:1660351832652,pv:0,isWin:!1},{balance:807,time:1660266918017,pv:2,isWin:!0},{balance:520,time:1659536063783,pv:3,isWin:!0},{balance:1768,time:1660205692424,pv:1,isWin:!1},{balance:1657,time:1660415139657,pv:1,isWin:!0},{balance:1483,time:1660531764400,pv:0,isWin:!0},{balance:1927,time:1659347722903,pv:3,isWin:!0},{balance:1330,time:1660071385718,pv:1,isWin:!1},{balance:916,time:1660427852131,pv:1,isWin:!0},{balance:1935,time:1660203458317,pv:4,isWin:!0},{balance:1704,time:1659479313312,pv:1,isWin:!1},{balance:675,time:1659433504892,pv:3,isWin:!0},{balance:146,time:1660060789960,pv:2,isWin:!0},{balance:1105,time:1660429411071,pv:0,isWin:!1},{balance:455,time:1660072578178,pv:3,isWin:!0},{balance:469,time:1660283031166,pv:0,isWin:!0},{balance:597,time:1659407293598,pv:1,isWin:!0},{balance:960,time:1660281561832,pv:1,isWin:!1},{balance:1228,time:1660405372961,pv:0,isWin:!1},{balance:1615,time:1660093538168,pv:2,isWin:!1},{balance:971,time:1660222691920,pv:3,isWin:!1},{balance:353,time:1660103088442,pv:3,isWin:!0},{balance:204,time:1659856606624,pv:2,isWin:!1},{balance:1893,time:1660065351504,pv:2,isWin:!1},{balance:888,time:1659805156089,pv:2,isWin:!0},{balance:223,time:1659669666060,pv:0,isWin:!0},{balance:1049,time:1660484766966,pv:1,isWin:!0},{balance:170,time:1660254553870,pv:2,isWin:!1},{balance:1419,time:1659618906950,pv:1,isWin:!0},{balance:1532,time:1659567352788,pv:3,isWin:!1},{balance:220,time:1660565727907,pv:1,isWin:!0},{balance:937,time:1659364886782,pv:2,isWin:!0},{balance:927,time:1659763699500,pv:3,isWin:!1},{balance:1675,time:1660322288903,pv:2,isWin:!0},{balance:746,time:1659791005751,pv:0,isWin:!1},{balance:1688,time:1660016766384,pv:3,isWin:!0},{balance:539,time:1659592131477,pv:4,isWin:!0},{balance:1316,time:1660370688376,pv:0,isWin:!1},{balance:174,time:1659392759810,pv:3,isWin:!1},{balance:1556,time:1660280505561,pv:1,isWin:!1},{balance:740,time:1659914727240,pv:4,isWin:!1},{balance:1488,time:1659601067817,pv:0,isWin:!1},{balance:1568,time:1660300598747,pv:0,isWin:!0},{balance:944,time:1660078074904,pv:0,isWin:!0},{balance:729,time:1659539671704,pv:1,isWin:!0},{balance:1462,time:1660535647840,pv:3,isWin:!0},{balance:1928,time:1660376298332,pv:1,isWin:!1},{balance:835,time:1660498321689,pv:2,isWin:!0},{balance:1473,time:1659626088745,pv:0,isWin:!0},{balance:941,time:1660275922569,pv:0,isWin:!0},{balance:914,time:1659706692501,pv:4,isWin:!0},{balance:1421,time:1659684137158,pv:3,isWin:!1}])}loadRes(){cc.resources.load(Array.from(l.LoadingResLst.keys()),null,this.onLoadProgress.bind(this),this.onLoadResComplete.bind(this)),cc.resources.load(Array.from(l.SpriteFrameResLst.keys()),cc.SpriteFrame,this.onLoadProgress.bind(this),this.onLoadSpriteFrameComplete.bind(this))}onLoadProgress(){}onLoadResComplete(){this.loadResOK=!0,this.gotoNextScene()}onLoadSpriteFrameComplete(){this.loadSpriteFrameOK=!0,this.gotoNextScene()}onSceneProgress(t,e,o){try{this.progressBar.progress=t/e,this.txtLoading.string=Math.floor(t/e*100)+" %"}catch(n){}}gotoNextScene(){this.loadResOK&&this.loadSpriteFrameOK&&this.loginOK&&r.commandCenter.emit(new c.CmdScene(a.SceneType.Lobby))}onNtcLogin(t){0==t.result&&(this.loginOK=!0,this.gotoNextScene())}};n([g(cc.JsonAsset)],y.prototype,"urlConfig",void 0),n([g(cc.JsonAsset)],y.prototype,"appInfo",void 0),n([g(cc.ProgressBar)],y.prototype,"progressBar",void 0),n([g(cc.Label)],y.prototype,"txtLoading",void 0),n([r.onNotice(d.NtcLogin)],y.prototype,"onNtcLogin",null),y=n([f],y),o.default=y,cc._RF.pop()},{"../Business/Data/CommonDefine":"CommonDefine","../Business/Data/ConfigManager":"ConfigManager","../Business/Data/DataManager":"DataManager","../Business/Data/SaveDataManager":"SaveDataManager","../Business/Logic/GameController":"GameController","../Business/Logic/SceneController":"SceneController","../Business/NetWork/NetworkController":"NetworkController","../Business/NetWork/NetworkNotice":"NetworkNotice","../MobileKit/MKIndex":"MKIndex","./LoadingConfig":"LoadingConfig"}],LobbyScene:[function(t,e,o){"use strict";cc._RF.push(e,"89bb4LCQZZMergYFs0a2QwS","LobbyScene");var n=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});const r=t("../../MobileKit/MKIndex"),i=t("../../Business/Data/DataManager"),s=t("../../Business/Data/CommonDefine"),a=t("../../Business/NetWork/NetworkController"),c=t("../Common/PopupManager"),l=t("../../Business/Data/SaveDataManager"),h=t("../Common/UIUtils"),u=t("../Common/PrefabPool"),p=t("./GameEntryCell"),{ccclass:d,property:f,menu:g}=cc._decorator;let m=class extends cc.Component{constructor(){super(...arguments),this.txtBalance=null,this.entryScroll=null,this.txtUserName=null,this.txtUid=null,this.btnRecord=null,this.imgMusic=null,this.imgSound=null,this.imgMusicOn=null,this.imgMusicOff=null,this.imgSoundOn=null,this.imgSoundOff=null,this.txtBroadcast=null,this.musicOn=!1,this.soundOn=!1}onLoad(){r.noticeCenter.registAllNotice(this),this.initUI(),this.showBroadCast(),r.AudioEngine.playMusic(s.SoundList.Bgm,!0),r.commandCenter.emit(new a.CmdBroadcastTest)}initUI(){this.txtBalance.string=h.UIUtils.getShortNumber(i.default.userData.getBalance(),!0),this.txtUserName.string=i.default.userData.getNickName(),this.txtUid.string=i.default.userData.getUid(),h.UIUtils.NodeClickEvent(this.btnRecord,this.onTouchRecord.bind(this)),h.UIUtils.NodeClickEvent(this.imgMusic.node,this.onTouchMusic.bind(this)),h.UIUtils.NodeClickEvent(this.imgSound.node,this.onTouchSound.bind(this)),this.musicOn=l.default.getMusicEnable(),this.soundOn=l.default.getEffectEnable(),this.imgMusic.spriteFrame=this.musicOn?this.imgMusicOn:this.imgMusicOff,this.imgSound.spriteFrame=this.soundOn?this.imgSoundOn:this.imgSoundOff,i.default.homeData.getPointValueList().forEach((t,e)=>{let o=u.default.get(s.PrefabList.GameEntyuCell);o.setParent(this.entryScroll.content),o.getComponent(p.GameEntryCell).setData(e)}),this.entryScroll.scrollToLeft()}onTouchRecord(){c.default.show(s.PrefabList.GameRecordLayer)}onTouchMusic(){this.musicOn=!this.musicOn,this.imgMusic.spriteFrame=this.musicOn?this.imgMusicOn:this.imgMusicOff,l.default.setMusicEnable(this.musicOn),r.AudioEngine.setMusicEnabled(this.musicOn)}onTouchSound(){this.soundOn=!this.soundOn,this.imgSound.spriteFrame=this.soundOn?this.imgSoundOn:this.imgSoundOff,l.default.setEffectEnable(this.soundOn),r.AudioEngine.setEffectsEnabled(this.soundOn),r.AudioEngine.playEffect(s.SoundList.Click)}showBroadCast(){let t=i.default.homeData.getBroadcastData().getCurNotice(),e=this.txtBroadcast.node.parent.height;this.txtBroadcast.string=t,this.txtBroadcast.node.y=e,cc.tween(this.txtBroadcast.node).to(1,{y:0},{easing:"smooth"}).delay(2).to(1,{y:-e},{easing:"smooth"}).call(this.showBroadCast.bind(this)).start()}};n([f(cc.Label)],m.prototype,"txtBalance",void 0),n([f(cc.ScrollView)],m.prototype,"entryScroll",void 0),n([f(cc.Label)],m.prototype,"txtUserName",void 0),n([f(cc.Label)],m.prototype,"txtUid",void 0),n([f(cc.Node)],m.prototype,"btnRecord",void 0),n([f(cc.Sprite)],m.prototype,"imgMusic",void 0),n([f(cc.Sprite)],m.prototype,"imgSound",void 0),n([f(cc.SpriteFrame)],m.prototype,"imgMusicOn",void 0),n([f(cc.SpriteFrame)],m.prototype,"imgMusicOff",void 0),n([f(cc.SpriteFrame)],m.prototype,"imgSoundOn",void 0),n([f(cc.SpriteFrame)],m.prototype,"imgSoundOff",void 0),n([f(cc.Label)],m.prototype,"txtBroadcast",void 0),m=n([d,g("Lobby/LobbyScene")],m),o.default=m,cc._RF.pop()},{"../../Business/Data/CommonDefine":"CommonDefine","../../Business/Data/DataManager":"DataManager","../../Business/Data/SaveDataManager":"SaveDataManager","../../Business/NetWork/NetworkController":"NetworkController","../../MobileKit/MKIndex":"MKIndex","../Common/PopupManager":"PopupManager","../Common/PrefabPool":"PrefabPool","../Common/UIUtils":"UIUtils","./GameEntryCell":"GameEntryCell"}],MKActionQueue:[function(t,e,o){"use strict";cc._RF.push(e,"7733b8JdpNIHYxZ1k+2nx9N","MKActionQueue"),Object.defineProperty(o,"__esModule",{value:!0}),o.ActionQueue=void 0,o.ActionQueue=class{constructor(){this.m_actionQueue=null,this.m_delay=0,this.m_actionQueue=[],cc.director.getScheduler().enableForTarget(this),cc.director.getScheduler().scheduleUpdate(this,0,!1)}postAction(t,e){this.m_actionQueue.push({func:t,param:e})}setDelayTime(t){t<cc.macro.FLT_EPSILON||this.m_delay<t&&(this.m_delay=t)}clear(){this.clearDelayTime(),this.removeAllAction()}clearDelayTime(){this.m_delay=0}removeAllAction(){this.m_actionQueue.length=0}update(t){if(this.m_delay>0&&(this.m_delay-=t),this.m_actionQueue.length>0&&this.m_delay<cc.macro.FLT_EPSILON){var e=this.m_actionQueue.shift();e.func(e.param)}}onExit(){this.clear(),cc.director.getScheduler().unscheduleAllForTarget(this)}},cc._RF.pop()},{}],MKAudioEngine:[function(t,e,o){"use strict";cc._RF.push(e,"1950dWg/apGgKPh5p5a+7i+","MKAudioEngine"),Object.defineProperty(o,"__esModule",{value:!0}),o.AudioEngine=void 0;let n=!1,r=!1,i=null,s=!1;class a{static playEffect(t,e=!1){if(n){if(t instanceof cc.AudioClip)return cc.audioEngine.playEffect(t,e);{let o=cc.resources.get(t);if(null!=o)return cc.audioEngine.playEffect(o,e)}}return 0}static stopEffect(t){t>0&&cc.audioEngine.stopEffect(t)}static playMusic(t,e=!1){if(t instanceof cc.AudioClip)i=t;else{let e=cc.resources.get(t);null!=e&&(i=e)}s=e,r&&cc.audioEngine.playMusic(i,s)}static stopMusic(){i=null,cc.audioEngine.stopMusic()}static setEffectsVolume(t){cc.audioEngine.setEffectsVolume(t)}static setMusicVolume(t){cc.audioEngine.setMusicVolume(t)}static setAudioVolume(t,e){cc.audioEngine.setVolume(t,e)}static setEffectsEnabled(t){n=t,t||cc.audioEngine.stopAllEffects()}static setMusicEnabled(t){r=t,t?null!=i&&cc.audioEngine.playMusic(i,s):cc.audioEngine.stopMusic()}static setMute(t){a.setEffectsEnabled(!t),a.setMusicEnabled(!t)}static isMute(){return r&&n}static isMusicPlaying(){return cc.audioEngine.isMusicPlaying()}static pauseMusic(){cc.audioEngine.pauseMusic()}}o.AudioEngine=a,cc._RF.pop()},{}],MKCommandCenter:[function(t,e,o){"use strict";cc._RF.push(e,"36eecgRfGBIvrNItfzw/c9j","MKCommandCenter"),Object.defineProperty(o,"__esModule",{value:!0}),o.onCommand=o.commandCenter=o.CommandCenter=o.Controller=o.createCommand=void 0;let n=0;o.createCommand=function(t){t.Type="Command"+n++,t.prototype.getType=function(){return t.Type}},o.Controller=class{constructor(){this.name=""}setName(t){this.name=t}getName(){return this.name}onExit(){}};class r{constructor(){this.m_controllers=new Map,this.m_eventTarget=new cc.EventTarget}addController(t){var e=t.getName();this.m_controllers.get(e)?(cc.log("MKCommandCenter warning, controller already exist"),t.onExit()):this.m_controllers.set(e,t)}removeController(t){var e=this.m_controllers.get(t);e&&(e.onExit(),this.targetOff(e),this.m_controllers.delete(t))}hasController(t){return this.m_controllers.get(t)}on(t,e,o){this.m_eventTarget.on(t.Type,e,o)}off(t,e,o){this.m_eventTarget.off(t.Type,e,o)}registAllCommand(t){if(t.commandList)for(let e of t.commandList)this.on(e.command,t[e.methodName],t)}targetOff(t){this.m_eventTarget.targetOff(t)}emit(t){this.m_eventTarget.hasEventListener(t.getType())?this.m_eventTarget.emit(t.getType(),t):cc.log("MKCommandCenter err : no command handler, command type = "+t.getType())}}o.CommandCenter=r,o.commandCenter=new r,o.onCommand=function(t){return function(e,o){e.commandList||(e.commandList=[]),e.commandList.push({command:t,methodName:o})}},cc._RF.pop()},{}],MKCryptoUtils:[function(t,e,o){"use strict";cc._RF.push(e,"1ff71vS4J1NA7ytlCGJPgtt","MKCryptoUtils"),Object.defineProperty(o,"__esModule",{value:!0}),o.CryptoUtils=void 0,o.CryptoUtils=class{static md5(t){return CryptoJS.MD5(t).toString()}static base64Encode(t){var e=CryptoJS.enc.Utf8.parse(t);return CryptoJS.enc.Base64.stringify(e)}static base64Decode(t){return CryptoJS.enc.Base64.parse(t).toString(CryptoJS.enc.Utf8)}},cc._RF.pop()},{}],MKHttp:[function(t,e,o){"use strict";cc._RF.push(e,"0073dUDVQRAsofk0kRCNO0I","MKHttp"),Object.defineProperty(o,"__esModule",{value:!0}),o.Http=void 0;class n{static formatParams(t){let e="",o=!1;for(let n in t)o?e+="&":o=!0,e+=n+"="+t[n];return e}static get(t,e,o,r=n.ContentType.Form){let i=new XMLHttpRequest;i.onreadystatechange=function(){if(4==i.readyState)if(i.status>=200&&i.status<400){let n={};if(""!=i.responseText)try{n=JSON.parse(i.responseText)}catch(e){cc.log("http get result parse failed! url = %s",t)}o(!0,n)}else cc.log("http get error! code = %s, url = %s",i.status,t),o(!1,null)},i.onerror=function(){cc.log("http get error! url = %s",t),o(!1,null)},i.ontimeout=function(){cc.log("http get timeout! url = %s",t),o(!1,null)},r==n.ContentType.Json?(i.open("GET",t,!0),i.setRequestHeader("Content-Type","application/json; charset=utf-8"),i.send(e?JSON.stringify(e):null)):r==n.ContentType.Form?(e&&(t+="?"+n.formatParams(e)),i.open("GET",t,!0),i.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),i.send()):r==n.ContentType.Multipart&&(i.open("GET",t,!0),i.setRequestHeader("Content-Type","multipart/form-data"),i.send())}static post(t,e,o,r=n.ContentType.Form){let i=new XMLHttpRequest;i.onreadystatechange=function(){if(4==i.readyState)if(i.status>=200&&i.status<400){let n={};if(""!=i.responseText)try{n=JSON.parse(i.responseText)}catch(e){cc.log("http post result parse failed! url = %s",t)}o(!0,n)}else cc.log("http post error! code = %s, url = %s",i.status,t),o(!1,null)},i.onerror=function(){cc.log("http post error! url = %s",t),o(!1,null)},i.ontimeout=function(){cc.log("http post timeout! url = %s",t),o(!1,null)},i.open("POST",t,!0),r==n.ContentType.Json?(i.setRequestHeader("Content-Type","application/json; charset=utf-8"),i.send(e?JSON.stringify(e):null)):(i.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),i.send(e?n.formatParams(e):null))}static delete(t,e,o,r=n.ContentType.Form){let i=new XMLHttpRequest;i.onreadystatechange=function(){if(4==i.readyState)if(i.status>=200&&i.status<400){let n={};if(""!=i.responseText)try{n=JSON.parse(i.responseText)}catch(e){cc.log("http delete result parse failed! url = %s",t)}o(!0,n)}else cc.log("http delete error! code = %s, url = %s",i.status,t),o(!1,null)},i.onerror=function(){cc.log("http delete error! url = %s",t),o(!1,null)},i.ontimeout=function(){cc.log("http delete timeout! url = %s",t),o(!1,null)},r==n.ContentType.Json?(i.open("DELETE",t,!0),i.setRequestHeader("Content-Type","application/json; charset=utf-8"),i.send(e?JSON.stringify(e):null)):(e&&(t+="?"+n.formatParams(e)),i.open("DELETE",t,!0),i.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),i.send())}static postWithAuth(t,e,o,n){let r=new XMLHttpRequest;r.onreadystatechange=function(){if(4==r.readyState)if(r.status>=200&&r.status<400){let n={};if(""!=r.responseText)try{n=JSON.parse(r.responseText)}catch(e){cc.log("http post result parse failed! url = %s",t)}o(!0,n)}else cc.log("http post error! code = %s, url = %s",r.status,t),o(!1,null)},r.onerror=function(){cc.log("http post error! url = %s",t),o(!1,null)},r.ontimeout=function(){cc.log("http post timeout! url = %s",t),o(!1,null)},r.open("POST",t,!0),r.setRequestHeader("Authorization","Bearer "+n),r.setRequestHeader("Content-Type","multipart/form-data"),r.send(e?JSON.stringify(e):null)}static getWithAuth(t,e,o,n){let r=new XMLHttpRequest;r.onreadystatechange=function(){if(4==r.readyState)if(r.status>=200&&r.status<400){let n={};if(""!=r.responseText)try{n=JSON.parse(r.responseText)}catch(e){cc.log("http get result parse failed! url = %s",t)}o(!0,n)}else cc.log("http get error! code = %s, url = %s",r.status,t),o(!1,null)},r.onerror=function(){cc.log("http get error! url = %s",t),o(!1,null)},r.ontimeout=function(){cc.log("http get timeout! url = %s",t),o(!1,null)},r.open("GET",t,!0),r.setRequestHeader("Authorization","Bearer "+n),r.setRequestHeader("Content-Type","multipart/form-data"),r.send()}}o.Http=n,n.ContentType={Form:1,Json:2,Multipart:3},cc._RF.pop()},{}],MKImageDownloader:[function(t,e,o){"use strict";cc._RF.push(e,"4919aB9yv1POaDSwtAZW/Qh","MKImageDownloader"),Object.defineProperty(o,"__esModule",{value:!0}),o.imageDowloader=o.ImageDownloader=void 0;const n=t("./MKCryptoUtils");class r{constructor(){this.m_observers=null,this.m_observers=[]}loadUrl(t,e){for(var o=!1,n=0,r=this.m_observers.length;n<r;++n){var i=this.m_observers[n];if(t==i.url){i.callback.push(e),o=!0;break}}o||(this.m_observers.push({url:t,callback:[e]}),this.downloadImage(t))}onDownloadImage(t,e){for(var o=this.m_observers.length-1;o>=0;--o){var n=this.m_observers[o];if(t==n.url){for(var r=n.callback,i=0;i<r.length;++i)r[i](t,e);this.m_observers.splice(o,1);break}}}downloadImage(t){var e=jsb.fileUtils.getWritablePath()+"net_image/",o=e+n.CryptoUtils.md5(t)+".jpg";if(jsb.fileUtils.isFileExist(o))this.onDownloadImage(t,o);else{jsb.fileUtils.isDirectoryExist(e)||jsb.fileUtils.createDirectory(e);var r=new XMLHttpRequest;r.onreadystatechange=function(){4===r.readyState&&(200===r.status?this.saveFile(t,o,r.response):cc.log("Remote download file failed."))}.bind(this),r.responseType="arraybuffer",r.open("GET",t,!0),r.send()}}saveFile(t,e,o){jsb.fileUtils.writeDataToFile(new Uint8Array(o),e)?this.onDownloadImage(t,e):cc.log("Remote write file failed.")}clearCache(){var t=jsb.fileUtils.getWritablePath()+"net_image/";jsb.fileUtils.listFiles(t).length>100&&jsb.fileUtils.removeDirectory(t)}}o.ImageDownloader=r,o.imageDowloader=new r,cc._RF.pop()},{"./MKCryptoUtils":"MKCryptoUtils"}],MKIndex:[function(t,e,o){"use strict";cc._RF.push(e,"0f526BZPmpBr7wVUh62Ltxm","MKIndex");var n=this&&this.__createBinding||(Object.create?function(t,e,o,n){void 0===n&&(n=o),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[o]}})}:function(t,e,o,n){void 0===n&&(n=o),t[n]=e[o]}),r=this&&this.__exportStar||function(t,e){for(var o in t)"default"===o||Object.prototype.hasOwnProperty.call(e,o)||n(e,t,o)};Object.defineProperty(o,"__esModule",{value:!0}),r(t("./Common/MKCryptoUtils"),o),r(t("./Common/MKLocalLang"),o),r(t("./Common/MKSystem"),o),r(t("./Common/MKUtils"),o),r(t("./Common/MKImageDownloader"),o),r(t("./Common/MKAudioEngine"),o),r(t("./Common/HeartBeatHandler"),o),r(t("./Event/MKCommandCenter"),o),r(t("./Event/MKNoticeCenter"),o),r(t("./Event/MKActionQueue"),o),r(t("./Network/MKHttp"),o),r(t("./Network/MKSocket"),o),cc._RF.pop()},{"./Common/HeartBeatHandler":"HeartBeatHandler","./Common/MKAudioEngine":"MKAudioEngine","./Common/MKCryptoUtils":"MKCryptoUtils","./Common/MKImageDownloader":"MKImageDownloader","./Common/MKLocalLang":"MKLocalLang","./Common/MKSystem":"MKSystem","./Common/MKUtils":"MKUtils","./Event/MKActionQueue":"MKActionQueue","./Event/MKCommandCenter":"MKCommandCenter","./Event/MKNoticeCenter":"MKNoticeCenter","./Network/MKHttp":"MKHttp","./Network/MKSocket":"MKSocket"}],MKLocalLang:[function(t,e,o){"use strict";cc._RF.push(e,"26623qYW/1OJ7PqJm16Um6d","MKLocalLang"),Object.defineProperty(o,"__esModule",{value:!0}),o.LocalLang=void 0;class n{static checkInit(){this.language||this.setLanguage("en")}static setLanguage(t){this.language!==t&&(this.language=t,this.reloadLabel(),this.reloadSprite())}static getLanguage(){return this.language}static _addOrDelLabel(t,e){if(e)this.labelArr.push(t);else{let e=this.labelArr.indexOf(t);-1!==e&&this.labelArr.splice(e,1)}}static get(t,e){if(this.checkInit(),null==e||0===e.length)return this.labelData[t]||t;let o=this.labelData[t]||t;for(let n=0;n<e.length;n++){let t=new RegExp("#"+n,"g");o=o.replace(t,e[n])}return o}static _addOrDelSprite(t,e){if(e)this.spriteArr.push(t);else{let e=this.spriteArr.indexOf(t);-1!==e&&this.spriteArr.splice(e,1)}}static _getSprite(t,e){this.checkInit(),cc.resources.load("i18n/sprite/"+this.language+"/"+t,cc.SpriteFrame,(t,o)=>{if(t)return e(null);e(o)})}static reloadLabel(){let t="i18n/label/"+this.language;cc.resources.load(t,(t,e)=>{t?(console.error(t),this.labelData={}):this.labelData=e.json;for(let o of this.labelArr)o._resetValue()})}static reloadSprite(){for(let t of this.spriteArr)t._resetValue()}}o.LocalLang=n,n.language="",n.labelArr=[],n.labelData={},n.spriteArr=[],cc._RF.pop()},{}],MKNoticeCenter:[function(t,e,o){"use strict";cc._RF.push(e,"79a78Glip9HQ5SpEWfy23e+","MKNoticeCenter"),Object.defineProperty(o,"__esModule",{value:!0}),o.onNotice=o.noticeCenter=o.NoticeCenter=o.createNotice=void 0;let n=0;o.createNotice=function(t){t.Type="Notice"+n++,t.prototype.getType=function(){return t.Type}};class r{constructor(){this.m_eventTarget=new cc.EventTarget}on(t,e,o){this.m_eventTarget.on(t.Type,e,o)}off(t,e,o){this.m_eventTarget.off(t.Type,e,o)}registAllNotice(t){if(t.noticeList)for(let e of t.noticeList)this.on(e.notice,t[e.methodName],t)}targetOff(t){this.m_eventTarget.targetOff(t)}emit(t){this.m_eventTarget.emit(t.getType(),t)}}o.NoticeCenter=r,o.noticeCenter=new r,o.onNotice=function(t){return function(e,o){e.noticeList||(e.noticeList=[]),e.noticeList.push({notice:t,methodName:o})}},cc._RF.pop()},{}],MKSocket:[function(t,e,o){"use strict";cc._RF.push(e,"9629bn3i9BIyKAXnP94lWgi","MKSocket"),Object.defineProperty(o,"__esModule",{value:!0}),o.onMsg=o.Socket=void 0;class n{constructor(){this.m_socket=null,this.m_eventTarget=new cc.EventTarget,this.m_connected=!1}connect(t){}disconnect(){this.m_connected=!1}isConnected(){return this.m_socket&&this.m_connected}send(t,e){}on(t,e,o){this.m_eventTarget.on(t.toString(),e,o)}off(t,e,o){this.m_eventTarget.off(t.toString(),e,o)}registAllMsg(t){if(t.msgList)for(let e of t.msgList)this.on(e.msgID,t[e.methodName],t)}targetOff(t){this.m_eventTarget.targetOff(t)}onConnect(t){this.m_connected=!0,this.m_eventTarget.emit(n.Connect,this,t)}onMessage(t){this.m_eventTarget.emit(n.Message,this,t),this.m_eventTarget.hasEventListener(t.msgID)?this.m_eventTarget.emit(t.msgID,t):cc.log("MKSocket err : no socket message handler, messageID = "+t.msgID)}onError(t){this.m_eventTarget.emit(n.Error,this,t),this.disconnect(),this.m_connected=!1}onClose(t){this.m_eventTarget.emit(n.Close,this,t),this.disconnect(),this.m_connected=!1}}o.Socket=n,n.Connect="Connect",n.Close="Close",n.Error="Error",n.Message="Message",o.onMsg=function(t){return function(e,o){e.msgList||(e.msgList=[]),e.msgList.push({msgID:t,methodName:o})}},cc._RF.pop()},{}],MKSystem:[function(t,e,o){"use strict";cc._RF.push(e,"a872ajJ9cJIZJgRz4rujdNB","MKSystem"),Object.defineProperty(o,"__esModule",{value:!0}),o.system=o.System=void 0;class n{constructor(){}getVersion(){return""}getVersionCode(){return 1}getPackageName(){return""}getMetaData(t){return""}getDeviceID(){return""}getLocation(){return""}getChannelID(){return""}copyStrToClipboard(t){}getFileMD5(t){return""}getPlatform(){return cc.sys.isNative?cc.sys.os==cc.sys.OS_ANDROID?cc.sys.OS_ANDROID:cc.sys.os==cc.sys.OS_IOS?cc.sys.OS_IOS:"Web":"Web"}getWakeUpData(){return""}shareText(t,e){}shareInWhatsApp(t){}}o.System=n;class r extends n{constructor(){super()}getVersion(){return"1.0.0"}getVersionCode(){return 1}getPackageName(){return"com.kbsgame.teenpatti"}getDeviceModel(){return""}getSystemVersion(){return""}getMetaData(t){return""}getLocation(){return""}getDeviceID(){return this.genMacFack()}getChannelID(){return"KBS"}genMacFack(){var t=cc.sys.localStorage.getItem("macFack");if(t)return t;t="";for(var e=0;e<6;e++){for(var o="",n=0;n<2;n++)o+="0123456789abcdef"[Math.ceil(15*Math.random())];t+=t?":"+o:o}return cc.sys.localStorage.setItem("macFack",t),t}}let i=null;i=cc.sys.isNative?cc.sys.os==cc.sys.OS_ANDROID?new class extends n{constructor(){super(),this.version="",this.versionCode=1,this.packageName="",this.channelID="",this.version=jsb.reflection.callStaticMethod("org/cocos2dx/lib/Cocos2dxHelper","getVersion","()Ljava/lang/String;"),this.packageName=jsb.reflection.callStaticMethod("org/cocos2dx/lib/Cocos2dxHelper","getPackageName","()Ljava/lang/String;"),this.channelID=this.getMetaData("APP_CHANNEL");try{this.versionCode=jsb.reflection.callStaticMethod("com/mk/common/MKSystem","getVersionCode","()J")}catch(t){}}getVersion(){return this.version}getVersionCode(){return this.versionCode}getPackageName(){return this.packageName}getDeviceModel(){return jsb.reflection.callStaticMethod("org/cocos2dx/lib/Cocos2dxHelper","getDeviceModel","()Ljava/lang/String;")}getSystemVersion(){return jsb.reflection.callStaticMethod("org/cocos2dx/lib/Cocos2dxHelper","getSystemVersion","()Ljava/lang/String;")}getMetaData(t){return jsb.reflection.callStaticMethod("com/mk/common/MKSystem","getMetaData","(Ljava/lang/String;)Ljava/lang/String;",t)}getDeviceID(){return jsb.reflection.callStaticMethod("com/mk/common/MKSystem","getDeviceID","()Ljava/lang/String;")}getLocation(){return jsb.reflection.callStaticMethod("com/mk/common/MKSystem","getLocation","()Ljava/lang/String;")}getChannelID(){return this.channelID}copyStrToClipboard(t){jsb.reflection.callStaticMethod("com/mk/common/MKSystem","copyStrToClipboard","(Ljava/lang/String;)V",t)}getFileMD5(t){return jsb.reflection.callStaticMethod("com/mk/common/MKSystem","getFileMD5","(Ljava/lang/String;)Ljava/lang/String;",t)}getWakeUpData(){return this.getVersionCode()<43?"":jsb.reflection.callStaticMethod("com/mk/common/MKSystem","getWakeUpData","()Ljava/lang/String;")}shareText(t,e){if(!(this.getVersionCode()<50))return jsb.reflection.callStaticMethod("com/mk/common/MKSystem","shareText","(Ljava/lang/String;Ljava/lang/String;)V",t,e)}shareInWhatsApp(t){if(!(this.getVersionCode()<50))return jsb.reflection.callStaticMethod("com/mk/common/MKSystem","shareToApp","(Ljava/lang/String;Ljava/lang/String;)V","com.whatsapp",t)}}:cc.sys.os==cc.sys.OS_IOS?new class extends n{constructor(){super(),this.version="",this.packageName="",this.channelID="",this.channelID=this.getMetaData("APP_CHANNEL")}getVersion(){return this.version}getPackageName(){return this.packageName}getMetaData(t){return jsb.reflection.callStaticMethod("MKSystem","getMetaData:",t)}getChannelID(){return this.channelID}copyStrToClipboard(t){jsb.reflection.callStaticMethod("MKSystem","copyStrToClipboard:",t)}getFileMD5(t){return jsb.reflection.callStaticMethod("MKSystem","getFileMD5:",t)}}:new r:new r,o.system=i,cc._RF.pop()},{}],MKUtils:[function(t,e,o){"use strict";cc._RF.push(e,"67818ViSbNBt7n0lfXcd04e","MKUtils"),Object.defineProperty(o,"__esModule",{value:!0}),o.Utils=void 0;class n{static randRange(t,e){return Math.floor(Math.random()*(e-t+1))+t}static strMaxCut(t,e){for(var o="",n=0,r=0;r<t.length;r++){var i=t[r];i.charCodeAt(0)>255?n+=2:n++,n<=e&&(o+=i)}return n>e?o+"...":o}static dateFormat(t,e){var o=new Date(e);let n;const r={"Y+":o.getFullYear().toString(),"m+":(o.getMonth()+1).toString(),"d+":o.getDate().toString(),"H+":o.getHours().toString(),"M+":o.getMinutes().toString(),"S+":o.getSeconds().toString()};for(let i in r)(n=new RegExp("("+i+")").exec(t))&&(t=t.replace(n[1],1==n[1].length?r[i]:r[i].padStart(n[1].length,"0")));return t}static getUrlParams(){if(cc.sys.isNative)return{};var t=window.location.search;return n.parseUrlParams(t)}static parseUrlParams(t){var e={},o=t.indexOf("?");if(-1!=o)for(var n=t.substr(o+1).split("&"),r=0;r<n.length;r++)e[n[r].split("=")[0]]=n[r].split("=")[1];return e}static resize(){var t=cc.find("Canvas").getComponent(cc.Canvas);this.curDR||(this.curDR=t.designResolution);var e=this.curDR,o=cc.view.getFrameSize(),n=o.width,r=o.height,i=n,s=r;n/r>e.width/e.height?i=(s=e.height)*n/r:s=r/n*(i=e.width),t.designResolution=cc.size(i,s),t.node.width=i,t.node.height=s,t.node.emit("resize")}static maxCountElement(t){let e={};for(let i=0;i<t.length;i++){let o=t[i];e[o]?e[o]++:e[o]=1}let o=0,n=[],r=[];for(let i in e)o<e[i]?(o=e[i],n[0]=i,r.length=0):o===e[i]&&r.push(i);if(r.length>0)for(let i=0;i<r.length;i++)n.push(r[i]);return n}static isEmail(t){return/^\w+((-\w+)|(\.\w+))*\@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z]+$/.test(t)}static isPhone(t){return/^(\d*)$/.test(t)}static isUserName(t){return/^[A-Za-z0-9][A-Za-z0-9\s]*[A-Za-z0-9]$/.test(t)}}o.Utils=n,n.curDR=null,cc._RF.pop()},{}],MenuLayer:[function(t,e,o){"use strict";cc._RF.push(e,"0de2b6hsk5OQo/U/taIk3GO","MenuLayer");var n=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});const r=t("../MobileKit/MKIndex"),i=t("./Common/PopupBase"),s=t("./Common/PopupManager"),a=t("../Business/Data/CommonDefine"),c=t("../Business/Data/SaveDataManager"),{ccclass:l,property:h,menu:u}=cc._decorator;let p=class extends i.default{constructor(){super(...arguments),this.animationDuration=0,this.btnPaytable=null,this.btnHelp=null,this.btnLanguage=null,this.btnRecord=null,this.imgMusic=null,this.imgSound=null,this.imgMusicOn=null,this.imgMusicOff=null,this.imgSoundOn=null,this.imgSoundOff=null,this.musicOn=!1,this.soundOn=!1}static get path(){return"Scenes/Game/menu_layer"}onLoad(){this.main||(this.main=this.node),this.btnPaytable.on(cc.Node.EventType.TOUCH_END,this.onTouchPaytable,this),this.btnHelp.on(cc.Node.EventType.TOUCH_END,this.onTouchHelp,this),this.btnRecord.on(cc.Node.EventType.TOUCH_END,this.onTouchRecord,this),this.musicOn=c.default.getMusicEnable(),this.soundOn=c.default.getEffectEnable(),this.imgMusic.spriteFrame=this.musicOn?this.imgMusicOn:this.imgMusicOff,this.imgSound.spriteFrame=this.soundOn?this.imgSoundOn:this.imgSoundOff}onTouchClose(){this.hide()}onTouchPaytable(){s.default.show(a.PrefabList.PaytableLayer),this.hide()}onTouchHelp(){s.default.show(a.PrefabList.HelpLayer),this.hide()}onTouchRecord(){s.default.show(a.PrefabList.GameRecordLayer),this.hide()}onTouchMusic(){this.musicOn=!this.musicOn,this.imgMusic.spriteFrame=this.musicOn?this.imgMusicOn:this.imgMusicOff,c.default.setMusicEnable(this.musicOn),r.AudioEngine.setMusicEnabled(this.musicOn)}onTouchSound(){this.soundOn=!this.soundOn,this.imgSound.spriteFrame=this.soundOn?this.imgSoundOn:this.imgSoundOff,c.default.setEffectEnable(this.soundOn),r.AudioEngine.setEffectsEnabled(this.soundOn),r.AudioEngine.playEffect(a.SoundList.Click)}};n([h(cc.Node)],p.prototype,"btnPaytable",void 0),n([h(cc.Node)],p.prototype,"btnHelp",void 0),n([h(cc.Node)],p.prototype,"btnLanguage",void 0),n([h(cc.Node)],p.prototype,"btnRecord",void 0),n([h(cc.Sprite)],p.prototype,"imgMusic",void 0),n([h(cc.Sprite)],p.prototype,"imgSound",void 0),n([h(cc.SpriteFrame)],p.prototype,"imgMusicOn",void 0),n([h(cc.SpriteFrame)],p.prototype,"imgMusicOff",void 0),n([h(cc.SpriteFrame)],p.prototype,"imgSoundOn",void 0),n([h(cc.SpriteFrame)],p.prototype,"imgSoundOff",void 0),p=n([l],p),o.default=p,cc._RF.pop()},{"../Business/Data/CommonDefine":"CommonDefine","../Business/Data/SaveDataManager":"SaveDataManager","../MobileKit/MKIndex":"MKIndex","./Common/PopupBase":"PopupBase","./Common/PopupManager":"PopupManager"}],MessageView:[function(t,e,o){"use strict";cc._RF.push(e,"46174h9izpKHKj9zlyrAHrr","MessageView");var n,r=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});const{ccclass:i,property:s}=cc._decorator;let a=n=class extends cc.Component{constructor(){super(...arguments),this.imgBg=null,this.text=null}onLoad(){}onDestroy(){}animate(t=2){this.node.stopAllActions(),cc.tween(this.node).delay(t).call(()=>{this.node.removeFromParent()}).start()}show(t,e){this.text.string=t,this.animate(e)}static show(t,e){if(null==n.defaultSkin){let t=cc.resources.get("Scenes/Common/MessageView",cc.Prefab);if(null==t)return void cc.log("Please init MessageView defaultSkin on app init");n.defaultSkin=t}n.showWithFile(n.defaultSkin,t,e)}static showWithFile(t,e,o){null==n.g_persistRootNode&&(n.g_persistRootNode=new cc.Node,n.g_persistRootNode.width=cc.winSize.width,n.g_persistRootNode.height=cc.winSize.height,n.g_persistRootNode.x=cc.winSize.width/2,n.g_persistRootNode.y=cc.winSize.height/2,cc.game.addPersistRootNode(n.g_persistRootNode)),(n.g_persistRootNode.width<cc.winSize.width||n.g_persistRootNode.height<cc.winSize.height)&&(n.g_persistRootNode.width=cc.winSize.width,n.g_persistRootNode.height=cc.winSize.height,n.g_persistRootNode.x=cc.winSize.width/2,n.g_persistRootNode.y=cc.winSize.height/2);let r=n.g_persistRootNode,i=null,s=r.getChildByName("MessageView");null==s?((i=cc.instantiate(t).getComponent(n)).node.name="MessageView",i.node.x=cc.winSize.width/2,i.node.y=cc.winSize.height/2,r.addChild(i.node)):i=s.getComponent(n),i.show(e,o)}};a.defaultSkin=null,a.g_persistRootNode=null,r([s(cc.Sprite)],a.prototype,"imgBg",void 0),r([s(cc.Label)],a.prototype,"text",void 0),a=n=r([i],a),o.default=a,cc._RF.pop()},{}],NetworkConstants:[function(t,e,o){"use strict";cc._RF.push(e,"670a7mMGfNFBZ5dvBazXYJa","NetworkConstants"),Object.defineProperty(o,"__esModule",{value:!0}),o.MsgCBNtf=o.MsgCBAck=o.MsgCBReq=o.MsgCB=o.MsgBaseNtf=o.MsgBaseAck=o.MsgBaseReq=o.MsgBase=o.MsgNtfMark=o.MsgAckMark=o.MsgTypeMark=o.MsgModeMark=o.MsgCodeOK=void 0,o.MsgCodeOK=200,o.MsgModeMark=1e6,o.MsgTypeMark=1e4,o.MsgAckMark=2*o.MsgTypeMark,o.MsgNtfMark=3*o.MsgTypeMark,o.MsgBase=1*o.MsgModeMark,o.MsgBaseReq=o.MsgBase,o.MsgBaseAck=o.MsgBase+o.MsgAckMark,o.MsgBaseNtf=o.MsgBase+o.MsgNtfMark,o.MsgCB=2*o.MsgModeMark,o.MsgCBReq=o.MsgCB,o.MsgCBAck=o.MsgCB+o.MsgAckMark,o.MsgCBNtf=o.MsgCB+o.MsgNtfMark,cc._RF.pop()},{}],NetworkController:[function(t,e,o){"use strict";cc._RF.push(e,"56f188UTbdI+qVXVv/UcjG4","NetworkController");var n=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0}),o.NetworkController=o.CmdBroadcastTest=o.CmdTokenLogin=o.CmdGetServerConfig=void 0;const r=t("../../MobileKit/MKIndex"),i=t("../../Business/Data/ConfigManager"),s=t("../../Business/Data/DataManager"),a=t("../../Business/Data/CommonDefine"),c=t("./NetworkNotice"),l=t("../NetWork/NetworkManager"),h=t("../NetWork/NetworkConstants"),u=t("socket.io-client"),p=t("laravel-echo");let d=class{};d=n([r.createCommand],d),o.CmdGetServerConfig=d;let f=class{};f=n([r.createCommand],f),o.CmdTokenLogin=f;let g=class{};g=n([r.createCommand],g),o.CmdBroadcastTest=g;class m extends r.Controller{constructor(){super(),this.m_socket=null,this.m_windowsEcho=window.Echo,this.m_echo=null,this.setName("NetworkController"),r.noticeCenter.registAllNotice(this),r.commandCenter.registAllCommand(this),this.m_socket=l.default.getInstance().getCommonSocket(),this.m_socket.registAllMsg(this),this.m_heartBeatHandler=new r.HeartBeatHandler,this.m_heartBeatHandler.logName="[Socket]",this.m_heartBeatHandler.idle=10,this.m_heartBeatHandler.idleCallBack=this.sendIdle.bind(this),this.m_heartBeatHandler.timeOutCallBack=this.onHeartBeatTimeOut.bind(this)}onExit(){r.noticeCenter.targetOff(this),r.commandCenter.targetOff(this)}onCmdGetServerConfig(t){var e=i.default.urlConfig.base+"getconfig",o={};o.channel=r.system.getChannelID(),o.package=r.system.getPackageName(),o.version=r.system.getVersion(),o.deviceid=r.system.getDeviceID(),cc.log("getconfig params = "+JSON.stringify(o)),r.Http.get(e,o,this.onSetting.bind(this))}onSetting(t,e){if(t&&(cc.log("getconfig result = ",JSON.stringify(e)),200==e.code)){let t=s.default.homeData;t.setChipsUnit(e.chipUnit),t.setGameId(e.gameid)}}onCmdTokenLogin(t){let e=i.default.urlConfig.base+"api/auth/login",o={platform:"JhandiMundaSingle",platform_token:"3345678"};o.token=s.default.userData.getToken(),cc.log("login params = "+JSON.stringify(o)),r.Http.post(e,o,this.onNetTokenLogin.bind(this))}onNetTokenLogin(t,e){t?200==e.code?(this.setUserData(e.data[0]),r.noticeCenter.emit(new c.NtcLogin(0))):this.loginSDKFailed(e.code):this.loginSDKFailed()}setUserData(t){let e=t.user_info[0],o=s.default.userData;o.setUid(e.user_id),o.setToken(t.access_token);let n=[];t.user_info.record.forEach(t=>{let e=new a.RecordData;e.time=new Date(t.created_at).getTime(),e.balance=t.round_amount,e.isWin=t.big_win,n.push(e)}),s.default.userData.setGameRecordLst(n),s.default.homeData.setWs("https://adminapi.lgnetwork.fun/socket.io")}loginSDKFailed(t,e){null==t&&(t=1),r.noticeCenter.emit(new c.NtcLogin(t))}connectServer(){let e=s.default.homeData.getWs();window.io=u,window.io=t("socket.io-client"),this.m_echo=new p.default({broadcaster:"socket.io",host:e}),this.m_echo,this.m_echo.channel("mychannel").listen("BroadcastEvent",t=>{console.log("ANGO : Echo : ",t)})}onConnect(){cc.log("[Socket] connect server success!"),cc.log("[send] Token ="+JSON.stringify(void 0)),this.m_socket.send(h.MsgBaseReq+"AckToken",void 0)}onNetAckToken(t){if(cc.log("[receive] TokenRsp code = "+t.state.code),t.state.code!=h.MsgCodeOK)return cc.log("Rsp info = "+t.state.info),void r.noticeCenter.emit(new c.NtcLogin(2));var e=t.body;cc.log("TokenRsp = "+JSON.stringify(e)),s.default.userData.setLogined(!0),this.m_heartBeatHandler.startIdle()}onMessage(){this.m_heartBeatHandler.onReceiveHeartBeat()}sendIdle(){}onHeartBeatTimeOut(){cc.log("[Socket] onHeartBeatTimeOut"),this.onServerDisconnect()}onNetAckHeart(t){this.m_heartBeatHandler.onReceiveHeartBeat()}onServerDisconnect(){this.m_heartBeatHandler.stopIdle(),this.m_socket.disconnect(),s.default.userData.setLogined(!1)}onBroadcastTest(){for(let t=0;t<10;t++){let e={};e.player="Player"+t,e.amount=r.Utils.randRange(30,1304),this.onNetBroadcast(e)}}onNetBroadcast(t){let e=t;cc.log("[receive] GameWordNews = "+JSON.stringify(e));let o=r.LocalLang.get("lobby_broadcast_win",[e.player,e.amount]);s.default.homeData.getBroadcastData().addPushNotice(o,2)}}n([r.onCommand(d)],m.prototype,"onCmdGetServerConfig",null),n([r.onCommand(f)],m.prototype,"onCmdTokenLogin",null),n([r.onMsg(r.Socket.Connect)],m.prototype,"onConnect",null),n([r.onMsg(h.MsgBaseAck+"AckToken")],m.prototype,"onNetAckToken",null),n([r.onMsg(r.Socket.Message)],m.prototype,"onMessage",null),n([r.onMsg(h.MsgBaseAck)],m.prototype,"onNetAckHeart",null),n([r.onCommand(g)],m.prototype,"onBroadcastTest",null),n([r.onMsg("GET_BROADCAST")],m.prototype,"onNetBroadcast",null),o.NetworkController=m,cc._RF.pop()},{"../../Business/Data/CommonDefine":"CommonDefine","../../Business/Data/ConfigManager":"ConfigManager","../../Business/Data/DataManager":"DataManager","../../MobileKit/MKIndex":"MKIndex","../NetWork/NetworkConstants":"NetworkConstants","../NetWork/NetworkManager":"NetworkManager","./NetworkNotice":"NetworkNotice","laravel-echo":34,"socket.io-client":38}],NetworkManager:[function(t,e,o){"use strict";cc._RF.push(e,"fde8eQasMBHsK4UOZ57A4Dp","NetworkManager"),Object.defineProperty(o,"__esModule",{value:!0});const n=t("./GameSocket");class r{constructor(){this.m_commonSocket=new n.default}getCommonSocket(){return this.m_commonSocket}}o.default=r,r.sharedManager=null,r.getInstance=function(){return null===r.sharedManager&&(r.sharedManager=new r),r.sharedManager},cc._RF.pop()},{"./GameSocket":"GameSocket"}],NetworkNotice:[function(t,e,o){"use strict";cc._RF.push(e,"dcce6iOurFKsYzb0t5YwJu5","NetworkNotice");var n=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0}),o.NtcGetServerConfig=o.NtcDisconnect=o.NtcLogin=void 0;const r=t("../../MobileKit/MKIndex");let i=class{constructor(t){this.result=t}};i=n([r.createNotice],i),o.NtcLogin=i;let s=class{constructor(t){this.reason=t}};s=n([r.createNotice],s),o.NtcDisconnect=s;let a=class{};a=n([r.createNotice],a),o.NtcGetServerConfig=a,cc._RF.pop()},{"../../MobileKit/MKIndex":"MKIndex"}],PlayerData:[function(t,e,o){"use strict";cc._RF.push(e,"c5a2bFZbYZPo6Xac8ibBW/Q","PlayerData"),Object.defineProperty(o,"__esModule",{value:!0}),o.PlayerData=void 0,o.PlayerData=class{constructor(){this.m_seat=-1,this.m_uid="",this.m_nickName="",this.m_sex=1,this.m_chips=0,this.m_headUrl="",this.m_playing=!1,this.m_isBanker=!1,this.m_handCards=null,this.m_point=0,this.m_dropped=!1,this.m_confirmed=!1,this.m_isWinner=!1,this.m_winLose=0,this.m_cardGroup=null,this.m_seat=-1,this.m_uid="",this.m_nickName="",this.m_sex=1,this.m_chips=0,this.m_headUrl="",this.m_playing=!1,this.m_handCards=[],this.m_cardGroup=[]}resetAllData(){this.m_seat=-1,this.m_uid="",this.m_nickName="",this.m_chips=0,this.m_headUrl="",this.resetGameData()}resetGameData(){this.m_handCards.length=0,this.m_isBanker=!1,this.m_dropped=!1,this.m_confirmed=!1,this.m_isWinner=!1,this.m_winLose=0}setSeat(t){this.m_seat=t}getSeat(){return this.m_seat}setUid(t){this.m_uid=t}getUid(){return this.m_uid}setNickName(t){this.m_nickName=t}getNickName(){return this.m_nickName}getSex(){return this.m_sex}setSex(t){this.m_sex=t}getHeadUrl(){return this.m_headUrl}setHeadUrl(t){this.m_headUrl=t}getChips(){return this.m_chips}setChips(t){this.m_chips=t}isPlaying(){return this.m_playing}setPlaying(t){this.m_playing=t}isBanker(){return this.m_isBanker}setBanker(){this.m_isBanker=!0}getPoint(){return this.m_point}setPoint(t){this.m_point=t}isDropped(){return this.m_dropped}setDropped(t){this.m_dropped=t}isConfirmed(){return this.m_confirmed}setConfirmed(t){this.m_confirmed=t}isWinner(){return this.m_isWinner}setWinner(t){this.m_isWinner=t}getHandCards(){return this.m_handCards}setHandCards(t){this.m_handCards=t}getCardGroup(){return this.m_cardGroup}setCardGroup(t){this.m_cardGroup=t}setWinLose(t){this.m_winLose=t}getWinLose(){return this.m_winLose}},cc._RF.pop()},{}],PlayerNode:[function(t,e,o){"use strict";cc._RF.push(e,"6b013O+pRZGnaVlS1ZVz4wG","PlayerNode");var n=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});const r=t("../MobileKit/MKIndex"),i=t("../Business/Data/DataManager"),s=t("../Business/Data/CommonDefine"),a=t("../Business/Logic/GameNotice"),c=t("./Common/UIUtils"),l=t("./Common/PrefabPool"),h=t("./PokerNode"),{ccclass:u,property:p,menu:d}=cc._decorator;let f=class extends cc.Component{constructor(){super(...arguments),this.txtSeat=null,this.imgSeat=null,this.imgProgress=null,this.imgLost=null,this.txtLost=null,this.txtDrop=null,this.headMask=null,this.bgTableChips=null,this.txtLostChips=null,this.imgWinner=null,this.tableCardPosLeft=null,this.tableCardPosRight=null,this.tableChipsPos=null,this.flyCard=null,this.player=null,this.gameData=null,this.panelLostChipsBig=.8,this.panelLostChipsSmall=.5}onLoad(){r.noticeCenter.registAllNotice(this),this.gameData=i.default.gameData,this.initUI()}initUI(){let t=l.default.get(s.PrefabList.PokerNode);t.setParent(this.node),t.setPosition(0,0),t.active=!1,this.flyCard=t.getComponent(h.default),this.imgWinner.node.removeFromParent(),this.clearGame()}clearGame(){this.imgLost.node.active=!1,this.imgLost.node.scale=1,this.imgLost.node.stopAllActions(),this.bgTableChips&&(this.bgTableChips.active=!1,this.bgTableChips.scale=this.panelLostChipsBig,this.bgTableChips.stopAllActions()),this.setDropped(!1),this.setPlaying(!0),this.stopProgress()}setTablePos(t,e,o){this.tableCardPosLeft=this.node.convertToNodeSpaceAR(t.parent.convertToWorldSpaceAR(t.position)),this.tableCardPosRight=this.node.convertToNodeSpaceAR(e.parent.convertToWorldSpaceAR(e.position)),this.tableChipsPos=this.node.convertToNodeSpaceAR(o.parent.convertToWorldSpaceAR(o.position))}sitDown(t){this.player=t,this.imgSeat.node.active=!0,this.setDropped(this.player.isDropped()),this.setPlaying(this.player.isPlaying()),this.stopProgress(),this.txtSeat.string=this.player.getSeat().toString(),this.player.isWinner()}standUp(){this.player=null,this.imgSeat.node.active=!1,this.stopProgress(),this.clearGame()}startProgress(){let t=this.gameData.getStageLeftTime();this.stopProgress(),this.imgProgress.node.active=!0,this.imgProgress.progress=1,cc.tween(this.imgProgress).to(t,{progress:0}).start(),cc.tween(this.imgProgress.node).delay(t-3).call(()=>{r.AudioEngine.playEffect(s.SoundList.Alarm)}).delay(1).call(()=>{r.AudioEngine.playEffect(s.SoundList.Alarm)}).start()}stopProgress(){this.imgProgress.node.active=!1,this.imgProgress.node.stopAllActions()}setPlaying(t){this.headMask.node.active=!t}setDropped(t){this.headMask.node.active=t,this.txtDrop.node.active=t}discard(t,e){let o=this.flyCard;o.setPoker(t),c.UIUtils.setJokerFlag(o),o.node.active=!0,o.node.stopAllActions(),o.node.x=0,o.node.y=0,o.node.scale=s.PlayerCardScale;let n=cc.tween(o.node);n.to(s.DrawCardFlyTime,{x:this.tableCardPosRight.x,y:this.tableCardPosRight.y,scale:s.TableCardScale}),n.call(()=>{e(),o.node.active=!1}),n.start()}drawCard(){let t=this.flyCard;t.setPoker(-1),t.node.active=!0,t.node.stopAllActions(),t.node.x=this.tableCardPosLeft.x,t.node.y=this.tableCardPosLeft.y,t.node.scale=s.TableCardScale;let e=cc.tween(t.node);e.to(s.DrawCardFlyTime,{x:0,y:0,scale:s.PlayerCardScale}),e.delay(.3),e.call(()=>{t.node.active=!1}),e.start()}chowCard(t){let e=this.flyCard;e.setPoker(t),c.UIUtils.setJokerFlag(e),e.node.active=!0,e.node.stopAllActions(),e.node.x=this.tableCardPosRight.x,e.node.y=this.tableCardPosRight.y,e.node.scale=s.TableCardScale;let o=cc.tween(e.node);o.to(s.DrawCardFlyTime,{x:0,y:0,scale:s.PlayerCardScale}),o.delay(.3),o.call(()=>{e.node.active=!1}),o.start()}winChips(t){this.setWinner(!0),r.AudioEngine.playEffect("Sound/RMGame/chips"),this.bgTableChips.active=!0,this.bgTableChips.position=this.tableChipsPos,this.bgTableChips.scale=this.panelLostChipsBig,this.txtLostChips.string=c.UIUtils.getShortNumber(t),this.bgTableChips.stopAllActions();let e=cc.tween(this.bgTableChips);e.to(.5,{scale:this.panelLostChipsSmall,x:0,y:0}),e.delay(.5),e.call(()=>{this.bgTableChips.active=!1}),e.start()}loseChips(t,e,o){this.stopProgress(),this.bgTableChips.active=!0,this.bgTableChips.x=0,this.bgTableChips.y=0,this.bgTableChips.scale=this.panelLostChipsSmall,this.txtLostChips.string=c.UIUtils.getShortNumber(e),this.bgTableChips.stopAllActions();let n=cc.tween(this.bgTableChips);n.to(.5,{scale:this.panelLostChipsBig,position:this.tableChipsPos}),n.call(()=>{this.bgTableChips.active=!1,this.showLostPoint(t),o()}),n.start()}showLostPoint(t){this.imgLost.node.active=!0,this.imgLost.node.stopAllActions(),this.txtLost.string="Lost at "+t,this.imgLost.node.scale=.5;let e=cc.tween(this.imgLost.node);e.to(.4,{scale:1}),e.start()}setWinner(t){if(t){if(this.imgWinner.node.active)return;this.imgWinner.node.active=!0}else this.imgWinner.node.active=!1}onNtcResetGame(){this.player=null,this.clearGame()}onNtcDealCards(){this.clearGame()}onNtcWaitDiscard(t){this.player&&(t.seat==this.player.getSeat()?this.startProgress():this.stopProgress())}onWaitPickCard(t){this.player&&(t.seat==this.player.getSeat()?this.startProgress():this.stopProgress())}onNtcDrop(t){this.player&&this.player.getSeat()==t.seat&&(this.setDropped(!0),this.stopProgress())}onNtcShow(t){this.player&&(t.seat==this.player.getSeat()?(this.stopProgress(),this.setWinner(!0)):!this.player.isDropped()&&this.player.isPlaying()&&this.startProgress())}onNtcConfirmGroup(t){this.player&&this.player.getSeat()==t.seat&&this.stopProgress()}onNtcFinish(t){this.player&&this.stopProgress()}};n([p({type:cc.Label,displayName:""})],f.prototype,"txtSeat",void 0),n([p({type:cc.Sprite,displayName:""})],f.prototype,"imgSeat",void 0),n([p(cc.ProgressBar)],f.prototype,"imgProgress",void 0),n([p(cc.Sprite)],f.prototype,"imgLost",void 0),n([p(cc.Label)],f.prototype,"txtLost",void 0),n([p(cc.Label)],f.prototype,"txtDrop",void 0),n([p(cc.Sprite)],f.prototype,"headMask",void 0),n([p(cc.Node)],f.prototype,"bgTableChips",void 0),n([p(cc.Label)],f.prototype,"txtLostChips",void 0),n([p(cc.Sprite)],f.prototype,"imgWinner",void 0),n([r.onNotice(a.NtcResetGame)],f.prototype,"onNtcResetGame",null),n([r.onNotice(a.NtcDealCards)],f.prototype,"onNtcDealCards",null),n([r.onNotice(a.NtcWaitDiscard)],f.prototype,"onNtcWaitDiscard",null),n([r.onNotice(a.NtcWaitPickCard)],f.prototype,"onWaitPickCard",null),n([r.onNotice(a.NtcDrop)],f.prototype,"onNtcDrop",null),n([r.onNotice(a.NtcShow)],f.prototype,"onNtcShow",null),n([r.onNotice(a.NtcConfirmGroup)],f.prototype,"onNtcConfirmGroup",null),n([r.onNotice(a.NtcFinish)],f.prototype,"onNtcFinish",null),f=n([u],f),o.default=f,cc._RF.pop()},{"../Business/Data/CommonDefine":"CommonDefine","../Business/Data/DataManager":"DataManager","../Business/Logic/GameNotice":"GameNotice","../MobileKit/MKIndex":"MKIndex","./Common/PrefabPool":"PrefabPool","./Common/UIUtils":"UIUtils","./PokerNode":"PokerNode"}],PokerData:[function(t,e,o){"use strict";var n,r;cc._RF.push(e,"49959S7SupJO7nuVF1YYdst","PokerData"),Object.defineProperty(o,"__esModule",{value:!0}),o.PokerData=o.PokerRedJoker=o.PokerBlackJoker=o.PokerCount=o.PokerPointCount=o.PokerPoint=o.PokerColor=void 0,function(t){t[t.Diamond=0]="Diamond",t[t.Club=1]="Club",t[t.Heart=2]="Heart",t[t.Spade=3]="Spade",t[t.Joker=4]="Joker"}(n=o.PokerColor||(o.PokerColor={})),function(t){t[t.PointA=0]="PointA",t[t.Point2=1]="Point2",t[t.Point3=2]="Point3",t[t.Point4=3]="Point4",t[t.Point5=4]="Point5",t[t.Point6=5]="Point6",t[t.Point7=6]="Point7",t[t.Point8=7]="Point8",t[t.Point9=8]="Point9",t[t.Point10=9]="Point10",t[t.PointJ=10]="PointJ",t[t.PointQ=11]="PointQ",t[t.PointK=12]="PointK",t[t.Joker=13]="Joker"}(r=o.PokerPoint||(o.PokerPoint={})),o.PokerPointCount=13,o.PokerCount=54,o.PokerBlackJoker=52,o.PokerRedJoker=53;class i{constructor(){this.color=0,this.point=-1,this.code=-1,this.color=0,this.point=-1,this.code=-1}init(t){this.code=t,this.point=i.getPokerPoint(t),this.color=i.getPokerColor(t)}getPoint(){return this.point}getColor(){return this.color}getCode(){return this.code}static getPokerPoint(t){return i.isJoker(t)?r.Joker:(t%=o.PokerCount)%o.PokerPointCount}static getPokerColor(t){return i.isJoker(t)?n.Joker:(t%=o.PokerCount,Math.floor(t/o.PokerPointCount))}static isJoker(t){return(t%=o.PokerCount)==o.PokerBlackJoker||t==o.PokerRedJoker}}o.PokerData=i,cc._RF.pop()},{}],PokerNode:[function(t,e,o){"use strict";cc._RF.push(e,"63e095MnllNM6rVQopCo5Uy","PokerNode");var n=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});const r=t("../Business/Data/PokerData"),{ccclass:i,property:s,menu:a}=cc._decorator;let c=class extends cc.Component{constructor(){super(),this.upNumber=null,this.upImage=null,this.imgPokerBK=null,this.downImage=null,this.imgJokerFlag=null,this.imgJokerMask=null,this.bgShadow=null,this.poker=new r.PokerData}onLoad(){this.setJokerFlag(!1)}setPoker(t){this.poker.init(t),this.makePoker()}getPokerData(){return this.poker}makePoker(){let t=this.poker.getCode(),e=this.poker.getPoint(),o=this.poker.getColor();this.imgPokerBK.node.color=cc.Color.WHITE,this.bgShadow.node.active=!0,t<0?(this.upNumber.node.active=!1,this.upImage.node.active=!1,this.downImage.node.active=!1,this.bgShadow.node.active=!1,-2==t?(this.imgPokerBK.spriteFrame=cc.resources.get("Texture/Game/Poker/poker_bg",cc.SpriteFrame),this.imgPokerBK.node.color=(new cc.Color).fromHEX("3f3f3d")):this.imgPokerBK.spriteFrame=cc.resources.get("Texture/Game/Poker/poker_back",cc.SpriteFrame)):r.PokerData.isJoker(t)?(this.upNumber.node.active=!1,this.upImage.node.active=!1,this.downImage.node.active=!1,this.imgPokerBK.spriteFrame=cc.resources.get("Texture/Game/Poker/joker_big",cc.SpriteFrame)):e>=10?this.makeFaceCard(e,o):this.makeNormalPoker(e,o)}makeNormalPoker(t,e){let o="";switch(t){case r.PokerPoint.PointA:o="1";break;case r.PokerPoint.Point2:o="2";break;case r.PokerPoint.Point3:o="3";break;case r.PokerPoint.Point4:o="4";break;case r.PokerPoint.Point5:o="5";break;case r.PokerPoint.Point6:o="6";break;case r.PokerPoint.Point7:o="7";break;case r.PokerPoint.Point8:o="8";break;case r.PokerPoint.Point9:o="9";break;case r.PokerPoint.Point10:o="10"}let n="",i="";switch(e){case r.PokerColor.Spade:n=cc.js.formatStr("clubs_%s",o),i="spades_down";break;case r.PokerColor.Heart:n=cc.js.formatStr("diamonds_%s",o),i="hearts_down";break;case r.PokerColor.Club:n=cc.js.formatStr("clubs_%s",o),i="clubs_down";break;case r.PokerColor.Diamond:n=cc.js.formatStr("diamonds_%s",o),i="diamonds_down"}this.upNumber.node.active=!0,this.upImage.node.active=!0,this.downImage.node.active=!0,this.imgPokerBK.spriteFrame=cc.resources.get("Texture/Game/Poker/poker_bg",cc.SpriteFrame),this.upNumber.spriteFrame=cc.resources.get("Texture/Game/Poker/"+n,cc.SpriteFrame),this.upImage.spriteFrame=cc.resources.get("Texture/Game/Poker/"+i,cc.SpriteFrame),this.downImage.spriteFrame=cc.resources.get("Texture/Game/Poker/"+i,cc.SpriteFrame),t==r.PokerPoint.Point10?this.upNumber.node.scaleX=1.666:this.upNumber.node.scaleX=1}makeFaceCard(t,e){let o="";switch(t){case r.PokerPoint.PointJ:o="j";break;case r.PokerPoint.PointQ:o="q";break;case r.PokerPoint.PointK:o="k"}let n="";switch(e){case r.PokerColor.Spade:n="spades";break;case r.PokerColor.Heart:n="hearts";break;case r.PokerColor.Club:n="clubs";break;case r.PokerColor.Diamond:n="diamonds"}this.upNumber.node.active=!1,this.upImage.node.active=!1,this.downImage.node.active=!1,this.imgPokerBK.spriteFrame=cc.resources.get("Texture/Game/Poker/"+o+"_"+n,cc.SpriteFrame)}setJokerFlag(t){this.imgJokerFlag.node.active=t,this.imgJokerMask.node.active=t}};n([s(cc.Sprite)],c.prototype,"upNumber",void 0),n([s(cc.Sprite)],c.prototype,"upImage",void 0),n([s(cc.Sprite)],c.prototype,"imgPokerBK",void 0),n([s(cc.Sprite)],c.prototype,"downImage",void 0),n([s(cc.Sprite)],c.prototype,"imgJokerFlag",void 0),n([s(cc.Sprite)],c.prototype,"imgJokerMask",void 0),n([s(cc.Sprite)],c.prototype,"bgShadow",void 0),c=n([i,a("Game/PokerNode")],c),o.default=c,cc._RF.pop()},{"../Business/Data/PokerData":"PokerData"}],PopupBase:[function(t,e,o){"use strict";cc._RF.push(e,"b6107kAL7dMzqZ3iXRw2h4a","PopupBase");var n=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s},r=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function s(t){try{c(n.next(t))}catch(e){i(e)}}function a(t){try{c(n.throw(t))}catch(e){i(e)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(s,a)}c((n=n.apply(t,e||[])).next())})};Object.defineProperty(o,"__esModule",{value:!0});const{ccclass:i,property:s}=cc._decorator;let a=class extends cc.Component{constructor(){super(...arguments),this.background=null,this.main=null,this.animationDuration=.3,this.blocker=null,this.options=null,this.finishCallback=null}show(t,e){return r(this,void 0,void 0,function*(){this.options=t,this.init(t),this.updateDisplay(t),this.onBeforeShow&&(yield this.onBeforeShow()),null==e&&(e=e<0?0:this.animationDuration),yield this.playShowAnimation(e),this.onAfterShow&&this.onAfterShow()})}hide(t=!1,e){return r(this,void 0,void 0,function*(){const o=this.node;if(0!==e){let t=this.blocker;t||((t=this.blocker=new cc.Node("blocker")).addComponent(cc.BlockInputEvents),t.setParent(o),t.setContentSize(o.getContentSize())),t.active=!0}this.onBeforeHide&&(yield this.onBeforeHide(t)),null==e&&(e=e<0?0:this.animationDuration),yield this.playHideAnimation(e),this.blocker&&(this.blocker.active=!1),o.active=!1,this.onAfterHide&&this.onAfterHide(t),this.finishCallback&&this.finishCallback(t)})}playShowAnimation(t){return new Promise(e=>{const o=this.background,n=this.main;this.node.active=!0,o.active=!0,o.opacity=0,n.active=!0,n.scale=.5,n.opacity=0,cc.tween(o).to(.5*t,{opacity:150}).start(),cc.tween(n).to(t,{scale:1,opacity:255},{easing:"backOut"}).call(e).start()})}playHideAnimation(t){return new Promise(e=>{cc.tween(this.background).delay(.5*t).to(.5*t,{opacity:0}).start(),cc.tween(this.main).to(t,{scale:.5,opacity:0},{easing:"backIn"}).call(e).start()})}init(t){}updateDisplay(t){}onBeforeShow(){return new Promise(t=>t())}onAfterShow(){}onBeforeHide(t){return new Promise(t=>t())}onAfterHide(t){}onSuspended(){return new Promise(t=>t())}};n([s({type:cc.Node,tooltip:!1})],a.prototype,"background",void 0),n([s({type:cc.Node,tooltip:!1})],a.prototype,"main",void 0),a=n([i],a),o.default=a,cc._RF.pop()},{}],PopupManager:[function(t,e,o){"use strict";cc._RF.push(e,"c0ea1lR4GpK0bTmoo90xNjo","PopupManager");var n=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function s(t){try{c(n.next(t))}catch(e){i(e)}}function a(t){try{c(n.throw(t))}catch(e){i(e)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(s,a)}c((n=n.apply(t,e||[])).next())})};Object.defineProperty(o,"__esModule",{value:!0});const r=t("./PopupBase");var i,s;(function(t){t[t.Once=1]="Once",t[t.Normal=2]="Normal",t[t.Frequent=3]="Frequent"})(i||(i={})),function(t){t[t.Done=1]="Done",t[t.Failed=2]="Failed",t[t.Waiting=3]="Waiting"}(s||(s={}));class a{static get prefabCache(){return this._prefabCache}static get nodeCache(){return this._nodeCache}static get current(){return this._current}static get queue(){return this._queue}static get suspended(){return this._suspended}static get container(){return this._container||cc.Canvas.instance.node}static set container(t){this._container=t}static get CacheMode(){return i}static get ShowResultType(){return s}static show(t,e,o){return new Promise(i=>n(this,void 0,void 0,function*(){if(o=this.parseParams(o),this._current||this.locked){if(!o||!o.immediately)return this.push(t,e,o),void i(s.Waiting);this.locked=!1,yield this.suspend()}this._current={path:t,options:e,params:o};let a=this.getNodeFromCache(t);if(!cc.isValid(a)){this.loadStartCallback&&this.loadStartCallback();const e=yield this.load(t);if(this.loadFinishCallback&&this.loadFinishCallback(),!cc.isValid(e))return cc.warn("[PopupManager]","\u5f39\u7a97\u52a0\u8f7d\u5931\u8d25",t),this._current=null,void i(s.Failed);a=cc.instantiate(e)}const c=a.getComponent(r.default);if(!c)return cc.warn("[PopupManager]","\u672a\u627e\u5230\u5f39\u7a97\u7ec4\u4ef6",t),this._current=null,void i(s.Failed);this._current.popup=c,this._current.node=a,a.setParent(this.container),a.setSiblingIndex(cc.macro.MAX_ZINDEX),c.finishCallback=e=>n(this,void 0,void 0,function*(){e||(this.locked=this._suspended.length>0||this._queue.length>0,this.recycle(t,a,o.mode),this._current=null,i(s.Done),yield new Promise(t=>{cc.Canvas.instance.scheduleOnce(t,this.interval)}),this.next())}),c.show(e)}))}static hide(){null!=this._current&&cc.isValid(this._current.popup)&&this._current.popup.hide()}static getNodeFromCache(t){const e=this._nodeCache;if(e.has(t)){const o=e.get(t);if(cc.isValid(o))return o;e.delete(t)}const o=this._prefabCache;if(o.has(t)){const e=o.get(t);if(cc.isValid(e))return e.addRef(),cc.instantiate(e);o.delete(t)}return null}static next(){if(this._current||0===this._suspended.length&&0===this._queue.length)return;let t=null;if(t=this._suspended.length>0?this._suspended.shift():this._queue.shift(),this.locked=!1,cc.isValid(t.popup))return this._current=t,t.node.setParent(this.container),void t.popup.show(t.options);this.show(t.path,t.options,t.params)}static push(t,e,o){this._current||this.locked?(this._queue.push({path:t,options:e,params:o}),this._queue.sort((t,e)=>t.params.priority-e.params.priority)):this.show(t,e,o)}static suspend(){return n(this,void 0,void 0,function*(){if(!this._current)return;const t=this._current;this._suspended.push(t),yield t.popup.onSuspended(),yield t.popup.hide(!0),this._current=null})}static recycle(t,e,o){switch(o){case i.Once:this._nodeCache.delete(t),e.destroy(),this.release(t);break;case i.Normal:this._nodeCache.delete(t),e.destroy();break;case i.Frequent:e.removeFromParent(!1),this._nodeCache.set(t,e)}}static load(t){return new Promise(e=>{const o=this._prefabCache;if(o.has(t)){const n=o.get(t);if(cc.isValid(n))return void e(n);o.delete(t)}cc.resources.load(t,(n,r)=>{n?e(null):(o.set(t,r),e(r))})})}static release(t){const e=this._nodeCache;let o=e.get(t);o&&(e.delete(t),cc.isValid(o)&&o.destroy(),o=null);const n=this._prefabCache;let r=n.get(t);r&&(r.refCount<=1&&n.delete(t),r.decRef(),r=null)}static parseParams(t){return null==t?new c:"[object Object]"!==Object.prototype.toString.call(t)?(cc.warn("[PopupManager]","\u5f39\u7a97\u53c2\u6570\u65e0\u6548\uff0c\u4f7f\u7528\u9ed8\u8ba4\u53c2\u6570"),new c):(null==t.mode&&(t.mode=i.Normal),null==t.priority&&(t.priority=0),null==t.immediately&&(t.immediately=!1),t)}}o.default=a,a._prefabCache=new Map,a._nodeCache=new Map,a._current=null,a._queue=[],a._suspended=[],a.locked=!1,a._container=null,a.interval=.05,a.loadStartCallback=null,a.loadFinishCallback=null;class c{constructor(){this.mode=i.Normal,this.priority=0,this.immediately=!1}}cc._RF.pop()},{"./PopupBase":"PopupBase"}],PrefabPool:[function(t,e,o){"use strict";cc._RF.push(e,"66c96CKFiJAvYsrBV2ocv6V","PrefabPool");var n=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});const{ccclass:r,property:i}=cc._decorator;let s=class{static get(t,e=null){null==this.poolList[t]&&(this.poolList[t]=[]);let o,n=this.poolList[t];0==n.length?(o=cc.instantiate(cc.resources.get(t))).poolKey=t:o=n.pop();var r=e?o.getComponent(e):null;return r&&r.reuse&&r.reuse.apply(r,arguments),o}static put(t,e=null){let o=this.poolList[t.poolKey];if(o&&-1==o.indexOf(t)){t.removeFromParent(!1);var n=e?t.getComponent(e):null;n&&n.unuse&&n.unuse(),o.push(t)}}static clear(t){let e=this.poolList[t];if(e){for(let t=0,o=e.length;t<o;t++)e[t].destroy();e.length=0}}static clearAll(){for(let t in this.poolList)this.clear(t)}static size(t){let e=this.poolList[t];return e?e.length:0}};s.poolList={},s=n([r],s),o.default=s,cc._RF.pop()},{}],RecordCell:[function(t,e,o){"use strict";cc._RF.push(e,"75785MACgRG245YrCnREBEz","RecordCell");var n=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0}),o.RecordCell=void 0;const r=t("../../MobileKit/MKIndex"),i=t("../Common/UIUtils"),{ccclass:s,property:a,menu:c}=cc._decorator;let l=class extends cc.Component{constructor(){super(...arguments),this.txtBalance=null,this.txtDate=null,this.txtTime=null,this.txtWin=null}onLoad(){}setData(t){this.txtDate.string=r.Utils.dateFormat("dd.mm.YYYY",t.time),this.txtTime.string=r.Utils.dateFormat("HH:MM:SS",t.time),this.txtBalance.string=i.UIUtils.getShortNumber(t.balance),t.isWin?(this.txtWin.node.color=cc.Color.GREEN,this.txtWin.string="WIN",this.txtBalance.node.color=cc.Color.GREEN):(this.txtWin.node.color=cc.Color.RED,this.txtWin.string="LOST",this.txtBalance.node.color=cc.Color.RED)}};n([a(cc.Label)],l.prototype,"txtBalance",void 0),n([a(cc.Label)],l.prototype,"txtDate",void 0),n([a(cc.Label)],l.prototype,"txtTime",void 0),n([a(cc.Label)],l.prototype,"txtWin",void 0),l=n([s,c("Lobby/RecordCell")],l),o.RecordCell=l,cc._RF.pop()},{"../../MobileKit/MKIndex":"MKIndex","../Common/UIUtils":"UIUtils"}],RecordPage:[function(t,e,o){"use strict";cc._RF.push(e,"dd16dRnmJBB2IlydX2gyB4C","RecordPage");var n=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0}),o.RecordPage=void 0;const r=t("../../Business/Data/CommonDefine"),i=t("./RecordCell"),s=t("../Common/PrefabPool"),{ccclass:a,property:c,menu:l}=cc._decorator;let h=class extends cc.Component{constructor(){super(...arguments),this.recordNode=null,this.recordCellList=[]}onLoad(){for(let t=0;t<10;t++){let t=s.default.get(r.PrefabList.RecordCell),e=t.getComponent(i.RecordCell);t.setParent(this.recordNode),t.active=!1,this.recordCellList.push(e)}}setRecordList(t){this.showRecordList(t)}showRecordList(t){t.forEach((t,e)=>{this.recordCellList[e].setData(t),this.recordCellList[e].node.active=!0})}};n([c(cc.Node)],h.prototype,"recordNode",void 0),h=n([a,l("Lobby/RecordPage")],h),o.RecordPage=h,cc._RF.pop()},{"../../Business/Data/CommonDefine":"CommonDefine","../Common/PrefabPool":"PrefabPool","./RecordCell":"RecordCell"}],ResultCell:[function(t,e,o){"use strict";cc._RF.push(e,"57f5aPH8ohO6LqeOpWQVm3U","ResultCell");var n=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});const r=t("../MobileKit/MKIndex"),i=t("./Common/UIUtils"),s=t("./PokerNode"),a=t("../Business/Data/PokerData"),c=t("../Business/Data/CommonDefine"),l=t("./Common/PrefabPool"),{ccclass:h,property:u,menu:p}=cc._decorator;let d=class extends cc.Component{constructor(){super(...arguments),this.txtName=null,this.txtChips=null,this.txtScore=null,this.imgWinner=null,this.imgItemBg=null,this.txtLost=null,this.panelHandCards=null,this.circleList=[],this.jokerPoint=-1,this.handCardsList=null}onLoad(){let t=[];for(let e=0;e<c.DEAL_CARDS_COUNT;++e){let e=l.default.get(c.PrefabList.PokerNode).getComponent(s.default);e.node.active=!1,this.panelHandCards.addChild(e.node),t.push(e),e.node.scale=.35}this.handCardsList=t}onDestroy(){}setData(t,e){this.jokerPoint=e,this.txtName.string=r.Utils.strMaxCut(t.getNickName(),12),this.txtChips.string=i.UIUtils.getShortNumber(t.getWinLose()),this.txtScore.string=t.getPoint().toString(),t.isWinner()?(this.imgWinner.node.active=!0,this.txtLost.node.active=!1,this.imgItemBg.node.active=!0,this.circleList.forEach(t=>{t.color=(new cc.Color).fromHEX("#FFCD69")})):(this.imgWinner.node.active=!1,this.txtLost.node.active=!0,this.imgItemBg.node.active=!1,this.circleList.forEach(t=>{t.color=cc.Color.WHITE})),this.updateCardGroup(t.getCardGroup())}updateCardGroup(t){let e=this.handCardsList,o=[];for(let i=0;i<t.length;++i){let t=(new cc.Node).addComponent(cc.Sprite);t.spriteFrame=cc.resources.get("Texture/Game/img_group_red",cc.SpriteFrame),t.type=cc.Sprite.Type.SLICED,t.sizeMode=cc.Sprite.SizeMode.CUSTOM,this.panelHandCards.addChild(t.node),t.node.y=-25,t.node.height=14,o.push(t)}let n=e[0],r=n.node.width*n.node.scale,s=r/2.5,a=(this.panelHandCards.width-s*(c.MAX_GROUP-1)-5*r)/(c.DEAL_CARDS_COUNT-5),l=r/2,h=Math.min(l,a)+2,u=(t.length-1)*s;for(let i=0;i<t.length;++i)u+=(t[i].cards.length-1)*h+r;this.panelHandCards.width=u;let p=-u/2,d=0;for(let c=0;c<t.length;++c){let n=t[c],a=n.cards.length,l=o[c];l.node.width=(a-1)*h+r+10,l.node.x=p+l.node.width/2-5,i.UIUtils.setGroupFlag(l,n.groupFlag);for(let t=0;t<a;++t){let o=n.cards[t];if(d>=e.length)continue;let i=e[d];i.node.active=!0,i.setPoker(o),this.setJokerFlag(i),i.node.x=r/2+p,d++,p+=t==a-1?r:h}p+=s}}setJokerFlag(t){let e=t.getPokerData().getCode();t.setJokerFlag(a.PokerData.getPokerPoint(e)==this.jokerPoint)}};n([u(cc.Label)],d.prototype,"txtName",void 0),n([u(cc.Label)],d.prototype,"txtChips",void 0),n([u(cc.Label)],d.prototype,"txtScore",void 0),n([u(cc.Sprite)],d.prototype,"imgWinner",void 0),n([u(cc.Sprite)],d.prototype,"imgItemBg",void 0),n([u(cc.Label)],d.prototype,"txtLost",void 0),n([u(cc.Node)],d.prototype,"panelHandCards",void 0),n([u([cc.Node])],d.prototype,"circleList",void 0),d=n([h],d),o.default=d,cc._RF.pop()},{"../Business/Data/CommonDefine":"CommonDefine","../Business/Data/PokerData":"PokerData","../MobileKit/MKIndex":"MKIndex","./Common/PrefabPool":"PrefabPool","./Common/UIUtils":"UIUtils","./PokerNode":"PokerNode"}],ResultLayer:[function(t,e,o){"use strict";cc._RF.push(e,"1ed4fNOYxdAtIAHOWSyYuDz","ResultLayer");var n=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});const r=t("../MobileKit/MKIndex"),i=t("../Business/Data/DataManager"),s=t("./ResultCell"),a=t("../Business/Logic/GameNotice"),c=t("./Common/PopupBase"),{ccclass:l,property:h,menu:u}=cc._decorator;let p=class extends c.default{constructor(){super(...arguments),this.item=null,this.listContent=null,this.txtTips=null}onLoad(){this.item.active=!1,this.setListData(),this.showStartingTips(i.default.gameData.getStageLeftTime()),r.noticeCenter.registAllNotice(this)}onDestroy(){r.noticeCenter.targetOff(this)}setDelayShow(t){if(t>0){this.node.opacity=0;let e=cc.tween(this.node);e.delay(t),e.set({opacity:255}),e.start()}}onTouchClose(){this.hide()}onNtcPrepare(){this.showStartingTips(i.default.gameData.getStageLeftTime())}setListData(){let t=i.default.gameData.getResultData(),e=t.players;for(let o=0;o<e.length;++o){let n=cc.instantiate(this.item).getComponent(s.default);this.listContent.addChild(n.node),n.node.active=!0,n.setData(e[o],t.jokerPoint)}}showStartingTips(t){if(t<=0)return;t>30&&(t=30);let e=Math.floor(t)-1;if(e<=0)return void(this.txtTips.node.active=!1);this.txtTips.node.active=!0;let o=cc.tween(this.node);for(let n=e;n>0;n--)o.call(()=>{this.txtTips.string=r.LocalLang.get("game_result_new_game",[n])}),o.delay(1);o.call(()=>{this.txtTips.node.active=!1,this.hide()}),this.node.stopAllActions(),o.start()}};n([h(cc.Node)],p.prototype,"item",void 0),n([h(cc.Node)],p.prototype,"listContent",void 0),n([h(cc.Label)],p.prototype,"txtTips",void 0),n([r.onNotice(a.NtcDealCards)],p.prototype,"onTouchClose",null),n([r.onNotice(a.NtcPrepare)],p.prototype,"onNtcPrepare",null),p=n([l],p),o.default=p,cc._RF.pop()},{"../Business/Data/DataManager":"DataManager","../Business/Logic/GameNotice":"GameNotice","../MobileKit/MKIndex":"MKIndex","./Common/PopupBase":"PopupBase","./ResultCell":"ResultCell"}],SaveDataManager:[function(t,e,o){"use strict";cc._RF.push(e,"b5bf4wNauFNv7zVDbOkrZQ9","SaveDataManager"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=class{static init(){"1"!=cc.sys.localStorage.getItem("storageInited")&&(cc.sys.localStorage.setItem("isGameInitialized",1),cc.sys.localStorage.setItem("isEffect",1),cc.sys.localStorage.setItem("EffectVolume","1.0"),cc.sys.localStorage.setItem("isMusic",1),cc.sys.localStorage.setItem("MusicVolume","0.5"),cc.sys.localStorage.setItem("login_data",""),cc.sys.localStorage.setItem("update_version","0.0.0"),cc.sys.localStorage.setItem("storageInited",1),cc.sys.localStorage.setItem("AFConversionSource",0))}static setMusiceVolume(t){cc.sys.localStorage.setItem("MusicVolume",t+"")}static getMusiceVolume(){return parseFloat(cc.sys.localStorage.getItem("MusicVolume"))}static setEffectVolume(t){cc.sys.localStorage.setItem("EffectVolume",t+"")}static getEffectVolume(){return parseFloat(cc.sys.localStorage.getItem("EffectVolume"))}static setEffectEnable(t){cc.sys.localStorage.setItem("isEffect",t?1:-1)}static getEffectEnable(){return 1===parseInt(cc.sys.localStorage.getItem("isEffect"))}static setMusicEnable(t){cc.sys.localStorage.setItem("isMusic",t?1:-1)}static getMusicEnable(){return 1===parseInt(cc.sys.localStorage.getItem("isMusic"))}static setLoginData(t){cc.sys.localStorage.setItem("login_data",t)}static getLoginData(){return cc.sys.localStorage.getItem("login_data")}static setUpdateVersion(t){cc.sys.localStorage.setItem("update_version",t)}static getUpdateVersion(){return cc.sys.localStorage.getItem("update_version")}static setLastLoginTime(t){cc.sys.localStorage.setItem("last_login_time",t)}static getLastLoginTime(){return Number(cc.sys.localStorage.getItem("last_login_time"))}},cc._RF.pop()},{}],SceneController:[function(t,e,o){"use strict";cc._RF.push(e,"0e547EKRatPwbOjldagOfi/","SceneController");var n=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0}),o.SceneController=o.CmdScene=void 0;const r=t("../../MobileKit/MKIndex"),i=t("../Data/CommonDefine");let s=class{constructor(t){this.sceneType=t}};s=n([r.createCommand],s),o.CmdScene=s;class a extends r.Controller{constructor(){super(),this.setName("SceneController"),r.commandCenter.registAllCommand(this)}onCmdScene(t){let e=t.sceneType,o=null;e===i.SceneType.Game?o="Game":e==i.SceneType.Loading?o="Loading":e==i.SceneType.Lobby&&(o="Lobby"),null!=o&&cc.director.loadScene(o)}}n([r.onCommand(s)],a.prototype,"onCmdScene",null),o.SceneController=a,cc._RF.pop()},{"../../MobileKit/MKIndex":"MKIndex","../Data/CommonDefine":"CommonDefine"}],ScrollBarEnhance:[function(t,e,o){"use strict";cc._RF.push(e,"b1e2dgHsFtEUJDgCS9zOo13","ScrollBarEnhance");var n,r=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0}),o.ScrollBarEnhance=void 0;const{ccclass:i,property:s,requireComponent:a,menu:c}=cc._decorator;let l=n=class extends cc.Component{constructor(){super(...arguments),this.scrollView=null,this.renderEvent=[],this.vSlider=null}static creatEventHandler(t,e,o){const n=new cc.Component.EventHandler;return n.target=t,n.component=e,n.handler=o,n}refresh(t){let e,o=this.vSlider||this.node.getComponent(cc.Slider);e=Math.min(t,1),e=Math.max(t,0),o.progress=e,this.onSliderEvent(o,"")}start(){this.addScrollChildIndex()}addScrollChildIndex(){const t=this.scrollView;this.vSlider=this.node.getComponent(cc.Slider);let e=cc.js.getClassName(this);this.vSlider.slideEvents.push(n.creatEventHandler(this.node,e,"onSliderEvent")),t.scrollEvents.push(n.creatEventHandler(this.node,e,"onScrollEvent")),this.scrollMoveEvent()}onScrollEvent(t,e,o){switch(e){case cc.ScrollView.EventType.SCROLL_BEGAN:case cc.ScrollView.EventType.SCROLL_ENDED:break;case cc.ScrollView.EventType.SCROLLING:this.scrollMoveEvent()}}scrollMoveEvent(){let t,e;this.scrollView.vertical?(t=this.scrollView.getMaxScrollOffset().y,e=this.scrollView.getScrollOffset().y):(t=this.scrollView.getMaxScrollOffset().x,e=-1*this.scrollView.getScrollOffset().x),this.vSlider.progress=e/t>0&&e/t<1?e/t:e/t<=0?0:1,this.renderEvent&&this.renderEvent.length&&cc.Component.EventHandler.emitEvents(this.renderEvent,this.vSlider.progress)}onSliderEvent(t,e){let o=0,n=0;this.scrollView.vertical?(o=this.scrollView.getScrollOffset().x,n=this.scrollView.getMaxScrollOffset().y*t.progress):(o=this.scrollView.getMaxScrollOffset().x*t.progress,n=this.scrollView.getScrollOffset().y),this.scrollView.scrollToOffset(cc.v2(o,n),.05)}};r([s({tooltip:"\u5bf9\u5e94\u7684\uff08ScrollView\uff09\u6ed1\u52a8\u5217\u8868",type:cc.ScrollView})],l.prototype,"scrollView",void 0),r([s({type:[cc.Component.EventHandler],tooltip:!1})],l.prototype,"renderEvent",void 0),l=n=r([i,a(cc.Slider),c("\u7ec4\u4ef6\u5e93/ScrollBarEnhance")],l),o.ScrollBarEnhance=l,cc._RF.pop()},{}],TapStartLayer:[function(t,e,o){"use strict";cc._RF.push(e,"8af22+ff8xIEZPrZ9IIR4Zu","TapStartLayer");var n=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});const{ccclass:r,property:i,menu:s}=cc._decorator;let a=class extends cc.Component{constructor(){super(...arguments),this.innerCircle=null,this.outerCircle=null}static get path(){return"Scenes/Game/award_layer"}onLoad(){cc.tween(this.innerCircle).to(.7,{scale:1.2},{easing:"smooth"}).to(.5,{scale:1},{easing:"smooth"}).union().repeatForever().start(),cc.tween(this.outerCircle).to(.7,{scale:3,opacity:0},{easing:"smooth"}).to(0,{scale:1,opacity:255},{easing:"smooth"}).delay(.5).union().repeatForever().start(),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchStart,this)}onTouchStart(){cc.tween(this.node).by(.3,{y:this.node.height},{easing:"smooth"}).call(()=>{this.node.active=!1}).start()}};n([i(cc.Node)],a.prototype,"innerCircle",void 0),n([i(cc.Node)],a.prototype,"outerCircle",void 0),a=n([r],a),o.default=a,cc._RF.pop()},{}],UIUtils:[function(t,e,o){"use strict";cc._RF.push(e,"42718I/3LJJtKtCYuOhAlRx","UIUtils"),Object.defineProperty(o,"__esModule",{value:!0}),o.UIUtils=o.UnitKilo=o.UnitLakh=o.UnitCrore=void 0;const n=t("../../MobileKit/MKIndex"),r=t("../../Business/Data/DataManager"),i=t("../../Business/Data/CommonDefine");o.UnitCrore=1e7,o.UnitLakh=1e5,o.UnitKilo=1e3;class s{static getIndiaFormat(t){let e=t<0,o=e?String(-t):String(t),n=[],r=o.indexOf(".");if(-1===r)r=o.length;else{for(let t=o.length-1;t>r;t--)n.push(o[t]);n.push(".")}r--;for(let i=0;r>=0;r--,i++)i>2&&i%2==1&&n.push(","),n.push(o[r]);return e&&n.push("-"),n.reverse().join("")}static getShortStr(t,e,o){let n=t/e;return Math.floor(100*n)/100+o}static getSeparatorNumber(t,e=!1){let o=t%1;o=Math.floor(100*(o+cc.macro.FLT_EPSILON))/100;let n=Math.floor(t).toString(),r="",i=0,s=n.length;for(;i<s;){let t=s-i;t>10?(r=r+n.substr(i,s-10)+",",i=s-10):t>7?(r=r+n.substr(i,s-7)+",",i=s-7):t>5?(r=r+n.substr(i,s-5)+",",i=s-5):t>3?(r=r+n.substr(i,s-3)+",",i=s-3):(r+=n.substr(i,s),i=s)}return r}static cardFly(t,e,o,n,r,i){t.scale=n,t.opacity=255,t.setPosition(e),cc.tween(t).to(r,{x:o.x,y:o.y},{easing:"smooth"}).call(()=>{i&&i()}).start()}static flipToFront(t,e,o,n){return new Promise(r=>{const i=cc.tween,s=e/2;i(t).to(s,{eulerAngles:cc.v3(0,-270,0)},{easing:"quadIn"}).call(()=>{o&&o()}).to(s,{eulerAngles:cc.v3(0,0,0)},{easing:"quadOut"}).call(()=>{n&&n()}).call(r).start()})}static flipToBack(t,e,o,n){return new Promise(r=>{const i=cc.tween,s=e,a=s/2;i(t).to(s,{scale:1}).start(),i(t).to(a,{eulerAngles:cc.v3(0,-90,0)},{easing:"quadIn"}).call(()=>{o&&o()}).to(a,{eulerAngles:cc.v3(0,-180,0)},{easing:"quadOut"}).call(()=>{n&&n()}).call(r).start()})}static setJokerFlag(t){t.setJokerFlag(r.default.gameData.isWildJoker(t.getPokerData().getCode()))}static setGroupFlag(t,e){let o="",n="",r=cc.Color.WHITE;switch(e){case i.GroupFlag.None:o="",n="";break;case i.GroupFlag.Invalid:o="Not Correct",n="group_red";break;case i.GroupFlag.FirstNeed:o="1st Life Needed",n="group_blue",r=cc.Color.BLACK;break;case i.GroupFlag.SecondNeed:o="2nd Life Needed",n="group_blue",r=cc.Color.BLACK;break;case i.GroupFlag.Set:o="Set",n="group_green";break;case i.GroupFlag.ImpureSeq:o="Impure Sequence",n="group_green";break;case i.GroupFlag.PureSeq:o="Pure Sequence",n="group_green";break;case i.GroupFlag.FirstLife:o="1st Life",n="group_green";break;case i.GroupFlag.SecondLife:o="2nd Life",n="group_green"}""==n?t.node.active=!1:(t.node.active=!0,t.spriteFrame=cc.resources.get("Texture/Game/img_"+n,cc.SpriteFrame));let s=t.getComponentInChildren(cc.Label);s&&(s.string=o)}static ButtonEvent(t,e,o=.1){t.node.on(cc.Node.EventType.TOUCH_END,()=>{t.interactable?(n.AudioEngine.playEffect(i.SoundList.Click),o>0&&(t.interactable=!1,window.setTimeout(()=>{t&&(t.interactable=!0)},1e3*o)),e()):n.AudioEngine.playEffect(i.SoundList.BtnWrong)})}static NodeClickEvent(t,e,o){t.on(cc.Node.EventType.TOUCH_END,()=>{n.AudioEngine.playEffect(i.SoundList.Click),e()})}}o.UIUtils=s,s.getShortNumber=function(t,e,n){t/=r.default.homeData.getChipsUnit();let i,a=Math.abs(t);return i=a>=o.UnitCrore?s.getShortStr(a,o.UnitCrore,"Cr"):a>=o.UnitLakh?s.getShortStr(a,o.UnitLakh,"L"):s.getSeparatorNumber(a,e),t<0?i="-"+i:t>0&&n&&(i="+"+i),i},cc._RF.pop()},{"../../Business/Data/CommonDefine":"CommonDefine","../../Business/Data/DataManager":"DataManager","../../MobileKit/MKIndex":"MKIndex"}],UserData:[function(t,e,o){"use strict";cc._RF.push(e,"dad16pPzIBPJKEhCrLrDRq7","UserData"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=class{constructor(){this.m_uid="",this.m_nickName="",this.m_token="",this.m_isLogined=!1,this.m_headUrl="",this.m_balance=0,this.m_gameRecordLst=[],this.m_isGotRecord=!1,this.reset()}reset(){this.m_uid="",this.m_nickName="",this.m_token="",this.m_isLogined=!1,this.m_headUrl="",this.m_balance=0,this.m_gameRecordLst=[]}setNickName(t){this.m_nickName=t}getNickName(){return this.m_nickName}setUid(t){this.m_uid=t}getUid(){return this.m_uid}setToken(t){this.m_token=t}getToken(){return this.m_token}setLogined(t){this.m_isLogined=t}isLogined(){return this.m_isLogined}getHeadUrl(){return this.m_headUrl}setHeadUrl(t){this.m_headUrl=t}getBalance(){return this.m_balance}setBalance(t){this.m_balance=t}getGameRecordLst(){return this.m_gameRecordLst}setGameRecordLst(t){this.m_gameRecordLst=t}isGotRecord(){return this.m_isGotRecord}setGotRecord(t){this.m_isGotRecord=t}},cc._RF.pop()},{}],i18nLabel:[function(t,e,o){"use strict";cc._RF.push(e,"3e7e1yL3ltF4Ld2ONOefDbB","i18nLabel");var n=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0}),o.i18nLabel=void 0;const r=t("./MKLocalLang"),{ccclass:i,property:s,executeInEditMode:a,disallowMultiple:c,requireComponent:l,menu:h}=cc._decorator;let u=class extends cc.Component{constructor(){super(...arguments),this.i18n_string="",this.i18n_params=[]}start(){r.LocalLang._addOrDelLabel(this,!0),this._resetValue()}get string(){return this.i18n_string}set string(t){this.i18n_string=t,this.setEndValue()}get params(){return this.i18n_params}set params(t){this.i18n_params=t,this.setEndValue()}init(t,e){this.i18n_string=t,this.i18n_params=e,this.setEndValue()}setEndValue(){let t=this.getComponent(cc.Label);cc.isValid(t)&&(t.string=r.LocalLang.get(this.i18n_string,this.i18n_params))}_resetValue(){this.string=this.i18n_string}onDestroy(){r.LocalLang._addOrDelLabel(this,!1)}};n([s({visible:!1})],u.prototype,"i18n_string",void 0),n([s({visible:!1})],u.prototype,"i18n_params",void 0),n([s({type:cc.String})],u.prototype,"string",null),n([s({type:[cc.String]})],u.prototype,"params",null),u=n([i,a,l(cc.Label),c,h("\u591a\u8bed\u8a00/i18nLabel")],u),o.i18nLabel=u,cc._RF.pop()},{"./MKLocalLang":"MKLocalLang"}],i18nSprite:[function(t,e,o){"use strict";cc._RF.push(e,"a8777HUMEtKZKZSmfQV4Q10","i18nSprite");var n=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0}),o.i18nSprite=void 0;const r=t("./MKLocalLang"),{ccclass:i,property:s,executeInEditMode:a,disallowMultiple:c,requireComponent:l,menu:h}=cc._decorator;let u=class extends cc.Component{constructor(){super(...arguments),this.i18n_string=""}start(){r.LocalLang._addOrDelSprite(this,!0),this._resetValue()}get string(){return this.i18n_string}set string(t){this.i18n_string=t;let e=this.getComponent(cc.Sprite);cc.isValid(e)&&r.LocalLang._getSprite(t,t=>{cc.isValid(e)&&(e.spriteFrame=t)})}_resetValue(){this.string=this.i18n_string}onDestroy(){r.LocalLang._addOrDelSprite(this,!1)}};n([s({visible:!1})],u.prototype,"i18n_string",void 0),n([s({type:cc.String})],u.prototype,"string",null),u=n([i,a,l(cc.Sprite),c,h("\u591a\u8bed\u8a00/i18nSprite")],u),o.i18nSprite=u,cc._RF.pop()},{"./MKLocalLang":"MKLocalLang"}],"socket.io":[function(t,e,o){"use strict";var n;cc._RF.push(e,"706dfTUuhlHE78Ps53Z94Zq","socket.io"),n=function(){return function(t){function e(n){if(o[n])return o[n].exports;var r=o[n]={exports:{},id:n,loaded:!1};return t[n].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var o={};return e.m=t,e.c=o,e.p="",e(0)}([function(t,e,o){function n(t,e){"object"===(void 0===t?"undefined":r(t))&&(e=t,t=void 0),e=e||{};var o,n=i(t),s=n.source,h=n.id,u=n.path,p=l[h]&&u in l[h].nsps;return e.forceNew||e["force new connection"]||!1===e.multiplex||p?(c("ignoring socket cache for %s",s),o=a(s,e)):(l[h]||(c("new io instance for %s",s),l[h]=a(s,e)),o=l[h]),n.query&&!e.query&&(e.query=n.query),o.socket(n.path,e)}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=o(1),s=o(7),a=o(13),c=o(3)("socket.io-client");t.exports=e=n;var l=e.managers={};e.protocol=s.protocol,e.connect=n,e.Manager=o(13),e.Socket=o(37)},function(t,e,o){(function(e){var n=o(2),r=o(3)("socket.io-client:url");t.exports=function(t,o){var i=t;o=o||e.location,null==t&&(t=o.protocol+"//"+o.host),"string"==typeof t&&("/"===t.charAt(0)&&(t="/"===t.charAt(1)?o.protocol+t:o.host+t),/^(https?|wss?):\/\//.test(t)||(r("protocol-less url %s",t),t=void 0!==o?o.protocol+"//"+t:"https://"+t),r("parse %s",t),i=n(t)),i.port||(/^(http|ws)$/.test(i.protocol)?i.port="80":/^(http|ws)s$/.test(i.protocol)&&(i.port="443")),i.path=i.path||"/";var s=-1!==i.host.indexOf(":")?"["+i.host+"]":i.host;return i.id=i.protocol+"://"+s+":"+i.port,i.href=i.protocol+"://"+s+(o&&o.port===i.port?"":":"+i.port),i}}).call(e,function(){return this}())},function(t){var e=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,o=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];t.exports=function(t){var n=t,r=t.indexOf("["),i=t.indexOf("]");-1!=r&&-1!=i&&(t=t.substring(0,r)+t.substring(r,i).replace(/:/g,";")+t.substring(i,t.length));for(var s=e.exec(t||""),a={},c=14;c--;)a[o[c]]=s[c]||"";return-1!=r&&-1!=i&&(a.source=n,a.host=a.host.substring(1,a.host.length-1).replace(/;/g,":"),a.authority=a.authority.replace("[","").replace("]","").replace(/;/g,":"),a.ipv6uri=!0),a}},function(t,e,o){(function(n){function r(){var t;try{t=e.storage.debug}catch(o){}return!t&&void 0!==n&&"env"in n&&(t=n.env.DEBUG),t}(e=t.exports=o(5)).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},e.formatArgs=function(t){var o=this.useColors;if(t[0]=(o?"%c":"")+this.namespace+(o?" %c":" ")+t[0]+(o?"%c ":" ")+"+"+e.humanize(this.diff),o){var n="color: "+this.color;t.splice(1,0,n,"color: inherit");var r=0,i=0;t[0].replace(/%[a-zA-Z%]/g,function(t){"%%"!==t&&(r++,"%c"===t&&(i=r))}),t.splice(i,0,n)}},e.save=function(t){try{null==t?e.storage.removeItem("debug"):e.storage.debug=t}catch(o){}},e.load=r,e.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type)||"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},e.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(t){}}(),e.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],e.formatters.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},e.enable(r())}).call(e,o(4))},function(t){function e(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function r(t){if(h===setTimeout)return setTimeout(t,0);if((h===e||!h)&&setTimeout)return h=setTimeout,setTimeout(t,0);try{return h(t,0)}catch(n){try{return h.call(null,t,0)}catch(n){return h.call(this,t,0)}}}function i(t){if(u===clearTimeout)return clearTimeout(t);if((u===o||!u)&&clearTimeout)return u=clearTimeout,clearTimeout(t);try{return u(t)}catch(n){try{return u.call(null,t)}catch(n){return u.call(this,t)}}}function s(){g&&d&&(g=!1,d.length?f=d.concat(f):m=-1,f.length&&a())}function a(){if(!g){var t=r(s);g=!0;for(var e=f.length;e;){for(d=f,f=[];++m<e;)d&&d[m].run();m=-1,e=f.length}d=null,g=!1,i(t)}}function c(t,e){this.fun=t,this.array=e}function l(){}var h,u,p=t.exports={};!function(){try{h="function"==typeof setTimeout?setTimeout:e}catch(t){h=e}try{u="function"==typeof clearTimeout?clearTimeout:o}catch(t){u=o}}();var d,f=[],g=!1,m=-1;p.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var o=1;o<arguments.length;o++)e[o-1]=arguments[o];f.push(new c(t,e)),1!==f.length||g||r(a)},c.prototype.run=function(){this.fun.apply(null,this.array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={},p.on=l,p.addListener=l,p.once=l,p.off=l,p.removeListener=l,p.removeAllListeners=l,p.emit=l,p.prependListener=l,p.prependOnceListener=l,p.listeners=function(){return[]},p.binding=function(){throw new Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(){throw new Error("process.chdir is not supported")},p.umask=function(){return 0}},function(t,e,o){function n(t){var o,n=0;for(o in t)n=(n<<5)-n+t.charCodeAt(o),n|=0;return e.colors[Math.abs(n)%e.colors.length]}function r(t){function o(){if(o.enabled){var t=o,n=+new Date,r=n-(i||n);t.diff=r,t.prev=i,t.curr=n,i=n;for(var s=new Array(arguments.length),a=0;a<s.length;a++)s[a]=arguments[a];s[0]=e.coerce(s[0]),"string"!=typeof s[0]&&s.unshift("%O");var c=0;s[0]=s[0].replace(/%([a-zA-Z%])/g,function(o,n){if("%%"===o)return o;c++;var r=e.formatters[n];if("function"==typeof r){var i=s[c];o=r.call(t,i),s.splice(c,1),c--}return o}),e.formatArgs.call(t,s),(o.log||e.log||console.log.bind(console)).apply(t,s)}}return o.namespace=t,o.enabled=e.enabled(t),o.useColors=e.useColors(),o.color=n(t),"function"==typeof e.init&&e.init(o),o}var i;(e=t.exports=r.debug=r.default=r).coerce=function(t){return t instanceof Error?t.stack||t.message:t},e.disable=function(){e.enable("")},e.enable=function(t){e.save(t),e.names=[],e.skips=[];for(var o=("string"==typeof t?t:"").split(/[\s,]+/),n=o.length,r=0;r<n;r++)o[r]&&("-"===(t=o[r].replace(/\*/g,".*?"))[0]?e.skips.push(new RegExp("^"+t.substr(1)+"$")):e.names.push(new RegExp("^"+t+"$")))},e.enabled=function(t){var o,n;for(o=0,n=e.skips.length;o<n;o++)if(e.skips[o].test(t))return!1;for(o=0,n=e.names.length;o<n;o++)if(e.names[o].test(t))return!0;return!1},e.humanize=o(6),e.names=[],e.skips=[],e.formatters={}},function(t){function e(t){if(!((t=String(t)).length>100)){var e=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(t);if(e){var o=parseFloat(e[1]);switch((e[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return o*l;case"days":case"day":case"d":return o*c;case"hours":case"hour":case"hrs":case"hr":case"h":return o*a;case"minutes":case"minute":case"mins":case"min":case"m":return o*s;case"seconds":case"second":case"secs":case"sec":case"s":return o*i;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return o;default:return}}}}function o(t){return t>=c?Math.round(t/c)+"d":t>=a?Math.round(t/a)+"h":t>=s?Math.round(t/s)+"m":t>=i?Math.round(t/i)+"s":t+"ms"}function n(t){return r(t,c,"day")||r(t,a,"hour")||r(t,s,"minute")||r(t,i,"second")||t+" ms"}function r(t,e,o){if(!(t<e))return t<1.5*e?Math.floor(t/e)+" "+o:Math.ceil(t/e)+" "+o+"s"}var i=1e3,s=60*i,a=60*s,c=24*a,l=365.25*c;t.exports=function(t,r){r=r||{};var i=typeof t;if("string"===i&&t.length>0)return e(t);if("number"===i&&!1===isNaN(t))return r.long?n(t):o(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))}},function(t,e,o){function n(){}function r(t){var o=""+t.type;return e.BINARY_EVENT!==t.type&&e.BINARY_ACK!==t.type||(o+=t.attachments+"-"),t.nsp&&"/"!==t.nsp&&(o+=t.nsp+","),null!=t.id&&(o+=t.id),null!=t.data&&(o+=JSON.stringify(t.data)),u("encoded %j as %s",t,o),o}function i(t,e){f.removeBlobs(t,function(t){var o=f.deconstructPacket(t),n=r(o.packet),i=o.buffers;i.unshift(n),e(i)})}function s(){this.reconstructor=null}function a(t){var o=0,n={type:Number(t.charAt(0))};if(null==e.types[n.type])return h();if(e.BINARY_EVENT===n.type||e.BINARY_ACK===n.type){for(var r="";"-"!==t.charAt(++o)&&(r+=t.charAt(o),o!=t.length););if(r!=Number(r)||"-"!==t.charAt(o))throw new Error("Illegal attachments");n.attachments=Number(r)}if("/"===t.charAt(o+1))for(n.nsp="";++o&&","!==(s=t.charAt(o))&&(n.nsp+=s,o!==t.length););else n.nsp="/";var i=t.charAt(o+1);if(""!==i&&Number(i)==i){for(n.id="";++o;){var s;if(null==(s=t.charAt(o))||Number(s)!=s){--o;break}if(n.id+=t.charAt(o),o===t.length)break}n.id=Number(n.id)}return t.charAt(++o)&&(n=c(n,t.substr(o))),u("decoded %s as %j",t,n),n}function c(t,e){try{t.data=JSON.parse(e)}catch(o){return h()}return t}function l(t){this.reconPack=t,this.buffers=[]}function h(){return{type:e.ERROR,data:"parser error"}}var u=o(3)("socket.io-parser"),p=o(8),d=o(9),f=o(11),g=o(12);e.protocol=4,e.types=["CONNECT","DISCONNECT","EVENT","ACK","ERROR","BINARY_EVENT","BINARY_ACK"],e.CONNECT=0,e.DISCONNECT=1,e.EVENT=2,e.ACK=3,e.ERROR=4,e.BINARY_EVENT=5,e.BINARY_ACK=6,e.Encoder=n,e.Decoder=s,n.prototype.encode=function(t,o){t.type!==e.EVENT&&t.type!==e.ACK||!d(t.data)||(t.type=t.type===e.EVENT?e.BINARY_EVENT:e.BINARY_ACK),u("encoding packet %j",t),e.BINARY_EVENT===t.type||e.BINARY_ACK===t.type?i(t,o):o([r(t)])},p(s.prototype),s.prototype.add=function(t){var o;if("string"==typeof t)o=a(t),e.BINARY_EVENT===o.type||e.BINARY_ACK===o.type?(this.reconstructor=new l(o),0===this.reconstructor.reconPack.attachments&&this.emit("decoded",o)):this.emit("decoded",o);else{if(!g(t)&&!t.base64)throw new Error("Unknown type: "+t);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");(o=this.reconstructor.takeBinaryData(t))&&(this.reconstructor=null,this.emit("decoded",o))}},s.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},l.prototype.takeBinaryData=function(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){var e=f.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),e}return null},l.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}},function(t){function e(t){if(t)return o(t)}function o(t){for(var o in e.prototype)t[o]=e.prototype[o];return t}t.exports=e,e.prototype.on=e.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this},e.prototype.once=function(t,e){function o(){this.off(t,o),e.apply(this,arguments)}return o.fn=e,this.on(t,o),this},e.prototype.off=e.prototype.removeListener=e.prototype.removeAllListeners=e.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var o=this._callbacks["$"+t];if(!o)return this;if(1==arguments.length)return delete this._callbacks["$"+t],this;for(var n,r=0;r<o.length;r++)if((n=o[r])===e||n.fn===e){o.splice(r,1);break}return this},e.prototype.emit=function(t){this._callbacks=this._callbacks||{};var e=[].slice.call(arguments,1),o=this._callbacks["$"+t];if(o)for(var n=0,r=(o=o.slice(0)).length;n<r;++n)o[n].apply(this,e);return this},e.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]},e.prototype.hasListeners=function(t){return!!this.listeners(t).length}},function(t,e,o){(function(e){var n=o(10),r=Object.prototype.toString,i="function"==typeof e.Blob||"[object BlobConstructor]"===r.call(e.Blob),s="function"==typeof e.File||"[object FileConstructor]"===r.call(e.File);t.exports=function t(o){if(!o||"object"!=typeof o)return!1;if(n(o)){for(var r=0,a=o.length;r<a;r++)if(t(o[r]))return!0;return!1}if("function"==typeof e.Buffer&&e.Buffer.isBuffer&&e.Buffer.isBuffer(o)||"function"==typeof e.ArrayBuffer&&o instanceof ArrayBuffer||i&&o instanceof Blob||s&&o instanceof File)return!0;if(o.toJSON&&"function"==typeof o.toJSON&&1===arguments.length)return t(o.toJSON(),!0);for(var c in o)if(Object.prototype.hasOwnProperty.call(o,c)&&t(o[c]))return!0;return!1}}).call(e,function(){return this}())},function(t){var e={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==e.call(t)}},function(t,e,o){(function(t){function n(t,e){if(!t)return t;if(s(t)){var o={_placeholder:!0,num:e.length};return e.push(t),o}if(i(t)){for(var r=new Array(t.length),a=0;a<t.length;a++)r[a]=n(t[a],e);return r}if("object"==typeof t&&!(t instanceof Date)){for(var c in r={},t)r[c]=n(t[c],e);return r}return t}function r(t,e){if(!t)return t;if(t&&t._placeholder)return e[t.num];if(i(t))for(var o=0;o<t.length;o++)t[o]=r(t[o],e);else if("object"==typeof t)for(var n in t)t[n]=r(t[n],e);return t}var i=o(10),s=o(12),a=Object.prototype.toString,c="function"==typeof t.Blob||"[object BlobConstructor]"===a.call(t.Blob),l="function"==typeof t.File||"[object FileConstructor]"===a.call(t.File);e.deconstructPacket=function(t){var e=[],o=t.data,r=t;return r.data=n(o,e),r.attachments=e.length,{packet:r,buffers:e}},e.reconstructPacket=function(t,e){return t.data=r(t.data,e),t.attachments=void 0,t},e.removeBlobs=function(t,e){var o=0,n=t;(function t(r,a,h){if(!r)return r;if(c&&r instanceof Blob||l&&r instanceof File){o++;var u=new FileReader;u.onload=function(){h?h[a]=this.result:n=this.result,--o||e(n)},u.readAsArrayBuffer(r)}else if(i(r))for(var p=0;p<r.length;p++)t(r[p],p,r);else if("object"==typeof r&&!s(r))for(var d in r)t(r[d],d,r)})(n),o||e(n)}}).call(e,function(){return this}())},function(t,e){(function(e){t.exports=function(t){return e.Buffer&&e.Buffer.isBuffer(t)||e.ArrayBuffer&&t instanceof ArrayBuffer}}).call(e,function(){return this}())},function(t,e,o){function n(t,e){if(!(this instanceof n))return new n(t,e);t&&"object"===(void 0===t?"undefined":r(t))&&(e=t,t=void 0),(e=e||{}).path=e.path||"/socket.io",this.nsps={},this.subs=[],this.opts=e,this.reconnection(!1!==e.reconnection),this.reconnectionAttempts(e.reconnectionAttempts||1/0),this.reconnectionDelay(e.reconnectionDelay||1e3),this.reconnectionDelayMax(e.reconnectionDelayMax||5e3),this.randomizationFactor(e.randomizationFactor||.5),this.backoff=new d({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==e.timeout?2e4:e.timeout),this.readyState="closed",this.uri=t,this.connecting=[],this.lastPing=null,this.encoding=!1,this.packetBuffer=[];var o=e.parser||c;this.encoder=new o.Encoder,this.decoder=new o.Decoder,this.autoConnect=!1!==e.autoConnect,this.autoConnect&&this.open()}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=o(14),s=o(37),a=o(8),c=o(7),l=o(39),h=o(40),u=o(3)("socket.io-client:manager"),p=o(36),d=o(41),f=Object.prototype.hasOwnProperty;t.exports=n,n.prototype.emitAll=function(){for(var t in this.emit.apply(this,arguments),this.nsps)f.call(this.nsps,t)&&this.nsps[t].emit.apply(this.nsps[t],arguments)},n.prototype.updateSocketIds=function(){for(var t in this.nsps)f.call(this.nsps,t)&&(this.nsps[t].id=this.generateId(t))},n.prototype.generateId=function(t){return("/"===t?"":t+"#")+this.engine.id},a(n.prototype),n.prototype.reconnection=function(t){return arguments.length?(this._reconnection=!!t,this):this._reconnection},n.prototype.reconnectionAttempts=function(t){return arguments.length?(this._reconnectionAttempts=t,this):this._reconnectionAttempts},n.prototype.reconnectionDelay=function(t){return arguments.length?(this._reconnectionDelay=t,this.backoff&&this.backoff.setMin(t),this):this._reconnectionDelay},n.prototype.randomizationFactor=function(t){return arguments.length?(this._randomizationFactor=t,this.backoff&&this.backoff.setJitter(t),this):this._randomizationFactor},n.prototype.reconnectionDelayMax=function(t){return arguments.length?(this._reconnectionDelayMax=t,this.backoff&&this.backoff.setMax(t),this):this._reconnectionDelayMax},n.prototype.timeout=function(t){return arguments.length?(this._timeout=t,this):this._timeout},n.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()},n.prototype.open=n.prototype.connect=function(t){if(u("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;u("opening %s",this.uri),this.engine=i(this.uri,this.opts);var e=this.engine,o=this;this.readyState="opening",this.skipReconnect=!1;var n=l(e,"open",function(){o.onopen(),t&&t()}),r=l(e,"error",function(e){if(u("connect_error"),o.cleanup(),o.readyState="closed",o.emitAll("connect_error",e),t){var n=new Error("Connection error");n.data=e,t(n)}else o.maybeReconnectOnOpen()});if(!1!==this._timeout){var s=this._timeout;u("connect attempt will timeout after %d",s);var a=setTimeout(function(){u("connect attempt timed out after %d",s),n.destroy(),e.close(),e.emit("error","timeout"),o.emitAll("connect_timeout",s)},s);this.subs.push({destroy:function(){clearTimeout(a)}})}return this.subs.push(n),this.subs.push(r),this},n.prototype.onopen=function(){u("open"),this.cleanup(),this.readyState="open",this.emit("open");var t=this.engine;this.subs.push(l(t,"data",h(this,"ondata"))),this.subs.push(l(t,"ping",h(this,"onping"))),this.subs.push(l(t,"pong",h(this,"onpong"))),this.subs.push(l(t,"error",h(this,"onerror"))),this.subs.push(l(t,"close",h(this,"onclose"))),this.subs.push(l(this.decoder,"decoded",h(this,"ondecoded")))},n.prototype.onping=function(){this.lastPing=new Date,this.emitAll("ping")},n.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)},n.prototype.ondata=function(t){this.decoder.add(t)},n.prototype.ondecoded=function(t){this.emit("packet",t)},n.prototype.onerror=function(t){u("error",t),this.emitAll("error",t)},n.prototype.socket=function(t,e){function o(){~p(r.connecting,n)||r.connecting.push(n)}var n=this.nsps[t];if(!n){n=new s(this,t,e),this.nsps[t]=n;var r=this;n.on("connecting",o),n.on("connect",function(){n.id=r.generateId(t)}),this.autoConnect&&o()}return n},n.prototype.destroy=function(t){var e=p(this.connecting,t);~e&&this.connecting.splice(e,1),this.connecting.length||this.close()},n.prototype.packet=function(t){u("writing packet %j",t);var e=this;t.query&&0===t.type&&(t.nsp+="?"+t.query),e.encoding?e.packetBuffer.push(t):(e.encoding=!0,this.encoder.encode(t,function(o){for(var n=0;n<o.length;n++)e.engine.write(o[n],t.options);e.encoding=!1,e.processPacketQueue()}))},n.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var t=this.packetBuffer.shift();this.packet(t)}},n.prototype.cleanup=function(){u("cleanup");for(var t=this.subs.length,e=0;e<t;e++)this.subs.shift().destroy();this.packetBuffer=[],this.encoding=!1,this.lastPing=null,this.decoder.destroy()},n.prototype.close=n.prototype.disconnect=function(){u("disconnect"),this.skipReconnect=!0,this.reconnecting=!1,"opening"===this.readyState&&this.cleanup(),this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()},n.prototype.onclose=function(t){u("onclose"),this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",t),this._reconnection&&!this.skipReconnect&&this.reconnect()},n.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var t=this;if(this.backoff.attempts>=this._reconnectionAttempts)u("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var e=this.backoff.duration();u("will wait %dms before reconnect attempt",e),this.reconnecting=!0;var o=setTimeout(function(){t.skipReconnect||(u("attempting reconnect"),t.emitAll("reconnect_attempt",t.backoff.attempts),t.emitAll("reconnecting",t.backoff.attempts),t.skipReconnect||t.open(function(e){e?(u("reconnect attempt error"),t.reconnecting=!1,t.reconnect(),t.emitAll("reconnect_error",e.data)):(u("reconnect success"),t.onreconnect())}))},e);this.subs.push({destroy:function(){clearTimeout(o)}})}},n.prototype.onreconnect=function(){var t=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",t)}},function(t,e,o){t.exports=o(15),t.exports.parser=o(22)},function(t,e,o){(function(e){function n(t,o){if(!(this instanceof n))return new n(t,o);o=o||{},t&&"object"==typeof t&&(o=t,t=null),t?(t=h(t),o.hostname=t.host,o.secure="https"===t.protocol||"wss"===t.protocol,o.port=t.port,t.query&&(o.query=t.query)):o.host&&(o.hostname=h(o.host).host),this.secure=null!=o.secure?o.secure:e.location&&"https:"===location.protocol,o.hostname&&!o.port&&(o.port=this.secure?"443":"80"),this.agent=o.agent||!1,this.hostname=o.hostname||(e.location?location.hostname:"localhost"),this.port=o.port||(e.location&&location.port?location.port:this.secure?443:80),this.query=o.query||{},"string"==typeof this.query&&(this.query=u.decode(this.query)),this.upgrade=!1!==o.upgrade,this.path=(o.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!o.forceJSONP,this.jsonp=!1!==o.jsonp,this.forceBase64=!!o.forceBase64,this.enablesXDR=!!o.enablesXDR,this.timestampParam=o.timestampParam||"t",this.timestampRequests=o.timestampRequests,this.transports=o.transports||["polling","websocket"],this.transportOptions=o.transportOptions||{},this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.policyPort=o.policyPort||843,this.rememberUpgrade=o.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=o.onlyBinaryUpgrades,this.perMessageDeflate=!1!==o.perMessageDeflate&&(o.perMessageDeflate||{}),!0===this.perMessageDeflate&&(this.perMessageDeflate={}),this.perMessageDeflate&&null==this.perMessageDeflate.threshold&&(this.perMessageDeflate.threshold=1024),this.pfx=o.pfx||null,this.key=o.key||null,this.passphrase=o.passphrase||null,this.cert=o.cert||null,this.ca=o.ca||null,this.ciphers=o.ciphers||null,this.rejectUnauthorized=void 0===o.rejectUnauthorized||o.rejectUnauthorized,this.forceNode=!!o.forceNode;var r="object"==typeof e&&e;r.global===r&&(o.extraHeaders&&Object.keys(o.extraHeaders).length>0&&(this.extraHeaders=o.extraHeaders),o.localAddress&&(this.localAddress=o.localAddress)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingIntervalTimer=null,this.pingTimeoutTimer=null,this.open()}function r(t){var e={};for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);return e}var i=o(16),s=o(8),a=o(3)("engine.io-client:socket"),c=o(36),l=o(22),h=o(2),u=o(30);t.exports=n,n.priorWebsocketSuccess=!1,s(n.prototype),n.protocol=l.protocol,n.Socket=n,n.Transport=o(21),n.transports=o(16),n.parser=o(22),n.prototype.createTransport=function(t){a('creating transport "%s"',t);var e=r(this.query);e.EIO=l.protocol,e.transport=t;var o=this.transportOptions[t]||{};return this.id&&(e.sid=this.id),new i[t]({query:e,socket:this,agent:o.agent||this.agent,hostname:o.hostname||this.hostname,port:o.port||this.port,secure:o.secure||this.secure,path:o.path||this.path,forceJSONP:o.forceJSONP||this.forceJSONP,jsonp:o.jsonp||this.jsonp,forceBase64:o.forceBase64||this.forceBase64,enablesXDR:o.enablesXDR||this.enablesXDR,timestampRequests:o.timestampRequests||this.timestampRequests,timestampParam:o.timestampParam||this.timestampParam,policyPort:o.policyPort||this.policyPort,pfx:o.pfx||this.pfx,key:o.key||this.key,passphrase:o.passphrase||this.passphrase,cert:o.cert||this.cert,ca:o.ca||this.ca,ciphers:o.ciphers||this.ciphers,rejectUnauthorized:o.rejectUnauthorized||this.rejectUnauthorized,perMessageDeflate:o.perMessageDeflate||this.perMessageDeflate,extraHeaders:o.extraHeaders||this.extraHeaders,forceNode:o.forceNode||this.forceNode,localAddress:o.localAddress||this.localAddress,requestTimeout:o.requestTimeout||this.requestTimeout,protocols:o.protocols||void 0})},n.prototype.open=function(){var t;if(this.rememberUpgrade&&n.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))t="websocket";else{if(0===this.transports.length){var e=this;return void setTimeout(function(){e.emit("error","No transports available")},0)}t=this.transports[0]}this.readyState="opening";try{t=this.createTransport(t)}catch(o){return this.transports.shift(),void this.open()}t.open(),this.setTransport(t)},n.prototype.setTransport=function(t){a("setting transport %s",t.name);var e=this;this.transport&&(a("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=t,t.on("drain",function(){e.onDrain()}).on("packet",function(t){e.onPacket(t)}).on("error",function(t){e.onError(t)}).on("close",function(){e.onClose("transport close")})},n.prototype.probe=function(t){function e(){if(p.onlyBinaryUpgrades){var e=!this.supportsBinary&&p.transport.supportsBinary;u=u||e}u||(a('probe transport "%s" opened',t),h.send([{type:"ping",data:"probe"}]),h.once("packet",function(e){if(!u)if("pong"===e.type&&"probe"===e.data){if(a('probe transport "%s" pong',t),p.upgrading=!0,p.emit("upgrading",h),!h)return;n.priorWebsocketSuccess="websocket"===h.name,a('pausing current transport "%s"',p.transport.name),p.transport.pause(function(){u||"closed"!==p.readyState&&(a("changing transport and sending upgrade packet"),l(),p.setTransport(h),h.send([{type:"upgrade"}]),p.emit("upgrade",h),h=null,p.upgrading=!1,p.flush())})}else{a('probe transport "%s" failed',t);var o=new Error("probe error");o.transport=h.name,p.emit("upgradeError",o)}}))}function o(){u||(u=!0,l(),h.close(),h=null)}function r(e){var n=new Error("probe error: "+e);n.transport=h.name,o(),a('probe transport "%s" failed because of error: %s',t,e),p.emit("upgradeError",n)}function i(){r("transport closed")}function s(){r("socket closed")}function c(t){h&&t.name!==h.name&&(a('"%s" works - aborting "%s"',t.name,h.name),o())}function l(){h.removeListener("open",e),h.removeListener("error",r),h.removeListener("close",i),p.removeListener("close",s),p.removeListener("upgrading",c)}a('probing transport "%s"',t);var h=this.createTransport(t,{probe:1}),u=!1,p=this;n.priorWebsocketSuccess=!1,h.once("open",e),h.once("error",r),h.once("close",i),this.once("close",s),this.once("upgrading",c),h.open()},n.prototype.onOpen=function(){if(a("socket open"),this.readyState="open",n.priorWebsocketSuccess="websocket"===this.transport.name,this.emit("open"),this.flush(),"open"===this.readyState&&this.upgrade&&this.transport.pause){a("starting upgrade probes");for(var t=0,e=this.upgrades.length;t<e;t++)this.probe(this.upgrades[t])}},n.prototype.onPacket=function(t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(a('socket receive: type "%s", data "%s"',t.type,t.data),this.emit("packet",t),this.emit("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"pong":this.setPing(),this.emit("pong");break;case"error":var e=new Error("server error");e.code=t.data,this.onError(e);break;case"message":this.emit("data",t.data),this.emit("message",t.data)}else a('packet received with socket readyState "%s"',this.readyState)},n.prototype.onHandshake=function(t){this.emit("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this.upgrades=this.filterUpgrades(t.upgrades),this.pingInterval=t.pingInterval,this.pingTimeout=t.pingTimeout,this.onOpen(),"closed"!==this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},n.prototype.onHeartbeat=function(t){clearTimeout(this.pingTimeoutTimer);var e=this;e.pingTimeoutTimer=setTimeout(function(){"closed"!==e.readyState&&e.onClose("ping timeout")},t||e.pingInterval+e.pingTimeout)},n.prototype.setPing=function(){var t=this;clearTimeout(t.pingIntervalTimer),t.pingIntervalTimer=setTimeout(function(){a("writing ping packet - expecting pong within %sms",t.pingTimeout),t.ping(),t.onHeartbeat(t.pingTimeout)},t.pingInterval)},n.prototype.ping=function(){var t=this;this.sendPacket("ping",function(){t.emit("ping")})},n.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emit("drain"):this.flush()},n.prototype.flush=function(){"closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(a("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},n.prototype.write=n.prototype.send=function(t,e,o){return this.sendPacket("message",t,e,o),this},n.prototype.sendPacket=function(t,e,o,n){if("function"==typeof e&&(n=e,e=void 0),"function"==typeof o&&(n=o,o=null),"closing"!==this.readyState&&"closed"!==this.readyState){(o=o||{}).compress=!1!==o.compress;var r={type:t,data:e,options:o};this.emit("packetCreate",r),this.writeBuffer.push(r),n&&this.once("flush",n),this.flush()}},n.prototype.close=function(){function t(){n.onClose("forced close"),a("socket closing - telling transport to close"),n.transport.close()}function e(){n.removeListener("upgrade",e),n.removeListener("upgradeError",e),t()}function o(){n.once("upgrade",e),n.once("upgradeError",e)}if("opening"===this.readyState||"open"===this.readyState){this.readyState="closing";var n=this;this.writeBuffer.length?this.once("drain",function(){this.upgrading?o():t()}):this.upgrading?o():t()}return this},n.prototype.onError=function(t){a("socket error %j",t),n.priorWebsocketSuccess=!1,this.emit("error",t),this.onClose("transport error",t)},n.prototype.onClose=function(t,e){"opening"!==this.readyState&&"open"!==this.readyState&&"closing"!==this.readyState||(a('socket close with reason: "%s"',t),clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",t,e),this.writeBuffer=[],this.prevBufferLen=0)},n.prototype.filterUpgrades=function(t){for(var e=[],o=0,n=t.length;o<n;o++)~c(this.transports,t[o])&&e.push(t[o]);return e}}).call(e,function(){return this}())},function(t,e,o){(function(t){var n=o(17),r=o(19),i=o(33),s=o(34);e.polling=function(e){var o=!1,s=!1,a=!1!==e.jsonp;if(t.location){var c="https:"===location.protocol,l=location.port;l||(l=c?443:80),o=e.hostname!==location.hostname||l!==e.port,s=e.secure!==c}if(e.xdomain=o,e.xscheme=s,"open"in new n(e)&&!e.forceJSONP)return new r(e);if(!a)throw new Error("JSONP disabled");return new i(e)},e.websocket=s}).call(e,function(){return this}())},function(t,e,o){(function(e){var n=o(18);t.exports=function(t){var o=t.xdomain,r=t.xscheme,i=t.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!o||n))return new XMLHttpRequest}catch(s){}try{if("undefined"!=typeof XDomainRequest&&!r&&i)return new XDomainRequest}catch(s){}if(!o)try{return new(e[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(s){}}}).call(e,function(){return this}())},function(t){try{t.exports="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(e){t.exports=!1}},function(t,e,o){(function(e){function n(){}function r(t){if(c.call(this,t),this.requestTimeout=t.requestTimeout,this.extraHeaders=t.extraHeaders,e.location){var o="https:"===location.protocol,n=location.port;n||(n=o?443:80),this.xd=t.hostname!==e.location.hostname||n!==t.port,this.xs=t.secure!==o}}function i(t){this.method=t.method||"GET",this.uri=t.uri,this.xd=!!t.xd,this.xs=!!t.xs,this.async=!1!==t.async,this.data=void 0!==t.data?t.data:null,this.agent=t.agent,this.isBinary=t.isBinary,this.supportsBinary=t.supportsBinary,this.enablesXDR=t.enablesXDR,this.requestTimeout=t.requestTimeout,this.pfx=t.pfx,this.key=t.key,this.passphrase=t.passphrase,this.cert=t.cert,this.ca=t.ca,this.ciphers=t.ciphers,this.rejectUnauthorized=t.rejectUnauthorized,this.extraHeaders=t.extraHeaders,this.create()}function s(){for(var t in i.requests)i.requests.hasOwnProperty(t)&&i.requests[t].abort()}var a=o(17),c=o(20),l=o(8),h=o(31),u=o(3)("engine.io-client:polling-xhr");t.exports=r,t.exports.Request=i,h(r,c),r.prototype.supportsBinary=!0,r.prototype.request=function(t){return(t=t||{}).uri=this.uri(),t.xd=this.xd,t.xs=this.xs,t.agent=this.agent||!1,t.supportsBinary=this.supportsBinary,t.enablesXDR=this.enablesXDR,t.pfx=this.pfx,t.key=this.key,t.passphrase=this.passphrase,t.cert=this.cert,t.ca=this.ca,t.ciphers=this.ciphers,t.rejectUnauthorized=this.rejectUnauthorized,t.requestTimeout=this.requestTimeout,t.extraHeaders=this.extraHeaders,new i(t)},r.prototype.doWrite=function(t,e){var o="string"!=typeof t&&void 0!==t,n=this.request({method:"POST",data:t,isBinary:o}),r=this;n.on("success",e),n.on("error",function(t){r.onError("xhr post error",t)}),this.sendXhr=n},r.prototype.doPoll=function(){u("xhr poll");var t=this.request(),e=this;t.on("data",function(t){e.onData(t)}),t.on("error",function(t){e.onError("xhr poll error",t)}),this.pollXhr=t},l(i.prototype),i.prototype.create=function(){var t={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};t.pfx=this.pfx,t.key=this.key,t.passphrase=this.passphrase,t.cert=this.cert,t.ca=this.ca,t.ciphers=this.ciphers,t.rejectUnauthorized=this.rejectUnauthorized;var o=this.xhr=new a(t),n=this;try{u("xhr open %s: %s",this.method,this.uri),o.open(this.method,this.uri,this.async);try{if(this.extraHeaders)for(var r in o.setDisableHeaderCheck&&o.setDisableHeaderCheck(!0),this.extraHeaders)this.extraHeaders.hasOwnProperty(r)&&o.setRequestHeader(r,this.extraHeaders[r])}catch(s){}if("POST"===this.method)try{this.isBinary?o.setRequestHeader("Content-type","application/octet-stream"):o.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(s){}try{o.setRequestHeader("Accept","*/*")}catch(s){}"withCredentials"in o&&(o.withCredentials=!0),this.requestTimeout&&(o.timeout=this.requestTimeout),this.hasXDR()?(o.onload=function(){n.onLoad()},o.onerror=function(){n.onError(o.responseText)}):o.onreadystatechange=function(){if(2===o.readyState){var t;try{t=o.getResponseHeader("Content-Type")}catch(e){}"application/octet-stream"===t&&(o.responseType="arraybuffer")}4===o.readyState&&(200===o.status||1223===o.status?n.onLoad():setTimeout(function(){n.onError(o.status)},0))},u("xhr data %s",this.data),o.send(this.data)}catch(s){return void setTimeout(function(){n.onError(s)},0)}e.document&&(this.index=i.requestsCount++,i.requests[this.index]=this)},i.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},i.prototype.onData=function(t){this.emit("data",t),this.onSuccess()},i.prototype.onError=function(t){this.emit("error",t),this.cleanup(!0)},i.prototype.cleanup=function(t){if(void 0!==this.xhr&&null!==this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=n:this.xhr.onreadystatechange=n,t)try{this.xhr.abort()}catch(o){}e.document&&delete i.requests[this.index],this.xhr=null}},i.prototype.onLoad=function(){var t;try{var e;try{e=this.xhr.getResponseHeader("Content-Type")}catch(o){}t="application/octet-stream"===e&&this.xhr.response||this.xhr.responseText}catch(o){this.onError(o)}null!=t&&this.onData(t)},i.prototype.hasXDR=function(){return void 0!==e.XDomainRequest&&!this.xs&&this.enablesXDR},i.prototype.abort=function(){this.cleanup()},i.requestsCount=0,i.requests={},e.document&&(e.attachEvent?e.attachEvent("onunload",s):e.addEventListener&&e.addEventListener("beforeunload",s,!1))}).call(e,function(){return this}())},function(t,e,o){function n(t){var e=t&&t.forceBase64;h&&!e||(this.supportsBinary=!1),r.call(this,t)}var r=o(21),i=o(30),s=o(22),a=o(31),c=o(32),l=o(3)("engine.io-client:polling");t.exports=n;var h=null!=new(o(17))({xdomain:!1}).responseType;a(n,r),n.prototype.name="polling",n.prototype.doOpen=function(){this.poll()},n.prototype.pause=function(t){function e(){l("paused"),o.readyState="paused",t()}var o=this;if(this.readyState="pausing",this.polling||!this.writable){var n=0;this.polling&&(l("we are currently polling - waiting to pause"),n++,this.once("pollComplete",function(){l("pre-pause polling complete"),--n||e()})),this.writable||(l("we are currently writing - waiting to pause"),n++,this.once("drain",function(){l("pre-pause writing complete"),--n||e()}))}else e()},n.prototype.poll=function(){l("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},n.prototype.onData=function(t){var e=this;l("polling got data %s",t),s.decodePayload(t,this.socket.binaryType,function(t){return"opening"===e.readyState&&e.onOpen(),"close"===t.type?(e.onClose(),!1):void e.onPacket(t)}),"closed"!==this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"===this.readyState?this.poll():l('ignoring poll - transport state "%s"',this.readyState))},n.prototype.doClose=function(){function t(){l("writing close packet"),e.write([{type:"close"}])}var e=this;"open"===this.readyState?(l("transport open - closing"),t()):(l("transport not open - deferring close"),this.once("open",t))},n.prototype.write=function(t){var e=this;this.writable=!1;var o=function(){e.writable=!0,e.emit("drain")};s.encodePayload(t,this.supportsBinary,function(t){e.doWrite(t,o)})},n.prototype.uri=function(){var t=this.query||{},e=this.secure?"https":"http",o="";return!1!==this.timestampRequests&&(t[this.timestampParam]=c()),this.supportsBinary||t.sid||(t.b64=1),t=i.encode(t),this.port&&("https"===e&&443!==Number(this.port)||"http"===e&&80!==Number(this.port))&&(o=":"+this.port),t.length&&(t="?"+t),e+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+o+this.path+t}},function(t,e,o){function n(t){this.path=t.path,this.hostname=t.hostname,this.port=t.port,this.secure=t.secure,this.query=t.query,this.timestampParam=t.timestampParam,this.timestampRequests=t.timestampRequests,this.readyState="",this.agent=t.agent||!1,this.socket=t.socket,this.enablesXDR=t.enablesXDR,this.pfx=t.pfx,this.key=t.key,this.passphrase=t.passphrase,this.cert=t.cert,this.ca=t.ca,this.ciphers=t.ciphers,this.rejectUnauthorized=t.rejectUnauthorized,this.forceNode=t.forceNode,this.extraHeaders=t.extraHeaders,this.localAddress=t.localAddress}var r=o(22),i=o(8);t.exports=n,i(n.prototype),n.prototype.onError=function(t,e){var o=new Error(t);return o.type="TransportError",o.description=e,this.emit("error",o),this},n.prototype.open=function(){return"closed"!==this.readyState&&""!==this.readyState||(this.readyState="opening",this.doOpen()),this},n.prototype.close=function(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this},n.prototype.send=function(t){if("open"!==this.readyState)throw new Error("Transport not open");this.write(t)},n.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},n.prototype.onData=function(t){var e=r.decodePacket(t,this.socket.binaryType);this.onPacket(e)},n.prototype.onPacket=function(t){this.emit("packet",t)},n.prototype.onClose=function(){this.readyState="closed",this.emit("close")}},function(t,e,o){(function(t){function n(t,o){return o("b"+e.packets[t.type]+t.data.data)}function r(t,o,n){if(!o)return e.encodeBase64Packet(t,n);var r=t.data,i=new Uint8Array(r),s=new Uint8Array(1+r.byteLength);s[0]=C[t.type];for(var a=0;a<i.length;a++)s[a+1]=i[a];return n(s.buffer)}function i(t,o,n){if(!o)return e.encodeBase64Packet(t,n);var r=new FileReader;return r.onload=function(){t.data=r.result,e.encodePacket(t,o,!0,n)},r.readAsArrayBuffer(t.data)}function s(t,o,n){if(!o)return e.encodeBase64Packet(t,n);if(y)return i(t,o,n);var r=new Uint8Array(1);return r[0]=C[t.type],n(new k([r.buffer,t.data]))}function a(t){try{t=f.decode(t,{strict:!1})}catch(e){return!1}return t}function c(t,e,o){for(var n=new Array(t.length),r=d(t.length,o),i=function(t,o,r){e(o,function(e,o){n[t]=o,r(e,n)})},s=0;s<t.length;s++)i(s,t[s],r)}var l,h=o(23),u=o(9),p=o(24),d=o(25),f=o(26);t&&t.ArrayBuffer&&(l=o(28));var g="undefined"!=typeof navigator&&/Android/i.test(navigator.userAgent),m="undefined"!=typeof navigator&&/PhantomJS/i.test(navigator.userAgent),y=g||m;e.protocol=3;var C=e.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},b=h(C),v={type:"error",data:"parser error"},k=o(29);e.encodePacket=function(e,o,i,a){"function"==typeof o&&(a=o,o=!1),"function"==typeof i&&(a=i,i=null);var c=void 0===e.data?void 0:e.data.buffer||e.data;if(t.ArrayBuffer&&c instanceof ArrayBuffer)return r(e,o,a);if(k&&c instanceof t.Blob)return s(e,o,a);if(c&&c.base64)return n(e,a);var l=C[e.type];return void 0!==e.data&&(l+=i?f.encode(String(e.data),{strict:!1}):String(e.data)),a(""+l)},e.encodeBase64Packet=function(o,n){var r,i="b"+e.packets[o.type];if(k&&o.data instanceof t.Blob){var s=new FileReader;return s.onload=function(){var t=s.result.split(",")[1];n(i+t)},s.readAsDataURL(o.data)}try{r=String.fromCharCode.apply(null,new Uint8Array(o.data))}catch(a){for(var c=new Uint8Array(o.data),l=new Array(c.length),h=0;h<c.length;h++)l[h]=c[h];r=String.fromCharCode.apply(null,l)}return i+=t.btoa(r),n(i)},e.decodePacket=function(t,o,n){if(void 0===t)return v;if("string"==typeof t){if("b"===t.charAt(0))return e.decodeBase64Packet(t.substr(1),o);if(n&&!1===(t=a(t)))return v;var r=t.charAt(0);return Number(r)==r&&b[r]?t.length>1?{type:b[r],data:t.substring(1)}:{type:b[r]}:v}r=new Uint8Array(t)[0];var i=p(t,1);return k&&"blob"===o&&(i=new k([i])),{type:b[r],data:i}},e.decodeBase64Packet=function(t,e){var o=b[t.charAt(0)];if(!l)return{type:o,data:{base64:!0,data:t.substr(1)}};var n=l.decode(t.substr(1));return"blob"===e&&k&&(n=new k([n])),{type:o,data:n}},e.encodePayload=function(t,o,n){function r(t){return t.length+":"+t}"function"==typeof o&&(n=o,o=null);var i=u(t);return o&&i?k&&!y?e.encodePayloadAsBlob(t,n):e.encodePayloadAsArrayBuffer(t,n):t.length?void c(t,function(t,n){e.encodePacket(t,!!i&&o,!1,function(t){n(null,r(t))})},function(t,e){return n(e.join(""))}):n("0:")},e.decodePayload=function(t,o,n){if("string"!=typeof t)return e.decodePayloadAsBinary(t,o,n);var r;if("function"==typeof o&&(n=o,o=null),""===t)return n(v,0,1);for(var i,s,a="",c=0,l=t.length;c<l;c++){var h=t.charAt(c);if(":"===h){if(""===a||a!=(i=Number(a)))return n(v,0,1);if(a!=(s=t.substr(c+1,i)).length)return n(v,0,1);if(s.length){if(r=e.decodePacket(s,o,!1),v.type===r.type&&v.data===r.data)return n(v,0,1);if(!1===n(r,c+i,l))return}c+=i,a=""}else a+=h}return""!==a?n(v,0,1):void 0},e.encodePayloadAsArrayBuffer=function(t,o){return t.length?void c(t,function(t,o){e.encodePacket(t,!0,!0,function(t){return o(null,t)})},function(t,e){var n=e.reduce(function(t,e){var o;return t+(o="string"==typeof e?e.length:e.byteLength).toString().length+o+2},0),r=new Uint8Array(n),i=0;return e.forEach(function(t){var e="string"==typeof t,o=t;if(e){for(var n=new Uint8Array(t.length),s=0;s<t.length;s++)n[s]=t.charCodeAt(s);o=n.buffer}r[i++]=e?0:1;var a=o.byteLength.toString();for(s=0;s<a.length;s++)r[i++]=parseInt(a[s]);for(r[i++]=255,n=new Uint8Array(o),s=0;s<n.length;s++)r[i++]=n[s]}),o(r.buffer)}):o(new ArrayBuffer(0))},e.encodePayloadAsBlob=function(t,o){c(t,function(t,o){e.encodePacket(t,!0,!0,function(t){var e=new Uint8Array(1);if(e[0]=1,"string"==typeof t){for(var n=new Uint8Array(t.length),r=0;r<t.length;r++)n[r]=t.charCodeAt(r);t=n.buffer,e[0]=0}var i=(t instanceof ArrayBuffer?t.byteLength:t.size).toString(),s=new Uint8Array(i.length+1);for(r=0;r<i.length;r++)s[r]=parseInt(i[r]);if(s[i.length]=255,k){var a=new k([e.buffer,s.buffer,t]);o(null,a)}})},function(t,e){return o(new k(e))})},e.decodePayloadAsBinary=function(t,o,n){"function"==typeof o&&(n=o,o=null);for(var r=t,i=[];r.byteLength>0;){for(var s=new Uint8Array(r),a=0===s[0],c="",l=1;255!==s[l];l++){if(c.length>310)return n(v,0,1);c+=s[l]}r=p(r,2+c.length),c=parseInt(c);var h=p(r,0,c);if(a)try{h=String.fromCharCode.apply(null,new Uint8Array(h))}catch(u){var d=new Uint8Array(h);for(h="",l=0;l<d.length;l++)h+=String.fromCharCode(d[l])}i.push(h),r=p(r,c)}var f=i.length;i.forEach(function(t,r){n(e.decodePacket(t,o,!0),r,f)})}}).call(e,function(){return this}())},function(t){t.exports=Object.keys||function(t){var e=[],o=Object.prototype.hasOwnProperty;for(var n in t)o.call(t,n)&&e.push(n);return e}},function(t){t.exports=function(t,e,o){var n=t.byteLength;if(e=e||0,o=o||n,t.slice)return t.slice(e,o);if(e<0&&(e+=n),o<0&&(o+=n),o>n&&(o=n),e>=n||e>=o||0===n)return new ArrayBuffer(0);for(var r=new Uint8Array(t),i=new Uint8Array(o-e),s=e,a=0;s<o;s++,a++)i[a]=r[s];return i.buffer}},function(t){function e(){}t.exports=function(t,o,n){function r(t,e){if(r.count<=0)throw new Error("after called too many times");--r.count,t?(i=!0,o(t),o=n):0!==r.count||i||o(null,e)}var i=!1;return n=n||e,r.count=t,0===t?o():r}},function(t,e,o){var n;(function(t,r){!function(){function i(t){for(var e,o,n=[],r=0,i=t.length;r<i;)(e=t.charCodeAt(r++))>=55296&&e<=56319&&r<i?56320==(64512&(o=t.charCodeAt(r++)))?n.push(((1023&e)<<10)+(1023&o)+65536):(n.push(e),r--):n.push(e);return n}function s(t){for(var e,o=t.length,n=-1,r="";++n<o;)(e=t[n])>65535&&(r+=m((e-=65536)>>>10&1023|55296),e=56320|1023&e),r+=m(e);return r}function a(t,e){if(t>=55296&&t<=57343){if(e)throw Error("Lone surrogate U+"+t.toString(16).toUpperCase()+" is not a scalar value");return!1}return!0}function c(t,e){return m(t>>e&63|128)}function l(t,e){if(0==(4294967168&t))return m(t);var o="";return 0==(4294965248&t)?o=m(t>>6&31|192):0==(4294901760&t)?(a(t,e)||(t=65533),o=m(t>>12&15|224),o+=c(t,6)):0==(4292870144&t)&&(o=m(t>>18&7|240),o+=c(t,12),o+=c(t,6)),o+m(63&t|128)}function h(){if(g>=f)throw Error("Invalid byte index");var t=255&d[g];if(g++,128==(192&t))return 63&t;throw Error("Invalid continuation byte")}function u(t){var e,o;if(g>f)throw Error("Invalid byte index");if(g==f)return!1;if(e=255&d[g],g++,0==(128&e))return e;if(192==(224&e)){if((o=(31&e)<<6|h())>=128)return o;throw Error("Invalid continuation byte")}if(224==(240&e)){if((o=(15&e)<<12|h()<<6|h())>=2048)return a(o,t)?o:65533;throw Error("Invalid continuation byte")}if(240==(248&e)&&(o=(7&e)<<18|h()<<12|h()<<6|h())>=65536&&o<=1114111)return o;throw Error("Invalid UTF-8 detected")}var p=("object"==typeof t&&t&&t.exports,"object"==typeof r&&r);p.global!==p&&p.window;var d,f,g,m=String.fromCharCode,y={version:"2.1.2",encode:function(t,e){for(var o=!1!==(e=e||{}).strict,n=i(t),r=n.length,s=-1,a="";++s<r;)a+=l(n[s],o);return a},decode:function(t,e){var o=!1!==(e=e||{}).strict;d=i(t),f=d.length,g=0;for(var n,r=[];!1!==(n=u(o));)r.push(n);return s(r)}};void 0===(n=function(){return y}.call(e,o,e,t))||(t.exports=n)}()}).call(e,o(27)(t),function(){return this}())},function(t){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children=[],t.webpackPolyfill=1),t}},function(t,e){!function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=new Uint8Array(256),n=0;n<t.length;n++)o[t.charCodeAt(n)]=n;e.encode=function(e){var o,n=new Uint8Array(e),r=n.length,i="";for(o=0;o<r;o+=3)i+=t[n[o]>>2],i+=t[(3&n[o])<<4|n[o+1]>>4],i+=t[(15&n[o+1])<<2|n[o+2]>>6],i+=t[63&n[o+2]];return r%3==2?i=i.substring(0,i.length-1)+"=":r%3==1&&(i=i.substring(0,i.length-2)+"=="),i},e.decode=function(t){var e,n,r,i,s,a=.75*t.length,c=t.length,l=0;"="===t[t.length-1]&&(a--,"="===t[t.length-2]&&a--);var h=new ArrayBuffer(a),u=new Uint8Array(h);for(e=0;e<c;e+=4)n=o[t.charCodeAt(e)],r=o[t.charCodeAt(e+1)],i=o[t.charCodeAt(e+2)],s=o[t.charCodeAt(e+3)],u[l++]=n<<2|r>>4,u[l++]=(15&r)<<4|i>>2,u[l++]=(3&i)<<6|63&s;return h}}()},function(t,e){(function(e){function o(t){for(var e=0;e<t.length;e++){var o=t[e];if(o.buffer instanceof ArrayBuffer){var n=o.buffer;if(o.byteLength!==n.byteLength){var r=new Uint8Array(o.byteLength);r.set(new Uint8Array(n,o.byteOffset,o.byteLength)),n=r.buffer}t[e]=n}}}var n=e.BlobBuilder||e.WebKitBlobBuilder||e.MSBlobBuilder||e.MozBlobBuilder,r=function(){try{return 2===new Blob(["hi"]).size}catch(e){return!1}}(),i=r&&function(){try{return 2===new Blob([new Uint8Array([1,2])]).size}catch(e){return!1}}(),s=n&&n.prototype.append&&n.prototype.getBlob;t.exports=r?i?e.Blob:function(t,e){return o(t),new Blob(t,e||{})}:s?function(t,e){e=e||{};var r=new n;o(t);for(var i=0;i<t.length;i++)r.append(t[i]);return e.type?r.getBlob(e.type):r.getBlob()}:void 0}).call(e,function(){return this}())},function(t,e){e.encode=function(t){var e="";for(var o in t)t.hasOwnProperty(o)&&(e.length&&(e+="&"),e+=encodeURIComponent(o)+"="+encodeURIComponent(t[o]));return e},e.decode=function(t){for(var e={},o=t.split("&"),n=0,r=o.length;n<r;n++){var i=o[n].split("=");e[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return e}},function(t){t.exports=function(t,e){var o=function(){};o.prototype=e.prototype,t.prototype=new o,t.prototype.constructor=t}},function(t){function e(t){var e="";do{e=r[t%i]+e,t=Math.floor(t/i)}while(t>0);return e}function o(){var t=e(+new Date);return t!==n?(a=0,n=t):t+"."+e(a++)}for(var n,r="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),i=64,s={},a=0,c=0;c<i;c++)s[r[c]]=c;o.encode=e,o.decode=function(t){var e=0;for(c=0;c<t.length;c++)e=e*i+s[t.charAt(c)];return e},t.exports=o},function(t,e,o){(function(e){function n(){}function r(t){i.call(this,t),this.query=this.query||{},a||(e.___eio||(e.___eio=[]),a=e.___eio),this.index=a.length;var o=this;a.push(function(t){o.onData(t)}),this.query.j=this.index,e.document&&e.addEventListener&&e.addEventListener("beforeunload",function(){o.script&&(o.script.onerror=n)},!1)}var i=o(20),s=o(31);t.exports=r;var a,c=/\n/g,l=/\\n/g;s(r,i),r.prototype.supportsBinary=!1,r.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),i.prototype.doClose.call(this)},r.prototype.doPoll=function(){var t=this,e=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),e.async=!0,e.src=this.uri(),e.onerror=function(e){t.onError("jsonp poll error",e)};var o=document.getElementsByTagName("script")[0];o?o.parentNode.insertBefore(e,o):(document.head||document.body).appendChild(e),this.script=e,"undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent)&&setTimeout(function(){var t=document.createElement("iframe");document.body.appendChild(t),document.body.removeChild(t)},100)},r.prototype.doWrite=function(t,e){function o(){n(),e()}function n(){if(r.iframe)try{r.form.removeChild(r.iframe)}catch(t){r.onError("jsonp polling iframe removal error",t)}try{var e='<iframe src="javascript:0" name="'+r.iframeId+'">';i=document.createElement(e)}catch(t){(i=document.createElement("iframe")).name=r.iframeId,i.src="javascript:0"}i.id=r.iframeId,r.form.appendChild(i),r.iframe=i}var r=this;if(!this.form){var i,s=document.createElement("form"),a=document.createElement("textarea"),h=this.iframeId="eio_iframe_"+this.index;s.className="socketio",s.style.position="absolute",s.style.top="-1000px",s.style.left="-1000px",s.target=h,s.method="POST",s.setAttribute("accept-charset","utf-8"),a.name="d",s.appendChild(a),document.body.appendChild(s),this.form=s,this.area=a}this.form.action=this.uri(),n(),t=t.replace(l,"\\\n"),this.area.value=t.replace(c,"\\n");try{this.form.submit()}catch(u){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"===r.iframe.readyState&&o()}:this.iframe.onload=o}}).call(e,function(){return this}())},function(t,e,o){(function(e){function n(t){t&&t.forceBase64&&(this.supportsBinary=!1),this.perMessageDeflate=t.perMessageDeflate,this.usingBrowserWebSocket=u&&!t.forceNode,this.protocols=t.protocols,this.usingBrowserWebSocket||(p=r),i.call(this,t)}var r,i=o(21),s=o(22),a=o(30),c=o(31),l=o(32),h=o(3)("engine.io-client:websocket"),u=e.WebSocket||e.MozWebSocket;if("undefined"==typeof window)try{r=o(35)}catch(d){}var p=u;p||"undefined"!=typeof window||(p=r),t.exports=n,c(n,i),n.prototype.name="websocket",n.prototype.supportsBinary=!0,n.prototype.doOpen=function(){if(this.check()){var t=this.uri(),e=this.protocols,o={agent:this.agent,perMessageDeflate:this.perMessageDeflate};o.pfx=this.pfx,o.key=this.key,o.passphrase=this.passphrase,o.cert=this.cert,o.ca=this.ca,o.ciphers=this.ciphers,o.rejectUnauthorized=this.rejectUnauthorized,this.extraHeaders&&(o.headers=this.extraHeaders),this.localAddress&&(o.localAddress=this.localAddress);try{this.ws=this.usingBrowserWebSocket?e?new p(t,e):new p(t):new p(t,e,o)}catch(n){return this.emit("error",n)}void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType="nodebuffer"):this.ws.binaryType="arraybuffer",this.addEventListeners()}},n.prototype.addEventListeners=function(){var t=this;this.ws.onopen=function(){t.onOpen()},this.ws.onclose=function(){t.onClose()},this.ws.onmessage=function(e){t.onData(e.data)},this.ws.onerror=function(e){t.onError("websocket error",e)}},n.prototype.write=function(t){var o=this;this.writable=!1;for(var n=t.length,r=0,i=n;r<i;r++)!function(t){s.encodePacket(t,o.supportsBinary,function(r){if(!o.usingBrowserWebSocket){var i={};t.options&&(i.compress=t.options.compress),o.perMessageDeflate&&("string"==typeof r?e.Buffer.byteLength(r):r.length)<o.perMessageDeflate.threshold&&(i.compress=!1)}try{o.usingBrowserWebSocket?o.ws.send(r):o.ws.send(r,i)}catch(c){h("websocket closed before onclose event")}--n||(o.emit("flush"),setTimeout(function(){o.writable=!0,o.emit("drain")},0))})}(t[r])},n.prototype.onClose=function(){i.prototype.onClose.call(this)},n.prototype.doClose=function(){void 0!==this.ws&&this.ws.close()},n.prototype.uri=function(){var t=this.query||{},e=this.secure?"wss":"ws",o="";return this.port&&("wss"===e&&443!==Number(this.port)||"ws"===e&&80!==Number(this.port))&&(o=":"+this.port),this.timestampRequests&&(t[this.timestampParam]=l()),this.supportsBinary||(t.b64=1),(t=a.encode(t)).length&&(t="?"+t),e+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+o+this.path+t},n.prototype.check=function(){return!(!p||"__initialize"in p&&this.name===n.prototype.name)}}).call(e,function(){return this}())},function(){},function(t){var e=[].indexOf;t.exports=function(t,o){if(e)return t.indexOf(o);for(var n=0;n<t.length;++n)if(t[n]===o)return n;return-1}},function(t,e,o){function n(t,e,o){this.io=t,this.nsp=e,this.json=this,this.ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,o&&o.query&&(this.query=o.query),this.io.autoConnect&&this.open()}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=o(7),s=o(8),a=o(38),c=o(39),l=o(40),h=o(3)("socket.io-client:socket"),u=o(30);t.exports=n;var p={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},d=s.prototype.emit;s(n.prototype),n.prototype.subEvents=function(){if(!this.subs){var t=this.io;this.subs=[c(t,"open",l(this,"onopen")),c(t,"packet",l(this,"onpacket")),c(t,"close",l(this,"onclose"))]}},n.prototype.open=n.prototype.connect=function(){return this.connected?this:(this.subEvents(),this.io.open(),"open"===this.io.readyState&&this.onopen(),this.emit("connecting"),this)},n.prototype.send=function(){var t=a(arguments);return t.unshift("message"),this.emit.apply(this,t),this},n.prototype.emit=function(t){if(p.hasOwnProperty(t))return d.apply(this,arguments),this;var e=a(arguments),o={type:i.EVENT,data:e,options:{}};return o.options.compress=!this.flags||!1!==this.flags.compress,"function"==typeof e[e.length-1]&&(h("emitting packet with ack id %d",this.ids),this.acks[this.ids]=e.pop(),o.id=this.ids++),this.connected?this.packet(o):this.sendBuffer.push(o),delete this.flags,this},n.prototype.packet=function(t){t.nsp=this.nsp,this.io.packet(t)},n.prototype.onopen=function(){if(h("transport is open - connecting"),"/"!==this.nsp)if(this.query){var t="object"===r(this.query)?u.encode(this.query):this.query;h("sending connect packet with query %s",t),this.packet({type:i.CONNECT,query:t})}else this.packet({type:i.CONNECT})},n.prototype.onclose=function(t){h("close (%s)",t),this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",t)},n.prototype.onpacket=function(t){if(t.nsp===this.nsp)switch(t.type){case i.CONNECT:this.onconnect();break;case i.EVENT:case i.BINARY_EVENT:this.onevent(t);break;case i.ACK:case i.BINARY_ACK:this.onack(t);break;case i.DISCONNECT:this.ondisconnect();break;case i.ERROR:this.emit("error",t.data)}},n.prototype.onevent=function(t){var e=t.data||[];h("emitting event %j",e),null!=t.id&&(h("attaching ack callback to event"),e.push(this.ack(t.id))),this.connected?d.apply(this,e):this.receiveBuffer.push(e)},n.prototype.ack=function(t){var e=this,o=!1;return function(){if(!o){o=!0;var n=a(arguments);h("sending ack %j",n),e.packet({type:i.ACK,id:t,data:n})}}},n.prototype.onack=function(t){var e=this.acks[t.id];"function"==typeof e?(h("calling ack %s with %j",t.id,t.data),e.apply(this,t.data),delete this.acks[t.id]):h("bad ack %s",t.id)},n.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},n.prototype.emitBuffered=function(){var t;for(t=0;t<this.receiveBuffer.length;t++)d.apply(this,this.receiveBuffer[t]);for(this.receiveBuffer=[],t=0;t<this.sendBuffer.length;t++)this.packet(this.sendBuffer[t]);this.sendBuffer=[]},n.prototype.ondisconnect=function(){h("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},n.prototype.destroy=function(){if(this.subs){for(var t=0;t<this.subs.length;t++)this.subs[t].destroy();this.subs=null}this.io.destroy(this)},n.prototype.close=n.prototype.disconnect=function(){return this.connected&&(h("performing disconnect (%s)",this.nsp),this.packet({type:i.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this},n.prototype.compress=function(t){return this.flags=this.flags||{},this.flags.compress=t,this}},function(t){t.exports=function(t,e){for(var o=[],n=(e=e||0)||0;n<t.length;n++)o[n-e]=t[n];return o}},function(t){t.exports=function(t,e,o){return t.on(e,o),{destroy:function(){t.removeListener(e,o)}}}},function(t){var e=[].slice;t.exports=function(t,o){if("string"==typeof o&&(o=t[o]),"function"!=typeof o)throw new Error("bind() requires a function");var n=e.call(arguments,2);return function(){return o.apply(t,n.concat(e.call(arguments)))}}},function(t){function e(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}t.exports=e,e.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),o=Math.floor(e*this.jitter*t);t=0==(1&Math.floor(10*e))?t-o:t+o}return 0|Math.min(t,this.max)},e.prototype.reset=function(){this.attempts=0},e.prototype.setMin=function(t){this.ms=t},e.prototype.setMax=function(t){this.max=t},e.prototype.setJitter=function(t){this.jitter=t}}])},"object"==typeof o&&"object"==typeof e?e.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof o?o.io=n():(void 0).io=n(),cc._RF.pop()},{}]},{},["BroadcastData","CommonDefine","ConfigManager","DataManager","GameData","HandCardsData","HomeData","PlayerData","PokerData","SaveDataManager","UserData","GameController","GameNotice","SceneController","GameSocket","HttpUtils","NetworkConstants","NetworkController","NetworkManager","NetworkNotice","socket.io","HeartBeatHandler","MKAudioEngine","MKCryptoUtils","MKImageDownloader","MKLocalLang","MKSystem","MKUtils","i18nLabel","i18nSprite","ClickSoundComponent","MKActionQueue","MKCommandCenter","MKNoticeCenter","MKIndex","MKHttp","MKSocket","BroadcastCell","ConfirmDialog","GradientColor","MessageView","PopupBase","PopupManager","PrefabPool","ScrollBarEnhance","UIUtils","DropLayer","GameAction","GameScene","HelpLayer","InforLayer","LanguageLayer","LoadingConfig","LoadingScene","FilterCell","GameEntryCell","GameRecordLayer","LobbyScene","RecordCell","RecordPage","MenuLayer","PlayerNode","PokerNode","ResultCell","ResultLayer","TapStartLayer"]);