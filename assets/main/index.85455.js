window.__require=function e(t,o,a){function i(r,n){if(!o[r]){if(!t[r]){var c=r.split("/");if(c=c[c.length-1],!t[c]){var l="function"==typeof __require&&__require;if(!n&&l)return l(c,!0);if(s)return s(c,!0);throw new Error("Cannot find module '"+r+"'")}r=c}var d=o[r]={exports:{}};t[r][0].call(d.exports,function(e){return i(t[r][1][e]||e)},d,d.exports,e,t,o,a)}return o[r].exports}for(var s="function"==typeof __require&&__require,r=0;r<a.length;r++)i(a[r]);return i}({BroadcastCell:[function(e,t,o){"use strict";cc._RF.push(t,"6a348oaKzBDPokIf73R3P4e","BroadcastCell");var a=this&&this.__decorate||function(e,t,o,a){var i,s=arguments.length,r=s<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,a);else for(var n=e.length-1;n>=0;n--)(i=e[n])&&(r=(s<3?i(r):s>3?i(t,o,r):i(t,o))||r);return s>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});const i=e("../MobileKit/MKIndex"),s=e("./Common/UIUtils"),r=e("./Common/PrefabPool"),{ccclass:n,property:c,menu:l}=cc._decorator;let d=class extends cc.Component{constructor(){super(...arguments),this.txtBroadcast=null,this.txtBigWin=null,this.txtMegaWin=null}onLoad(){i.noticeCenter.registAllNotice(this)}setShowText(e,t,o){0==t?(this.txtBroadcast.string=i.LocalLang.get("game_broadcast_user",[e]),this.txtBigWin.string=i.LocalLang.get("game_broadcast_big_win",[s.UIUtils.getShortNumber(o)]),this.txtMegaWin.string=""):(this.txtBroadcast.string=i.LocalLang.get("game_broadcast_user",[e]),this.txtBigWin.string="",this.txtMegaWin.string=i.LocalLang.get("game_broadcast_mega_win",[e,s.UIUtils.getShortNumber(o)])),cc.tween(this.node).delay(3).call(()=>{r.default.put(this.node)}).start()}};a([c(cc.Label)],d.prototype,"txtBroadcast",void 0),a([c(cc.Label)],d.prototype,"txtBigWin",void 0),a([c(cc.Label)],d.prototype,"txtMegaWin",void 0),d=a([n],d),o.default=d,cc._RF.pop()},{"../MobileKit/MKIndex":"MKIndex","./Common/PrefabPool":"PrefabPool","./Common/UIUtils":"UIUtils"}],BroadcastData:[function(e,t,o){"use strict";cc._RF.push(t,"a24010QIg5H5YyoCppz8brV","BroadcastData"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=class{constructor(){this.m_localNotices=["test001","test002"],this.m_pushNotices=new Array,this.m_localNoticeIndex=0,this.m_pushNoticeIndex=0,this.m_localNotices=["test001","test002"],this.m_localNoticeIndex=0,this.m_pushNoticeIndex=0}addPushNotice(e,t=1){this.m_pushNotices.push({notice:e,loop:t})}getCurNotice(){if(this.m_pushNotices.length>0){this.m_pushNoticeIndex=this.m_pushNoticeIndex>=this.m_pushNotices.length?0:this.m_pushNoticeIndex;let e=this.m_pushNotices[this.m_pushNoticeIndex];return e.loop--,0==e.loop?this.m_pushNotices.splice(this.m_pushNoticeIndex,1):this.m_pushNoticeIndex++,e.notice}return this.getLocalNotice()}getLocalNotice(){if(this.m_localNotices.length>0){this.m_localNoticeIndex=this.m_localNoticeIndex>=this.m_localNotices.length?0:this.m_localNoticeIndex;let e=this.m_localNotices[this.m_localNoticeIndex];return this.m_localNoticeIndex++,e}return""}},cc._RF.pop()},{}],ClickSoundComponent:[function(e,t,o){"use strict";cc._RF.push(t,"00bf4ztalhNVoWG4SmO7AfR","ClickSoundComponent");var a=this&&this.__decorate||function(e,t,o,a){var i,s=arguments.length,r=s<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,a);else for(var n=e.length-1;n>=0;n--)(i=e[n])&&(r=(s<3?i(r):s>3?i(t,o,r):i(t,o))||r);return s>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});const i=e("../MKIndex"),s=e("../../Business/Data/CommonDefine"),{ccclass:r,property:n}=cc._decorator;let c=class extends cc.Component{onLoad(){this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchNode,this)}onDestroy(){}onTouchNode(){0==this.node.getComponent(cc.Button).interactable?i.AudioEngine.playEffect(s.SoundList.BtnWrong):i.AudioEngine.playEffect(s.SoundList.Click)}};c=a([r],c),o.default=c,cc._RF.pop()},{"../../Business/Data/CommonDefine":"CommonDefine","../MKIndex":"MKIndex"}],CommonDefine:[function(e,t,o){"use strict";cc._RF.push(t,"9efc0rsiaVG/piSLAHE8XaR","CommonDefine"),Object.defineProperty(o,"__esModule",{value:!0}),o.RecordData=o.SpriteList=o.SoundList=o.PrefabList=o.PointScoreArr=o.OriginalDesign=o.LeftCardsAnchorDist=o.FlipTime=o.DrawCardFlyTime=o.PlayerCardScale=o.TableCardScale=o.MAX_POINT=o.MAX_GROUP=o.DEAL_CARDS_COUNT=o.MAX_HAND_CARDS=o.TOTAL_CARDS_COUNT=o.MAX_PLAYERS=o.GroupFlag=o.GroupType=o.LangList=o.GameStage=o.SceneType=o.UserType=void 0,function(e){e[e.Guest=1]="Guest",e[e.Account=2]="Account"}(o.UserType||(o.UserType={})),function(e){e[e.Loading=0]="Loading",e[e.Lobby=1]="Lobby",e[e.Game=2]="Game"}(o.SceneType||(o.SceneType={})),function(e){e[e.Waiting=0]="Waiting",e[e.Prepare=1]="Prepare",e[e.Deal=2]="Deal",e[e.PickCard=3]="PickCard",e[e.Discard=4]="Discard",e[e.ConfirmGroup=5]="ConfirmGroup",e[e.Finish=6]="Finish"}(o.GameStage||(o.GameStage={})),function(e){e[e.en=0]="en",e[e.hi=1]="hi"}(o.LangList||(o.LangList={})),function(e){e[e.Invalid=0]="Invalid",e[e.Set=1]="Set",e[e.Impure=2]="Impure",e[e.Pure=3]="Pure"}(o.GroupType||(o.GroupType={})),function(e){e[e.None=0]="None",e[e.Invalid=1]="Invalid",e[e.SecondNeed=2]="SecondNeed",e[e.FirstNeed=3]="FirstNeed",e[e.Set=4]="Set",e[e.ImpureSeq=5]="ImpureSeq",e[e.PureSeq=6]="PureSeq",e[e.SecondLife=7]="SecondLife",e[e.FirstLife=8]="FirstLife"}(o.GroupFlag||(o.GroupFlag={})),o.MAX_PLAYERS=5,o.TOTAL_CARDS_COUNT=52,o.MAX_HAND_CARDS=14,o.DEAL_CARDS_COUNT=13,o.MAX_GROUP=5,o.MAX_POINT=80,o.TableCardScale=1,o.PlayerCardScale=.5,o.DrawCardFlyTime=.2,o.FlipTime=.2,o.LeftCardsAnchorDist=7,o.OriginalDesign=cc.size(1280,720),o.PointScoreArr=[10,2,3,4,5,6,7,8,9,10,10,10,10];class a{}o.PrefabList=a,a.AwardLayer="Scenes/Game/award_layer",a.DropLayer="Scenes/Game/drop_layer",a.MenuLayer="Scenes/Game/menu_layer",a.PaytableLayer="Scenes/Game/paytable_layer",a.HelpLayer="Scenes/Game/help_layer",a.GameRecordLayer="Scenes/Lobby/game_record_layer",a.RecordCell="Scenes/Lobby/RecordCell",a.RecordPage="Scenes/Lobby/RecordPage",a.BroadCastCell="Scenes/Game/BroadCastCell",a.PlayerNode="Scenes/Game/PlayerNode",a.PokerNode="Scenes/Game/PokerNode",a.ResultLayer="Scenes/Game/result_layer",a.GameEntyuCell="Scenes/Lobby/GameEntyuCell",a.InforLayer="Scenes/Game/infor_layer";class i{}o.SoundList=i,i.Bgm="Sound/bgm_hall",i.Click="Sound/click",i.Win="Sound/win",i.BigWin="Sound/big_winner",i.DiceSpin="Sound/dice_spin",i.Chip="Sound/chip",i.BtnWrong="Sound/btn_wrong",i.Dealcard2="Sound/deal_card2",i.Button01="Sound/btn01",i.Button02="Sound/btn02",i.CardFlip1="Sound/card_flip1",i.CardFlip2="Sound/card_flip2",i.Alarm="Sound/alarm";class s{}o.SpriteList=s,s.GameEntey="Texture/Lobby/img_entry",s.TipsDiscard="Texture/Game/Background/img_msg_discard",s.TipsPick="Texture/Game/Background/img_msg_pick",o.RecordData=class{},cc._RF.pop()},{}],ConfigManager:[function(e,t,o){"use strict";cc._RF.push(t,"61ecdS7zDhJaIyXsWMOoGLM","ConfigManager"),Object.defineProperty(o,"__esModule",{value:!0});class a{static setUrlConfig(e){a.urlConfig=e}static setAppInfo(e){a.appInfo=e}}o.default=a,a.urlConfig=null,a.appInfo=null,cc._RF.pop()},{}],ConfirmDialog:[function(e,t,o){"use strict";cc._RF.push(t,"a824eCDWdpEqJh4R8QjqzfN","ConfirmDialog");var a,i=this&&this.__decorate||function(e,t,o,a){var i,s=arguments.length,r=s<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,a);else for(var n=e.length-1;n>=0;n--)(i=e[n])&&(r=(s<3?i(r):s>3?i(t,o,r):i(t,o))||r);return s>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});const{ccclass:s,property:r}=cc._decorator;let n=a=class extends cc.Component{constructor(){super(...arguments),this.m_txtContent=null,this.m_btnOK=null,this.m_btnCancel=null,this.m_btnClose=null,this.m_okPos=null,this.m_callback=null,this.m_showCancel=null}onLoad(){this.m_okPos=this.m_btnOK.node.position}onDestroy(){}show(e,t,o){this.m_callback=t,this.m_txtContent.string=e,this.m_showCancel=void 0===o||o,this.m_showCancel?(this.m_btnCancel.node.active=!0,this.m_btnClose.node.active=!0,this.m_btnOK.node.position=this.m_okPos):(this.m_btnCancel.node.active=!1,this.m_btnClose.node.active=!1,this.m_btnOK.node.x=0)}onTouchOK(){this.m_callback&&this.m_callback(!0),this.closeSelf()}onTouchCancel(){this.m_callback&&this.m_callback(!1),this.closeSelf()}onTouchClose(){this.m_showCancel&&(this.m_callback&&this.m_callback(!1),this.closeSelf())}closeSelf(){this.node&&this.node.destroy()}static show(e,t,o,i){if(null==a.defaultSkin){let e=cc.resources.get("Scenes/Common/ConfirmDialog",cc.Prefab);if(null==e)return void cc.log("Please init ConfirmDialog defaultSkin on app init");a.defaultSkin=e}a.showWithFile(a.defaultSkin,e,t,o)}static showWithFile(e,t,o,i){let s=cc.director.getScene(),r=null,n=s.getChildByName("ConfirmDialog");null==n?((r=cc.instantiate(e).getComponent(a)).node.name="ConfirmDialog",s.addChild(r.node)):r=n.getComponent(a),r.show(t,o,i)}static hide(){let e=cc.director.getScene().getChildByName("ConfirmDialog");e&&e.destroy()}};n.defaultSkin=null,i([r(cc.Label)],n.prototype,"m_txtContent",void 0),i([r(cc.Button)],n.prototype,"m_btnOK",void 0),i([r(cc.Button)],n.prototype,"m_btnCancel",void 0),i([r(cc.Button)],n.prototype,"m_btnClose",void 0),n=a=i([s],n),o.default=n,cc._RF.pop()},{}],DataManager:[function(e,t,o){"use strict";cc._RF.push(t,"bb44c7d08JNtpYy1h8nVOKI","DataManager"),Object.defineProperty(o,"__esModule",{value:!0});const a=e("./UserData"),i=e("./HomeData"),s=e("./GameData");class r{static init(){r.userData=new a.default,r.homeData=new i.HomeData,r.gameData=new s.GameData}}o.default=r,cc._RF.pop()},{"./GameData":"GameData","./HomeData":"HomeData","./UserData":"UserData"}],DropLayer:[function(e,t,o){"use strict";cc._RF.push(t,"3683b6O0P5B7bSFXLzzHfZu","DropLayer");var a=this&&this.__decorate||function(e,t,o,a){var i,s=arguments.length,r=s<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,a);else for(var n=e.length-1;n>=0;n--)(i=e[n])&&(r=(s<3?i(r):s>3?i(t,o,r):i(t,o))||r);return s>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});const i=e("../MobileKit/MKIndex"),s=e("../Business/Data/DataManager"),r=e("./Common/PopupBase"),n=e("./Common/UIUtils"),c=e("../Business/Logic/GameController"),{ccclass:l,property:d,menu:h}=cc._decorator;let u=class extends r.default{constructor(){super(...arguments),this.txtTips=null,this.btnCancel=null,this.btnOK=null,this.animationDuration=.3}static get path(){return"Scenes/Game/message_layer"}updateDisplay(){let e="\u20b9"+n.UIUtils.getShortNumber(s.default.gameData.getDropChips());this.txtTips.string=i.LocalLang.get("game_drop_tips",[e]),n.UIUtils.ButtonEvent(this.btnCancel,this.onTouchClose.bind(this)),n.UIUtils.ButtonEvent(this.btnOK,this.onTouchOkey.bind(this))}onTouchOkey(){i.commandCenter.emit(new c.CmdDrop),this.hide()}onTouchClose(){this.hide()}};a([d(cc.Label)],u.prototype,"txtTips",void 0),a([d(cc.Button)],u.prototype,"btnCancel",void 0),a([d(cc.Button)],u.prototype,"btnOK",void 0),u=a([l],u),o.default=u,cc._RF.pop()},{"../Business/Data/DataManager":"DataManager","../Business/Logic/GameController":"GameController","../MobileKit/MKIndex":"MKIndex","./Common/PopupBase":"PopupBase","./Common/UIUtils":"UIUtils"}],FilterCell:[function(e,t,o){"use strict";cc._RF.push(t,"0f153SLIxZJAprC+YSThgRZ","FilterCell");var a=this&&this.__decorate||function(e,t,o,a){var i,s=arguments.length,r=s<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,a);else for(var n=e.length-1;n>=0;n--)(i=e[n])&&(r=(s<3?i(r):s>3?i(t,o,r):i(t,o))||r);return s>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0}),o.FilterCell=void 0;const i=e("../../Business/Data/DataManager"),s=e("../Common/UIUtils"),{ccclass:r,property:n,menu:c}=cc._decorator;let l=class extends cc.Component{constructor(){super(...arguments),this.txtPointValue=null,this.pointValueIdx=0,this.callback=null}onLoad(){s.UIUtils.NodeClickEvent(this.node,this.onToucFilterRecord.bind(this))}setData(e,t){this.pointValueIdx=e;let o=i.default.homeData.getPointValueList();this.txtPointValue.string=o[e].toString(),e=e>4?4:e,this.callback=t}onToucFilterRecord(){this.callback(this.pointValueIdx)}};a([n(cc.Label)],l.prototype,"txtPointValue",void 0),l=a([r,c("Lobby/FilterCell")],l),o.FilterCell=l,cc._RF.pop()},{"../../Business/Data/DataManager":"DataManager","../Common/UIUtils":"UIUtils"}],GameAction:[function(e,t,o){"use strict";cc._RF.push(t,"5725aL0vPtBNqkFplGAH0Ve","GameAction");var a=this&&this.__decorate||function(e,t,o,a){var i,s=arguments.length,r=s<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,a);else for(var n=e.length-1;n>=0;n--)(i=e[n])&&(r=(s<3?i(r):s>3?i(t,o,r):i(t,o))||r);return s>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});const i=e("../MobileKit/MKIndex"),s=e("../Business/Data/DataManager"),r=e("../Business/Data/CommonDefine"),n=e("../Business/Logic/GameNotice"),c=e("./Common/UIUtils"),l=e("./Common/PopupManager"),d=e("../Business/Logic/GameController"),h=e("./Common/PrefabPool"),u=e("./PokerNode"),{ccclass:p,property:m,menu:g}=cc._decorator;let f=class extends cc.Component{constructor(){super(...arguments),this.btnDiscard=null,this.btnGroup=null,this.btnDrop=null,this.btnConfirm=null,this.txtDropChips=null,this.txtScore=null,this.txtBalance=null,this.tableCardLeftPosNode=null,this.tableCardLeft=null,this.tableCardRight=null,this.dealCardPos=null,this.handCardPanel=null,this.imgGroupFlag=null,this.imgHandCardMask=null,this.gameData=null,this.handPokerList=[],this.imgGroupFlagList=[],this.btnChowCard=null,this.btnDrawCard=null,this.cardUpY=0,this.cardGap=0,this.groupGap=0,this.cardWidth=0,this.cardHeight=0,this.touchMoved=!1,this.dragCard=null,this.touchBeganPos=null,this.touchedCardPos=null,this.dragCardGroupList=[],this.selectCardsList=[],this.tableCardLeftPos=null,this.tableCardRightPos=null,this.testPos001=new cc.Vec2(639,442),this.testPos002=new cc.Vec2(407,473)}onLoad(){i.noticeCenter.registAllNotice(this),this.gameData=s.default.gameData,this.initUI(),this.resetGameStage(),this.clearGame()}initUI(){this.handPokerList=[];for(let o=0;o<r.MAX_HAND_CARDS;++o){let e=h.default.get(r.PrefabList.PokerNode).getComponent(u.default);e.node.active=!1,this.handCardPanel.addChild(e.node),this.handPokerList.push(e),e.setPoker(-1)}this.imgGroupFlagList.push(this.imgGroupFlag);for(let o=1;o<r.MAX_GROUP;++o){let e=cc.instantiate(this.imgGroupFlag.node);this.imgGroupFlag.node.parent.addChild(e),this.imgGroupFlagList.push(e.getComponent(cc.Sprite))}this.imgGroupFlagList.forEach(e=>{e.node.active=!1,e.node.zIndex=100}),this.cardWidth=this.handPokerList[0].node.width,this.cardHeight=this.handPokerList[0].node.height,this.groupGap=this.cardWidth/3;let e=(this.node.width-20-this.groupGap*(r.MAX_GROUP-1)-5*this.cardWidth)/(r.MAX_HAND_CARDS-5),t=this.cardWidth/2;this.cardGap=Math.min(t,e),this.cardUpY=this.cardHeight/8,this.tableCardLeftPos=this.handCardPanel.convertToNodeSpaceAR(this.tableCardLeftPosNode.parent.convertToWorldSpaceAR(this.tableCardLeftPosNode.position)),this.tableCardRightPos=this.handCardPanel.convertToNodeSpaceAR(this.tableCardRight.parent.convertToWorldSpaceAR(this.tableCardRight.position)),this.btnDrawCard=this.tableCardLeft.getComponent(cc.Button),this.btnChowCard=this.tableCardRight.getComponent(cc.Button),this.handCardPanel.on(cc.Node.EventType.TOUCH_START,this.onTouchBegin,this),this.handCardPanel.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.handCardPanel.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.handCardPanel.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchEnd,this),this.btnGroup.node.on("click",this.onTouchGroup,this),this.btnDrop.node.on("click",this.onTouchDrop,this),this.btnDiscard.node.on("click",this.onTouchDiscard,this),this.btnConfirm.node.on("click",this.onTouchConfirm,this),this.tableCardLeft.on("click",this.onTouchDrawCard,this),this.tableCardRight.on("click",this.onTouchChowCard,this)}resizeUI(){this.componentReplace(this.tableCardLeftPosNode),this.componentReplace(this.tableCardLeft),this.componentReplace(this.tableCardRight),this.componentReplace(this.dealCardPos),this.componentReplace(this.handCardPanel)}componentReplace(e){let t=cc.view.getDesignResolutionSize();e.x=e.x*t.width/r.OriginalDesign.width,e.y=e.y*t.height/r.OriginalDesign.height}clearGame(){this.txtScore.string="",this.btnConfirm.node.active=!1,this.btnDrop.node.active=!1,this.btnGroup.node.active=!1,this.btnDiscard.node.active=!1,this.showHandCardMask(!1),this.showPickCard(!1),this.clearHandCards(),this.clearGroupFlag(),this.stopDealCardsAction()}stopDealCardsAction(){let e=this.handPokerList;for(let t=0;t<e.length;++t){let o=e[t];o.node.scaleX=1,o.node.stopAllActions()}this.handCardPanel.stopAllActions()}initTestPoker(){let e=[];for(let o=0;o<106;o++)e.push(o);let t=[];for(let o=0;o<5;o++){let o=[];for(let t=0;t<13;t++){let t=i.Utils.randRange(0,e.length-1);o.push(e[t]),e.splice(t,1)}t.push(o)}return t.forEach(e=>{e.sort((e,t)=>e-t)}),t}clearHandCards(){this.handPokerList.forEach(e=>{e.node.active=!1,e.node.x=0,e.node.y=0,e.node.scale=1,e.node.stopAllActions(),e.setPoker(-1)})}clearGroupFlag(){for(let e=0;e<r.MAX_GROUP;++e)this.imgGroupFlagList[e].node.active=!1}resetGameStage(){let e=this.dealCardPos.getPosition();this.tableCardLeft.setPosition(e.x,e.y)}onTouchGroup(){if(this.selectCardsList.length<2)return;this.btnGroup.interactable=!1;let e=[];this.selectCardsList.forEach(t=>{e.push(t.getPokerData().getCode())}),this.gameData.getHandCardData().groupCard(e),this.updateCardGroup(this.gameData.getHandCardData().getGroupList()),i.AudioEngine.playEffect(r.SoundList.Button02)}onTouchDiscard(){if(1!=this.selectCardsList.length)return;this.btnDiscard.interactable=!1;let e=this.selectCardsList[0];this.selectCardsList.length=0;let t=e.getPokerData().getCode();this.sendDiscard(t),i.AudioEngine.playEffect(r.SoundList.Button01)}onTouchDrop(){l.default.show(r.PrefabList.DropLayer),i.AudioEngine.playEffect(r.SoundList.Button01)}onTouchConfirm(){i.commandCenter.emit(new d.CmdConfirmGroup),this.btnConfirm.interactable=!1,i.AudioEngine.playEffect(r.SoundList.Button02)}sendDiscard(e){if(e==this.gameData.getChowCard()){let e=this.gameData.getHandCardData().getGroupList();return void this.updateCardGroup(e)}let t=new d.CmdDisCard;t.card=e,i.commandCenter.emit(t)}onTouchDrawCard(){i.AudioEngine.playEffect(r.SoundList.CardFlip1),this.tableCardLeft,this.showPickCard(!1);let e=new d.CmdDrawCard;i.commandCenter.emit(e)}onTouchChowCard(){i.AudioEngine.playEffect(r.SoundList.CardFlip1),this.showPickCard(!1);let e=new d.CmdChowCard;i.commandCenter.emit(e)}showPickCard(e){e?(this.btnDrawCard.interactable=!0,this.btnChowCard.interactable=!0):(this.btnDrawCard.interactable=!1,this.btnChowCard.interactable=!1)}canChangeCards(){let e=this.gameData.getSelfPlayer();return!!e&&!(e.isDropped()||e.isWinner()||e.isConfirmed()||!e.isPlaying())}onNtcJokerCard(){this.updateBtnState(),this.updateCardGroup(this.gameData.getHandCardData().getGroupList());for(let e of this.handPokerList)c.UIUtils.setJokerFlag(e)}dealCards(e){let t=this.gameData.getHandCardData().getHandCardList(),o=cc.tween(this.handCardPanel),a=(r.DEAL_CARDS_COUNT-1)*this.cardGap+this.cardWidth,i=[],n=-a/2;for(let s=0;s<r.DEAL_CARDS_COUNT;++s)i.push(cc.v3(n,0,0)),n+=this.cardGap+10;for(let s=0;s<13;s++){let e=this.handPokerList[s];e.setPoker(-1),e.node.stopAllActions(),o.call(()=>{let t=this.dealCardPos.parent.convertToWorldSpaceAR(this.dealCardPos.position),o=this.handCardPanel.convertToNodeSpaceAR(t),a=i[s];e.node.active=!0,c.UIUtils.cardFly(e.node,o,a,1,.5)}),o.delay(.05)}this.handPokerList.forEach((e,a)=>{o.call(()=>{e.node.stopAllActions(),c.UIUtils.flipToFront(e.node,.5,()=>{e.setPoker(t[a])})}),o.delay(.05)}),o.delay(.5),o.call(()=>{this.updateCardGroup(this.gameData.getHandCardData().getGroupList());let e=this.tableCardLeftPosNode.getPosition();cc.tween(this.tableCardLeft).to(.5,{x:e.x,y:e.y},{easing:"smooth"})}),e&&o.call(()=>{e()}),o.start(),s.default.gameData.getHandCardData().sortGroupByColor()}discard(e,t){let o=null;if(this.handPokerList.forEach(t=>{t.getPokerData().getCode()!=e||(o=t)}),o){o.node.stopAllActions(),o.node.scale=1,o.node.active=!0;let e=cc.tween(o.node);e.to(r.DrawCardFlyTime,{position:this.tableCardRightPos,scale:r.TableCardScale}),e.call(()=>{i.AudioEngine.playEffect(r.SoundList.CardFlip1),t(),o.node.active=!1,o.setPoker(-1);let e=this.gameData.getHandCardData().getGroupList();this.updateCardGroup(e)}),e.start()}else t()}drawCard(e){this.addCard(this.tableCardLeftPos,e,!0)}chowCard(e){this.addCard(this.tableCardRightPos,e,!1)}addCard(e,t,o){let a=this.gameData.getHandCardData().getGroupList();this.updateCardGroup(a);let i=null;for(let r of this.handPokerList)if(r.getPokerData().getCode()==t){i=r;break}if(null==i)return;let s=i.node.position;i.node.stopAllActions(),o?i.setPoker(-1):(i.setPoker(t),c.UIUtils.setJokerFlag(i)),i.node.scale=r.TableCardScale,i.node.position=e,i.node.active=!0;let n=cc.tween(i.node);n.to(r.DrawCardFlyTime,{position:s,scale:1}),o&&n.call(()=>{c.UIUtils.flipToFront(i.node,r.FlipTime,()=>{i.setPoker(t)})}).delay(r.FlipTime).call(()=>{c.UIUtils.setJokerFlag(i)}),n.start()}onTouchBegin(e){if(!this.canChangeCards())return;if(this.gameData.getJokerCard()<0)return;this.touchMoved=!1,this.dragCard=null,this.touchBeganPos=e.getLocation();let t=this.handCardPanel.convertToNodeSpaceAR(e.getLocation()),o=this.getTouchCard(t);o&&(o.node.y=this.cardUpY,this.dragCard=o,this.dragCardGroupList=this.gameData.getHandCardData().copyGroupList(),this.touchedCardPos=o.node.position)}onTouchMove(e){if(!this.canChangeCards())return;if(null==this.dragCard)return;let t=e.getLocation(),o=t.x-this.touchBeganPos.x,a=t.y-this.touchBeganPos.y;if((Math.abs(o)>this.cardGap||Math.abs(a)>this.cardGap)&&(this.touchMoved=!0),this.touchMoved){let e=this.touchedCardPos.x+o,t=this.touchedCardPos.y+a;t<this.cardUpY&&(t=this.cardUpY),this.dragCard.node.zIndex=50,this.dragCard.node.x=e,this.dragCard.node.y=t;let i=this.findInsertPoker(this.dragCard);if(i){let e=this.dragCard.getPokerData().getCode(),t=i.getPokerData().getCode(),o=this.dragCard.node.x>i.node.x;if(e<0||t<0)return;this.gameData.getHandCardData().moveCard(this.dragCardGroupList,e,t,o)&&this.dragCardGroup(this.dragCardGroupList)}}}onTouchEnd(e){if(this.canChangeCards())if(this.touchMoved&&this.dragCard)if(this.dragCardGroupList.length>0&&(this.gameData.getHandCardData().setCardGroup(this.dragCardGroupList),this.dragCardGroupList=[]),this.dragCard.node.y>this.cardHeight){let e=this.dragCard.getPokerData().getCode();this.dragCard=null,this.gameData.getActiveSeat()==this.gameData.getSelfSeat()&&this.gameData.getGameStage()==r.GameStage.Discard?this.sendDiscard(e):(this.gameData.getHandCardData().updateCardGroupList(),this.updateCardGroup(this.gameData.getHandCardData().getGroupList()))}else this.dragCard=null,this.gameData.getHandCardData().updateCardGroupList(),this.updateCardGroup(this.gameData.getHandCardData().getGroupList()),i.AudioEngine.playEffect(r.SoundList.CardFlip1);else{this.dragCard=null;let t=this.handCardPanel.convertToNodeSpaceAR(e.getLocation()),o=this.getTouchCard(t);if(o){let e=this.selectCardsList.indexOf(o);e<0?(this.selectCardsList.push(o),o.node.y=this.cardUpY):(this.selectCardsList.splice(e,1),o.node.y=0),this.updateBtnState()}}else this.dragCard=null}getTouchCard(e){let t=null;for(let o=this.handPokerList.length-1;o>=0;o--){let a=this.handPokerList[o];if(a.node.active&&a.node.getBoundingBox().contains(e)){t=a;break}}return t}findInsertPoker(e){let t=[];for(let r of this.handPokerList)r.node.active&&t.push(r);t.sort(function(e,t){return e.node.x-t.node.x});let o=t.indexOf(e),a=null;o<t.length-1&&(a=t[o+1]);let i=null;o>0&&(i=t[o-1]);let s=null;return a&&i?s=Math.abs(e.node.x-a.node.x)<Math.abs(e.node.x-i.node.x)?a:i:a?s=a:i&&(s=i),s}dragCardGroup(e){this.clearGroupFlag();let t=(e.length-1)*this.groupGap;for(let i=0;i<e.length;++i)t+=(e[i].cards.length-1)*this.cardGap+this.cardWidth;let o=-t/2,a=0;for(let i=0;i<e.length;++i){let t=e[i],s=t.cards.length,r=this.imgGroupFlagList[i];r.node.active=!0,r.node.width=(s-1)*this.cardGap+this.cardWidth+10,r.node.x=o+r.node.width/2-5,c.UIUtils.setGroupFlag(r,t.groupFlag);for(let e=0;e<s;++e){let i=t.cards[e],r=null;for(let e=0;e<this.handPokerList.length;++e){let t=this.handPokerList[e];if(t.node.active&&t.getPokerData().getCode()==i){r=t;break}}null!=r?(this.dragCard!=r&&(r.node.x=this.cardWidth/2+o,r.node.y=0,r.node.zIndex=a),a++,o+=e==s-1?this.cardWidth:this.cardGap):cc.log("handCardsList card error")}o+=this.groupGap}}stopDragCard(){this.dragCard&&(this.dragCard=null,this.gameData.getHandCardData().updateCardGroupList(),this.updateCardGroup(this.gameData.getHandCardData().getGroupList()),this.dragCardGroupList=[])}showHandCardMask(e){this.imgHandCardMask.active=e}updateCardGroup(e){this.clearHandCards(),this.clearGroupFlag(),this.selectCardsList.length=0;let t=(e.length-1)*this.groupGap;for(let i=0;i<e.length;++i)t+=(e[i].cards.length-1)*this.cardGap+this.cardWidth;this.handCardPanel.width=t;let o=-t/2,a=0;for(let i=0;i<e.length;++i){let t=e[i],s=t.cards.length,n=this.imgGroupFlagList[i];n.node.active=!0,n.node.width=(s-1)*this.cardGap+this.cardWidth+10,n.node.x=o+n.node.width/2-5,c.UIUtils.setGroupFlag(n,t.groupFlag);for(let e=0;e<s;++e){let i=t.cards[e];if(a>=r.MAX_HAND_CARDS){cc.log("handCardsList card error");continue}let n=this.handPokerList[a];n.node.active=!0,n.setPoker(i),c.UIUtils.setJokerFlag(n),n.node.x=this.cardWidth/2+o,n.node.y=0,n.node.zIndex=a,a++,o+=e==s-1?this.cardWidth:this.cardGap}o+=this.groupGap}this.txtScore.string=this.gameData.getHandCardData().getPoint().toString(),this.updateDropChips()}updateBtnState(){let e=this.gameData.getGameStage();e==r.GameStage.PickCard?(this.btnDrop.node.active=!0,this.btnDrop.interactable=!0,this.btnGroup.node.active=!0,this.btnDiscard.node.active=!0,this.gameData.getActiveSeat()==this.gameData.getSelfSeat()?(this.btnDiscard.interactable=!1,this.updateBtnGroup()):this.canChangeCards()?(this.btnDiscard.interactable=!1,this.updateBtnGroup()):(this.btnConfirm.node.active=!1,this.btnDrop.node.active=!1,this.btnGroup.node.active=!1,this.btnDiscard.node.active=!1)):e==r.GameStage.Discard?(this.btnDrop.node.active=!0,this.btnDrop.interactable=!0,this.btnGroup.node.active=!0,this.btnDiscard.node.active=!0,this.gameData.getActiveSeat()==this.gameData.getSelfSeat()?(this.btnDrop.interactable=!1,this.updateBtnGroup(),this.updateBtnDiscard()):this.canChangeCards()?(this.btnDrop.node.active=!0,this.btnGroup.node.active=!0,this.btnDiscard.node.active=!0,this.updateBtnGroup()):(this.btnConfirm.node.active=!1,this.btnDrop.node.active=!1,this.btnGroup.node.active=!1,this.btnDiscard.node.active=!1)):e==r.GameStage.ConfirmGroup?this.canChangeCards()?(this.btnDrop.node.active=!0,this.btnDrop.interactable=!1,this.btnGroup.node.active=!0,this.btnDiscard.node.active=!1,this.btnConfirm.node.active=!0,this.btnConfirm.interactable=!0,this.updateBtnGroup()):(this.btnDrop.node.active=!1,this.btnGroup.node.active=!1,this.btnDiscard.node.active=!1,this.btnConfirm.node.active=!1):e==r.GameStage.Deal?(this.btnDrop.node.active=!1,this.btnGroup.node.active=!1,this.btnDiscard.node.active=!1):e==r.GameStage.Finish&&(this.btnDrop.node.active=!1,this.btnGroup.node.active=!1,this.btnDiscard.node.active=!1)}updateBtnGroup(){let e=this.selectCardsList.length;this.btnGroup.interactable=e>1}updateBtnDiscard(){let e=this.selectCardsList.length;this.btnDiscard.interactable=1==e}updateDropChips(){this.txtDropChips.string=c.UIUtils.getShortNumber(this.gameData.getDropChips())}updateBalance(){this.txtBalance.string=c.UIUtils.getShortNumber(s.default.userData.getBalance())}onNtcDiscard(e){e.seat==this.gameData.getSelfSeat()&&(this.btnDrop.interactable=!0,this.selectCardsList.length=0,this.stopDragCard())}onNtcGameInfo(e){if(this.gameData.getSelfSeat()<0||!this.gameData.getSelfPlayer().isPlaying())return;let t=this.gameData.getGameStage();if(t!=r.GameStage.Prepare&&t!=r.GameStage.Waiting){let e=this.gameData.getHandCardData().getGroupList();this.updateCardGroup(e),this.updateBtnState(),this.updateDropChips(),this.canChangeCards()||this.showHandCardMask(!0)}t==r.GameStage.PickCard&&this.gameData.getSelfSeat()==this.gameData.getActiveSeat()&&this.showPickCard(!0)}onNtcResetGame(e){this.clearGame()}onNtcStandUp(e){this.gameData.getSelfSeat()<0&&this.clearGame()}onNtcWaitPickCard(e){this.updateBtnState(),e.seat==this.gameData.getSelfSeat()?this.showPickCard(!0):this.showPickCard(!1)}onNtcDrawCard(e){this.showPickCard(!1),this.updateDropChips(),e.seat==this.gameData.getSelfSeat()&&(this.btnDrop.interactable=!1,this.selectCardsList.length=0,this.stopDragCard())}onNtcChowCard(e){this.showPickCard(!1),this.updateDropChips(),e.seat==this.gameData.getSelfSeat()&&(this.btnDrop.interactable=!1,this.selectCardsList.length=0,this.stopDragCard())}onNtcDrop(e){e.seat==this.gameData.getSelfSeat()&&(this.selectCardsList.length=0,this.stopDragCard(),this.showHandCardMask(!0))}onNtcShow(e){this.selectCardsList.length=0,this.updateBtnState(),e.seat==this.gameData.getSelfSeat()?this.showHandCardMask(!0):this.updateDropChips()}onNtcConfirmGroup(e){this.updateBtnState(),e.seat==this.gameData.getSelfSeat()&&this.showHandCardMask(!0)}onNtcFinish(){this.updateBalance(),this.clearGame()}};a([m({type:cc.Button,displayName:""})],f.prototype,"btnDiscard",void 0),a([m({type:cc.Button,displayName:""})],f.prototype,"btnGroup",void 0),a([m({type:cc.Button,displayName:""})],f.prototype,"btnDrop",void 0),a([m({type:cc.Button,displayName:""})],f.prototype,"btnConfirm",void 0),a([m(cc.Label)],f.prototype,"txtDropChips",void 0),a([m(cc.Label)],f.prototype,"txtScore",void 0),a([m(cc.Label)],f.prototype,"txtBalance",void 0),a([m({type:cc.Node,displayName:"\u684c\u4e0a\u724c\u5de6\u908aDraw\u5340\u7684\u4f4d\u7f6e"})],f.prototype,"tableCardLeftPosNode",void 0),a([m({type:cc.Node,displayName:"\u684c\u4e0a\u724c\u5de6\u908aDraw\u5340"})],f.prototype,"tableCardLeft",void 0),a([m({type:cc.Node,displayName:"\u684c\u4e0a\u724c\u53f3\u908aChow\u5340"})],f.prototype,"tableCardRight",void 0),a([m({type:cc.Node,displayName:"\u767c\u724c\u4f4d\u7f6e"})],f.prototype,"dealCardPos",void 0),a([m({type:cc.Node,displayName:"\u624b\u724c\u653e\u7f6e\u5340"})],f.prototype,"handCardPanel",void 0),a([m({type:cc.Sprite,displayName:"Flag\u986f\u793a\u7d44\u4ef6"})],f.prototype,"imgGroupFlag",void 0),a([m({type:cc.Node,displayName:""})],f.prototype,"imgHandCardMask",void 0),a([i.onNotice(n.NtcSetJoker)],f.prototype,"onNtcJokerCard",null),a([i.onNotice(n.NtcDiscard)],f.prototype,"onNtcDiscard",null),a([i.onNotice(n.NtcGameInfo)],f.prototype,"onNtcGameInfo",null),a([i.onNotice(n.NtcResetGame)],f.prototype,"onNtcResetGame",null),a([i.onNotice(n.NtcStandUp)],f.prototype,"onNtcStandUp",null),a([i.onNotice(n.NtcWaitPickCard)],f.prototype,"onNtcWaitPickCard",null),a([i.onNotice(n.NtcDrawCard)],f.prototype,"onNtcDrawCard",null),a([i.onNotice(n.NtcChowCard)],f.prototype,"onNtcChowCard",null),a([i.onNotice(n.NtcDrop)],f.prototype,"onNtcDrop",null),a([i.onNotice(n.NtcShow)],f.prototype,"onNtcShow",null),a([i.onNotice(n.NtcConfirmGroup)],f.prototype,"onNtcConfirmGroup",null),a([i.onNotice(n.NtcFinish)],f.prototype,"onNtcFinish",null),f=a([p],f),o.default=f,cc._RF.pop()},{"../Business/Data/CommonDefine":"CommonDefine","../Business/Data/DataManager":"DataManager","../Business/Logic/GameController":"GameController","../Business/Logic/GameNotice":"GameNotice","../MobileKit/MKIndex":"MKIndex","./Common/PopupManager":"PopupManager","./Common/PrefabPool":"PrefabPool","./Common/UIUtils":"UIUtils","./PokerNode":"PokerNode"}],GameController:[function(e,t,o){"use strict";cc._RF.push(t,"b33e4rPpodINYZCfe4x62BN","GameController");var a=this&&this.__decorate||function(e,t,o,a){var i,s=arguments.length,r=s<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,a);else for(var n=e.length-1;n>=0;n--)(i=e[n])&&(r=(s<3?i(r):s>3?i(t,o,r):i(t,o))||r);return s>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0}),o.GameController=o.CmdSetJoker=o.CmdConfirmGroup=o.CmdDrop=o.CmdDisCard=o.CmdChowCard=o.CmdDrawCard=o.CmdQuitGame=o.CmdSwitchTable=o.CmdIntoGame=o.CmdTestResult=o.CmdTestToWaitDiscard=o.CmdTestToWaitPick=o.CmdTestStart=void 0;const i=e("../../MobileKit/MKIndex"),s=e("../../Business/Data/DataManager"),r=e("../../Business/Data/CommonDefine"),n=e("./GameNotice"),c=e("../NetWork/NetworkManager"),l=e("../Data/HandCardsData"),d=e("../Data/PlayerData"),h=e("./SceneController");let u=class{};u=a([i.createCommand],u),o.CmdTestStart=u;let p=class{};p=a([i.createCommand],p),o.CmdTestToWaitPick=p;let m=class{};m=a([i.createCommand],m),o.CmdTestToWaitDiscard=m;let g=class{};g=a([i.createCommand],g),o.CmdTestResult=g;let f=class{constructor(e){this.gameCode="",this.gameCode=e}};f=a([i.createCommand],f),o.CmdIntoGame=f;let C=class{};C=a([i.createCommand],C),o.CmdSwitchTable=C;let y=class{};y=a([i.createCommand],y),o.CmdQuitGame=y;let S=class{};S=a([i.createCommand],S),o.CmdDrawCard=S;let b=class{};b=a([i.createCommand],b),o.CmdChowCard=b;let _=class{constructor(){this.card=-1}};_=a([i.createCommand],_),o.CmdDisCard=_;let P=class{};P=a([i.createCommand],P),o.CmdDrop=P;let D=class{};D=a([i.createCommand],D),o.CmdConfirmGroup=D;let L=class{constructor(){this.jokerCard=-1}};L=a([i.createCommand],L),o.CmdSetJoker=L;class k extends i.Controller{constructor(){super(),this.m_socket=null,this.setName("SettingController"),i.noticeCenter.registAllNotice(this),i.commandCenter.registAllCommand(this),this.m_socket=c.default.getInstance().getCommonSocket(),this.m_socket.registAllMsg(this),this.gameData=s.default.gameData}onExit(){i.noticeCenter.targetOff(this),i.commandCenter.targetOff(this)}onCmdTestStart(e){let t={},o=1;cc.tween(this).call(()=>{(t={}).player={};for(let e=0;e<3;e++)t.player.index=e,t.player.canPlay=!0,this.onNetSitDown(t),o+=1}).delay(1).call(()=>{(t={}).timeout=1e3,this.onNetReady(t)}).delay(1).call(()=>{t={};let e=[];for(let t=0;t<104;t++)e.push(t);s.default.gameData.getPlayerList().forEach(t=>{if(t.getSeat()>-1){let o=[];for(let t=0;t<13;t++){let t=i.Utils.randRange(0,e.length-1),a=e[t];e.splice(t,1),o.push(a)}t.setHandCards(o)}}),t.baseBet=10,t.timeout=1e4;let o=i.Utils.randRange(0,e.length-1),a=e[o];e.splice(o,1),t.firstPoker=a;let r=this.gameData.getSelfPlayer().getHandCards();t.myPokers=[],r.forEach(e=>{t.myPokers.push(e)}),t.myGroups=[];for(let i=0;i<4;i++){let e=3*i,o=[];o=[r[e],r[e+1],r[e+2]],3==i&&o.push(r[e+3]);let a={};a.pokers=o,a.groupFlag=0,t.myGroups.push(a)}let n=i.Utils.randRange(0,e.length-1),c=e[n];e.splice(n,1),t.jokerPoker=c,this.onNetDealCards(t)}).start()}onCmdTestToWaitPick(e){let t={};t.index=this.gameData.getSelfSeat(),t.timeout=1e4,this.onNetWaitPickPoker(t)}onCmdTestToWaitDiscard(e){let t={};t.index=this.gameData.getSelfSeat(),t.timeout=1e4,this.onNetWaitDiscard(t),cc.tween(this).delay(5).call(()=>{i.commandCenter.emit(new g)}).start()}onCmdTestResult(e){let t={myGold:25e3,timeout:1e4,winLostInfo:[]};s.default.gameData.getPlayerList().forEach(e=>{if(e.getSeat()<0)return;let o={},a=[0,1,2,3,4,5,6,7,9,8,10,11,12];o.groups=[];for(let t=0;t<4;t++){let i=3*t,r=[];r=[a[i],a[i+1],a[i+2]],3==t&&r.push(a[i+3]);let n={};n.pokers=r,e.getSeat()==s.default.gameData.getSelfSeat()?n.life=8:n.life=1,o.groups.push(n)}o.name="Player "+e.getSeat(),o.index=e.getSeat(),e.getSeat()==s.default.gameData.getSelfSeat()?(o.isWin=!0,o.point=0,o.winLosGold=1e4):(o.isWin=!1,o.point=77,o.winLosGold=2e3),t.winLostInfo.push(o)})}onCmdIntoGame(e){this.sendIntoGame(e.gameCode)}sendIntoGame(e){let t={};t.gameCode=e,cc.log("[send] IntoRoom = "+JSON.stringify(t)),this.m_socket.send("INTO_ROOM",t);let o={status:{}};o.status.state=r.GameStage.Prepare,o.status.nowPlayerIndex=3,o.players=[];let a={};a.index=o.status.nowPlayerIndex,a.canPlay=!0,o.players.push(a),o.my={},o.my.index=o.status.nowPlayerIndex,o.my.groups={},o.start={},o.start.baseBet=10,this.onAckIntoGame(o)}onAckIntoGame(e){let t=e;cc.log("IntoRoomRsp = "+JSON.stringify(t)),this.setGameDataFromMsg(t),i.noticeCenter.emit(new n.NtcGameInfo)}setGameDataFromMsg(e){let t=this.gameData;t.resetAllData(),t.setGameStage(e.status.state),t.setStageLeftTime(e.status.timeout/1e3);let o=t.getPlayerList();for(let a=0;a<e.players.length;++a){let t=e.players[a],i=o[t.index];i&&this.setPlayerFromMsg(i,t)}if(t.setSelfSeat(e.my.index),t.setActiveSeat(e.status.nowPlayerIndex),t.setPointValue(e.start.baseBet),e.status.state>r.GameStage.Prepare){t.setPoint(e.my.groups.point),t.setJokerCard(e.start.jokerPoker),t.setOpenCard(e.start.firstPoker),e.my.playRoundNum>=1&&t.setGetCard(!0);let o=t.getHandCardData();o.setHandCards(e.start.myPokers),o.updateCardGroupList()}}setPlayerFromMsg(e,t){e.setSeat(t.index),e.setPlaying(t.canPlay)}BackToLobby(){i.commandCenter.emit(new h.CmdScene(r.SceneType.Lobby))}onNetSitDown(e){let t=e;cc.log("[receive] PushUpTable = "+JSON.stringify(t)),this.setSitDownData(t)}setSitDownData(e){let t=this.gameData.getPlayerList()[e.player.index];if(!t)return void cc.log("error, cannot find player");this.setPlayerFromMsg(t,e.player);let o=new n.NtcSitDown;o.seat=t.getSeat(),i.noticeCenter.emit(o)}onNetStandUp(e){let t=e;cc.log("[receive] PushDownTable = "+JSON.stringify(t)),this.setStandUpData(t)}setStandUpData(e){let t=e.index,o=this.gameData,a=o.getPlayerList()[t];if(!a)return void cc.log("error, cannot find player");a.resetAllData(),t==o.getSelfSeat()&&o.setSelfSeat(-1);let s=new n.NtcStandUp;s.seat=t,i.noticeCenter.emit(s)}cardGroupToMsg(e){let t=[];return e.forEach(e=>{if(e.cards.length>0){let o={};o.pokers=e.cards,o.life=Number(e.groupFlag),t.push(o)}}),t}getCardGroupFromMsg(e){let t=[];return e.forEach(e=>{if(e.pokers.length>0){let o=new l.CardGroupData;o.cards=e.pokers,o.groupFlag=Number(e.life),t.push(o)}}),t}onNetReady(e){let t=e;cc.log("[receive] Ready = "+JSON.stringify(t)),this.gameData.setStageLeftTime(t.timeout/1e3),this.gameData.setGameStage(r.GameStage.Prepare);let o=new n.NtcPrepare;i.noticeCenter.emit(o)}onNetDealCards(e){let t=e;cc.log("[receive] Deal Cards = "+JSON.stringify(t));let o=this.gameData;o.resetGameData(),o.setPointValue(t.baseBet),o.setStageLeftTime(t.timeout/1e3),o.setGameStage(r.GameStage.Deal),o.setOpenCard(t.firstPoker);let a=o.getPlayerList();for(let i of a)i.getSeat()>=0&&i.setPlaying(!0);let s=this.gameData.getHandCardData();s.dealCards(t.myPokers),s.setCardGroup(this.getCardGroupFromMsg(t.myGroups)),s.updateCardGroupList();let c=new n.NtcDealCards;c.jokerCard=t.jokerPoker,i.noticeCenter.emit(c)}onSetJokerPoker(e){this.gameData.setJokerCard(e.jokerCard),this.gameData.getHandCardData().updateCardGroupList(),i.noticeCenter.emit(new n.NtcSetJoker)}onCmdSwitchTable(e){cc.log("[send] SwitchTable = "+JSON.stringify(void 0)),this.m_socket.send("SWITCH_TABLE",void 0)}onAckSwitchTable(e){cc.log("[receive] SwitchTableRsp code = "+e.state.code);let t=e;cc.log("ChangeTableRsp = "+JSON.stringify(t)),this.gameData.resetAllData(),i.noticeCenter.emit(new n.NtcResetGame),this.setGameDataFromMsg(t),i.noticeCenter.emit(new n.NtcGameInfo)}onCmdQuitGame(e){this.m_socket.isConnected(),cc.log("[send] ExitGame = "+JSON.stringify(void 0)),this.m_socket.send("EXIT_GAME",void 0),this.onAckExitGame({})}onAckExitGame(e){let t=e;cc.log("ExitRoomRsp = "+JSON.stringify(t)),this.BackToLobby()}onCmdDisCard(e){this.gameData.getHandCardData().discard(e.card),this.gameData.setChowCard(-1);let t={};t.poker=e.card,t.groups=this.cardGroupToMsg(this.gameData.getHandCardData().getGroupList()),t.point=this.gameData.getHandCardData().getPoint(),cc.log("[send] PlayPoker = "+JSON.stringify(t)),this.m_socket.send("DISCARD",t);let o={};o.poker=e.card,o.index=s.default.gameData.getSelfSeat(),this.onNetDiscard(o)}onNetWaitDiscard(e){let t=e;cc.log("[receive] WaitPlayPoker = "+JSON.stringify(t));let o=this.gameData;o.setActiveSeat(t.index),o.setStageLeftTime(t.timeout/1e3),o.setGameStage(r.GameStage.Discard);let a=new n.NtcWaitDiscard;a.seat=t.index,i.noticeCenter.emit(a)}onAckDiscard(e){let t=e;if(cc.log("PlayPokerRsp = "+JSON.stringify(t)),t.groups&&t.groups.length>0){let e=this.gameData.getHandCardData();e.setCardGroup(this.getCardGroupFromMsg(t.groups)),e.updateCardGroupList()}}onNetDiscard(e){let t=e;cc.log("[receive] PushPlayPoker = "+JSON.stringify(t));let o=this.gameData;o.setOpenCard(t.poker),o.isPreDiscard()||(o.getHandCardData().discard(t.poker),o.setChowCard(-1)),o.setPreDiscard(!1);let a=new n.NtcDiscard;a.seat=t.index,a.card=t.poker,i.noticeCenter.emit(a)}onNetWaitPickPoker(e){let t=e;cc.log("[receive] WaitGetPoker = "+JSON.stringify(t));let o=this.gameData;o.setActiveSeat(t.index),o.setStageLeftTime(t.timeout/1e3),o.setGameStage(r.GameStage.PickCard);let a=new n.NtcWaitPickCard;a.seat=t.index,i.noticeCenter.emit(a)}onCmdDrawCard(e){cc.log("[send] GetPoker = "+JSON.stringify(void 0)),this.m_socket.send("DRAW_CARD",void 0);let t={};t.poker=i.Utils.randRange(0,104),t.index=s.default.gameData.getSelfSeat(),this.onNetDrawPoker(t)}onNetDrawPoker(e){let t=e;cc.log("[receive] PushGetPoker = "+JSON.stringify(t)),t.index==this.gameData.getSelfSeat()&&t.poker>=0&&(this.gameData.getHandCardData().addCard(t.poker),this.gameData.setGetCard(!0)),this.gameData;let o=new n.NtcDrawCard;o.seat=t.index,o.card=t.poker,i.noticeCenter.emit(o)}onCmdChowCard(e){cc.log("[send] GetLastPoker = "+JSON.stringify(void 0)),this.m_socket.send("CHOW_CARD",void 0);let t={};t.poker=s.default.gameData.getOpenCard(),t.index=s.default.gameData.getSelfSeat(),this.onNetChowPoker(t)}onNetChowPoker(e){let t=e;cc.log("[receive] PushGetLastPoker = "+JSON.stringify(t)),t.index==this.gameData.getSelfSeat()&&(this.gameData.getHandCardData().addCard(t.poker),this.gameData.setChowCard(t.poker)),this.gameData.setOpenCard(t.lastPoker);let o=new n.NtcChowCard;o.seat=t.index,o.card=t.poker,i.noticeCenter.emit(o)}onCmdDrop(){cc.log("[send] Native Drop = "+JSON.stringify(void 0)),this.m_socket.send("DROP",void 0)}onNetDrop(e){let t=e;cc.log("[receive] PushAdmitLos = "+JSON.stringify(t));let o=this.gameData.getPlayerBySeat(t.index);if(!o)return void cc.log("error, cannot find player");let a=Number(t.losGold);o.setDropped(!0),o.setPoint(t.losPoint),o.setWinLose(a),this.gameData.setTableChips(this.gameData.getTableChips()+Math.abs(a));var s=new n.NtcDrop;s.seat=t.index,s.point=t.losPoint,s.chips=Math.abs(a),i.noticeCenter.emit(s)}onNetWaitConfirmGroup(e){let t=e;cc.log("[receive] WaitShotPoker = "+JSON.stringify(t));let o=this.gameData;o.setStageLeftTime(t.timeout/1e3),o.setGameStage(r.GameStage.ConfirmGroup);let a=o.getPlayerBySeat(t.winIndex);a&&a.setWinner(!0),this.gameData.setWinSeat(t.winIndex);var s=new n.NtcShow;s.seat=t.winIndex,i.noticeCenter.emit(s)}onCmdConfirmGroup(){this.gameData.getHandCardData().updateCardGroupList(),(void 0).groups=this.cardGroupToMsg(this.gameData.getHandCardData().getGroupList()),(void 0).point=this.gameData.getHandCardData().getPoint(),cc.log("[send] FinishSortPoker = "+JSON.stringify(void 0)),this.m_socket.send("CONFIRM_GROUP",void 0)}onNetPlayerConfirmGroup(e){let t=e.body;cc.log("[receive] PushFinishSortPoker = "+JSON.stringify(t));let o=this.gameData.getPlayerBySeat(t.index);if(!o)return void cc.log("error, cannot find player");let a=Number(t.losGold);o.setConfirmed(!0),o.setPoint(t.losPoint),o.setWinLose(a),this.gameData.setTableChips(this.gameData.getTableChips()+Math.abs(a));var s=new n.NtcConfirmGroup;s.seat=t.index,s.point=t.losPoint,s.chips=Math.abs(a),i.noticeCenter.emit(s)}onNetGameResult(e){let t=e;cc.log("[receive] Stop = "+JSON.stringify(t)),s.default.userData.setBalance(Number(t.myGold)),this.gameData.setStageLeftTime(t.timeout/1e3),this.gameData.setGameStage(r.GameStage.Finish);let o=-1,a=this.gameData.getResultData();a.players=[];for(let i=0;i<t.winLostInfo.length;++i){let e=new d.PlayerData,s=t.winLostInfo[i];e.setCardGroup(this.getCardGroupFromMsg(s.groups)),e.setNickName(s.name),e.setWinner(s.isWin),e.setPoint(s.point),e.setWinLose(Number(s.winLosGold)),a.players.push(e),s.isWin&&(this.gameData.setTableChips(Number(s.winLosGold)),o=s.index)}o>=0&&this.gameData.setWinSeat(o),a.players.sort(function(e,t){return t.getWinLose()-e.getWinLose()}),a.jokerPoint=this.gameData.getJokerPoint(),i.noticeCenter.emit(new n.NtcFinish)}}a([i.onCommand(u)],k.prototype,"onCmdTestStart",null),a([i.onCommand(p)],k.prototype,"onCmdTestToWaitPick",null),a([i.onCommand(m)],k.prototype,"onCmdTestToWaitDiscard",null),a([i.onCommand(g)],k.prototype,"onCmdTestResult",null),a([i.onCommand(f)],k.prototype,"onCmdIntoGame",null),a([i.onMsg("INTO_ROOM")],k.prototype,"onAckIntoGame",null),a([i.onMsg("PLAYER_SIT_DOWN")],k.prototype,"onNetSitDown",null),a([i.onMsg("PLAYER_STAND_UP")],k.prototype,"onNetStandUp",null),a([i.onMsg("READY")],k.prototype,"onNetReady",null),a([i.onMsg("DEAL_CARDS")],k.prototype,"onNetDealCards",null),a([i.onCommand(L)],k.prototype,"onSetJokerPoker",null),a([i.onCommand(C)],k.prototype,"onCmdSwitchTable",null),a([i.onMsg("SWITCH_TABLE")],k.prototype,"onAckSwitchTable",null),a([i.onCommand(y)],k.prototype,"onCmdQuitGame",null),a([i.onMsg("EXIT_GAME")],k.prototype,"onAckExitGame",null),a([i.onCommand(_)],k.prototype,"onCmdDisCard",null),a([i.onMsg("WAIT_FOR_DISCARD")],k.prototype,"onNetWaitDiscard",null),a([i.onMsg("DISCARD")],k.prototype,"onAckDiscard",null),a([i.onMsg("DISCARD")],k.prototype,"onNetDiscard",null),a([i.onMsg("WAIT_FOR_PICK_POKER")],k.prototype,"onNetWaitPickPoker",null),a([i.onCommand(S)],k.prototype,"onCmdDrawCard",null),a([i.onMsg("DRAW_CARD")],k.prototype,"onNetDrawPoker",null),a([i.onCommand(b)],k.prototype,"onCmdChowCard",null),a([i.onMsg("CHOW_CARD")],k.prototype,"onNetChowPoker",null),a([i.onCommand(P)],k.prototype,"onCmdDrop",null),a([i.onMsg("DROP")],k.prototype,"onNetDrop",null),a([i.onMsg("WAIT_FOR_CONFIRM_GROUP")],k.prototype,"onNetWaitConfirmGroup",null),a([i.onCommand(D)],k.prototype,"onCmdConfirmGroup",null),a([i.onMsg("CONFIRM_GROUP")],k.prototype,"onNetPlayerConfirmGroup",null),a([i.onMsg("GAME_RESULT")],k.prototype,"onNetGameResult",null),o.GameController=k,cc._RF.pop()},{"../../Business/Data/CommonDefine":"CommonDefine","../../Business/Data/DataManager":"DataManager","../../MobileKit/MKIndex":"MKIndex","../Data/HandCardsData":"HandCardsData","../Data/PlayerData":"PlayerData","../NetWork/NetworkManager":"NetworkManager","./GameNotice":"GameNotice","./SceneController":"SceneController"}],GameData:[function(e,t,o){"use strict";cc._RF.push(t,"587c8jaYAZM36hqR3idCuRU","GameData"),Object.defineProperty(o,"__esModule",{value:!0}),o.GameData=o.ResultData=void 0;const a=e("./CommonDefine"),i=e("./PlayerData"),s=e("./HandCardsData"),r=e("./PokerData");class n{constructor(){this.jokerPoint=-1,this.players=[]}}o.ResultData=n,o.GameData=class{constructor(){this.m_gameStage=a.GameStage.Prepare,this.m_players=new Array(a.MAX_PLAYERS),this.m_posTrans=0,this.m_selfSeat=-1,this.m_pointValue=0,this.m_activeSeat=-1,this.m_stageLeftTime=0,this.m_jokerCard=-1,this.m_openCard=-1,this.m_isGetCard=!1,this.m_handCardData=null,this.m_point=0,this.m_chowCard=-1,this.m_isPreDiscard=!1,this.m_tableChips=0,this.m_winSeat=-1,this.m_resultData=new n,this.m_deckNum=0,this.m_maxWin=0,this.m_handCardData=new s.HandCardsData;for(var e=0;e<a.MAX_PLAYERS;++e)this.m_players[e]=new i.PlayerData}resetGameData(){this.m_gameStage=a.GameStage.Prepare,this.m_activeSeat=-1,this.m_stageLeftTime=0,this.m_jokerCard=-1,this.m_openCard=-1,this.m_isGetCard=!1,this.m_point=0,this.m_isPreDiscard=!1,this.m_tableChips=0,this.m_winSeat=-1,this.m_handCardData.resetGameData();for(var e=0;e<a.MAX_PLAYERS;++e){var t=this.m_players[e];t&&t.resetGameData()}}resetAllData(){this.resetGameData(),this.m_pointValue=0,this.m_selfSeat=-1,this.m_posTrans=0;for(var e=0;e<a.MAX_PLAYERS;++e){var t=this.m_players[e];t&&t.resetAllData()}this.m_deckNum=0,this.m_maxWin=0}getGameStage(){return this.m_gameStage}setGameStage(e){this.m_gameStage=e}setSelfSeat(e){this.m_selfSeat=e,e>=0&&(this.m_posTrans=(2-this.m_selfSeat+a.MAX_PLAYERS)%a.MAX_PLAYERS)}getSelfSeat(){return this.m_selfSeat}getSelfPlayer(){return this.m_selfSeat>=0?this.getPlayerBySeat(this.m_selfSeat):null}getPlayerList(){return this.m_players}getPlayerCount(){for(var e=0,t=0;t<this.m_players.length;++t)this.m_players[t].getSeat()>=0&&e++;return e}getPlayerBySeat(e){if(e<0)return null;let t=null;for(var o=0;o<this.m_players.length;++o){var a=this.m_players[o];if(a.getSeat()==e){t=a;break}}return t}getPosBySeat(e){return(e+this.m_posTrans)%a.MAX_PLAYERS}getSeatByPos(e){return(e-this.m_posTrans+a.MAX_PLAYERS)%a.MAX_PLAYERS}getPointValue(){return this.m_pointValue}setPointValue(e){this.m_pointValue=e}getActiveSeat(){return this.m_activeSeat}setActiveSeat(e){this.m_activeSeat=e}getStageLeftTime(){return this.m_stageLeftTime}setStageLeftTime(e){this.m_stageLeftTime=e}getJokerCard(){return this.m_jokerCard}getJokerPoint(){let e=r.PokerData.getPokerPoint(this.m_jokerCard);return r.PokerData.isJoker(this.m_jokerCard)&&(e=r.PokerPoint.PointA),e}setJokerCard(e){this.m_jokerCard=e,this.m_handCardData.setJokerPoint(this.getJokerPoint())}getOpenCard(){return this.m_openCard}setOpenCard(e){this.m_openCard=e}isWildJoker(e){return!(e<0)&&r.PokerData.getPokerPoint(e)==this.getJokerPoint()}getHandCardData(){return this.m_handCardData}getPoint(){return this.m_point}setPoint(e){this.m_point=e}setGetCard(e){this.m_isGetCard=e}isGetCard(){return this.m_isGetCard}getChowCard(){return this.m_chowCard}setChowCard(e){this.m_chowCard=e}setPreDiscard(e){this.m_isPreDiscard=e}isPreDiscard(){return this.m_isPreDiscard}setTableChips(e){this.m_tableChips=e}getTableChips(){return this.m_tableChips}getDropChips(){if(this.m_gameStage==a.GameStage.ConfirmGroup){let e=this.m_handCardData.getPoint();return 0==e&&(e=2),this.m_pointValue*e}return this.m_isGetCard?this.m_pointValue*a.MAX_POINT/2:this.m_pointValue*a.MAX_POINT/4}getWinSeat(){return this.m_winSeat}setWinSeat(e){this.m_winSeat=e}getResultData(){return this.m_resultData}setDeckNum(e){this.m_deckNum=e}getDeckNum(){return this.m_deckNum}setMaxWin(e){this.m_maxWin=e}getMaxWin(){return this.m_maxWin}isInGame(){let e=!0;if(this.getGameStage()==a.GameStage.Prepare||this.getGameStage()==a.GameStage.Finish)e=!1;else if(this.getSelfSeat()<0)e=!1;else{let t=this.getSelfPlayer();t.isPlaying()?t.isDropped()?e=!1:t.isWinner()?e=!1:t.isConfirmed()&&(e=!1):e=!1}return e}},cc._RF.pop()},{"./CommonDefine":"CommonDefine","./HandCardsData":"HandCardsData","./PlayerData":"PlayerData","./PokerData":"PokerData"}],GameEntryCell:[function(e,t,o){"use strict";cc._RF.push(t,"5b909jhCMVA1KYQM3pMKkzO","GameEntryCell");var a=this&&this.__decorate||function(e,t,o,a){var i,s=arguments.length,r=s<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,a);else for(var n=e.length-1;n>=0;n--)(i=e[n])&&(r=(s<3?i(r):s>3?i(t,o,r):i(t,o))||r);return s>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0}),o.GameEntryCell=void 0;const i=e("../../MobileKit/MKIndex"),s=e("../../Business/Data/DataManager"),r=e("../../Business/Logic/SceneController"),n=e("../Common/UIUtils"),c=e("../../Business/Data/CommonDefine"),{ccclass:l,property:d,menu:h}=cc._decorator;let u=class extends cc.Component{constructor(){super(...arguments),this.txtPointValue=null,this.imgBg=null,this.pointValueIdx=0}onLoad(){n.UIUtils.NodeClickEvent(this.node,this.onTouchEnterGame.bind(this))}setData(e){this.pointValueIdx=e;let t=s.default.homeData.getPointValueList();this.txtPointValue.string=t[e].toString(),e=e>4?4:e,this.imgBg.spriteFrame=cc.resources.get(c.SpriteList.GameEntey+e,cc.SpriteFrame)}onTouchEnterGame(){s.default.homeData.setGameId(this.pointValueIdx.toString()),i.commandCenter.emit(new r.CmdScene(c.SceneType.Game))}};a([d(cc.Label)],u.prototype,"txtPointValue",void 0),a([d(cc.Sprite)],u.prototype,"imgBg",void 0),u=a([l,h("Lobby/GameEntryCell")],u),o.GameEntryCell=u,cc._RF.pop()},{"../../Business/Data/CommonDefine":"CommonDefine","../../Business/Data/DataManager":"DataManager","../../Business/Logic/SceneController":"SceneController","../../MobileKit/MKIndex":"MKIndex","../Common/UIUtils":"UIUtils"}],GameNotice:[function(e,t,o){"use strict";cc._RF.push(t,"31af3V/1NxB4o3CuR3dhUJ9","GameNotice");var a=this&&this.__decorate||function(e,t,o,a){var i,s=arguments.length,r=s<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,a);else for(var n=e.length-1;n>=0;n--)(i=e[n])&&(r=(s<3?i(r):s>3?i(t,o,r):i(t,o))||r);return s>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0}),o.NtcFinish=o.NtcConfirmGroup=o.NtcShow=o.NtcDrop=o.NtcChowCard=o.NtcDrawCard=o.NtcWaitPickCard=o.NtcPrepare=o.NtcStandUp=o.NtcSitDown=o.NtcResetGame=o.NtcGameInfo=o.NtcDiscard=o.NtcWaitDiscard=o.NtcSetJoker=o.NtcDealCards=o.NtcDisConnect=void 0;const i=e("../../MobileKit/MKIndex");let s=class{};s=a([i.createNotice],s),o.NtcDisConnect=s;let r=class{constructor(){this.jokerCard=-1}};r=a([i.createNotice],r),o.NtcDealCards=r;let n=class{};n=a([i.createNotice],n),o.NtcSetJoker=n;let c=class{constructor(){this.seat=-1}};c=a([i.createNotice],c),o.NtcWaitDiscard=c;let l=class{constructor(){this.seat=-1,this.card=-1}};l=a([i.createNotice],l),o.NtcDiscard=l;let d=class{};d=a([i.createNotice],d),o.NtcGameInfo=d;let h=class{};h=a([i.createNotice],h),o.NtcResetGame=h;let u=class{constructor(){this.seat=-1}};u=a([i.createNotice],u),o.NtcSitDown=u;let p=class{constructor(){this.seat=-1}};p=a([i.createNotice],p),o.NtcStandUp=p;let m=class{};m=a([i.createNotice],m),o.NtcPrepare=m;let g=class{constructor(){this.seat=-1}};g=a([i.createNotice],g),o.NtcWaitPickCard=g;let f=class{constructor(){this.seat=-1,this.card=-1}};f=a([i.createNotice],f),o.NtcDrawCard=f;let C=class{constructor(){this.seat=-1,this.card=-1}};C=a([i.createNotice],C),o.NtcChowCard=C;let y=class{constructor(){this.seat=-1,this.point=0,this.chips=0}};y=a([i.createNotice],y),o.NtcDrop=y;let S=class{constructor(){this.seat=-1}};S=a([i.createNotice],S),o.NtcShow=S;let b=class{constructor(){this.seat=-1,this.point=0,this.chips=0}};b=a([i.createNotice],b),o.NtcConfirmGroup=b;let _=class{};_=a([i.createNotice],_),o.NtcFinish=_,cc._RF.pop()},{"../../MobileKit/MKIndex":"MKIndex"}],GameRecordLayer:[function(e,t,o){"use strict";cc._RF.push(t,"4b45aHvWhBEwoYHbbdBHw2o","GameRecordLayer");var a=this&&this.__decorate||function(e,t,o,a){var i,s=arguments.length,r=s<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,a);else for(var n=e.length-1;n>=0;n--)(i=e[n])&&(r=(s<3?i(r):s>3?i(t,o,r):i(t,o))||r);return s>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../MobileKit/MKIndex"),s=e("../../Business/Data/DataManager"),r=e("../Common/PopupBase"),n=e("../Common/PrefabPool"),c=e("../../Business/Data/CommonDefine"),l=e("./RecordPage"),d=e("./FilterCell"),{ccclass:h,property:u,menu:p}=cc._decorator;let m=class extends r.default{constructor(){super(...arguments),this.txtPage=null,this.noDataTips=null,this.pageView=null,this.btnSwitchRight=null,this.btnSwitchLeft=null,this.filterLayerNode=null,this.btnShowFilter=null,this.txtNowShow=null,this.filterExpendLayer=null,this.filterCell=null,this.selectPointValue=-1,this.filterCellList=[]}static get path(){return"Scenes/Game/game_record_layer"}onLoad(){this.main||(this.main=this.node),this.btnShowFilter.node.on("click",this.onTouchShowFilter,this),this.btnSwitchRight.node.on("click",this.onTouchRight,this),this.btnSwitchLeft.node.on("click",this.onTouchLeft,this),this.pageView.node.on("page-turning",this.onPageTurning,this),this.initUI(),this.clearPage(),this.resetBtnState()}initUI(){this.filterCell.removeFromParent(!1),s.default.homeData.getPointValueList().forEach((e,t)=>{let o=cc.instantiate(this.filterCell);o.setParent(this.filterExpendLayer),o.getComponent(d.FilterCell).setData(t,this.showRecord.bind(this)),this.filterCellList.push(o)}),this.resizeFilterLayer(),this.filterLayerNode.active=!1}updateDisplay(){this.showRecord(0)}onAfterHide(){this.clearPage()}showRecord(e){if(e==this.selectPointValue)return;this.clearPage(),this.filterCellList.forEach((t,o)=>{t.active=o!=e}),this.selectPointValue=e;let t=s.default.homeData.getPointValueList();this.txtNowShow.string=t[e].toString();let o=s.default.userData.getGameRecordLst();if(0==o.length)return this.noDataTips.active=!0,this.btnSwitchLeft.interactable=!1,void(this.btnSwitchRight.interactable=!1);this.noDataTips.active=!1,o.length,o.sort((e,t)=>t.time-e.time);let a=o.filter(t=>t.pv==e),i=a.length/10,r=a.length%10==0?i:Math.floor(i)+1;for(let s=0;s<r;s++){let e=n.default.get(c.PrefabList.RecordPage),t=e.getComponent(l.RecordPage);this.pageView.addPage(e);let o=10*s,i=s==r-1?a.length:o+10,d=[];for(let s=o;s<i;s++)d.push(a[s]);t.setRecordList(d)}this.resetBtnState()}clearPage(){this.pageView.removeAllPages()}onTouchClose(){this.hide()}onTouchRight(){let e=this.pageView.getCurrentPageIndex()+1;e<this.pageView.getPages().length&&this.pageView.setCurrentPageIndex(e)}onTouchLeft(){let e=this.pageView.getCurrentPageIndex()-1;e<0||this.pageView.setCurrentPageIndex(e)}onTouchShowFilter(){this.filterLayerNode.active=!this.filterLayerNode.active,this.filterLayerNode.active&&i.AudioEngine.playEffect(c.SoundList.Click)}onPageTurning(e){this.resetBtnState()}resetBtnState(){let e=this.pageView.getCurrentPageIndex();this.txtPage.string=(e+1).toString();let t=this.pageView.getPages().length;0==e?(this.btnSwitchLeft.interactable=!1,this.btnSwitchRight.interactable=t>1):e+1==t?(this.btnSwitchLeft.interactable=!0,this.btnSwitchRight.interactable=!1):(this.btnSwitchLeft.interactable=!0,this.btnSwitchRight.interactable=!0)}resizeFilterLayer(){let e=s.default.homeData.getPointValueList();this.filterExpendLayer.height=27+(this.filterCell.height+6)*(e.length-1)}};a([u(cc.Label)],m.prototype,"txtPage",void 0),a([u(cc.Node)],m.prototype,"noDataTips",void 0),a([u(cc.PageView)],m.prototype,"pageView",void 0),a([u(cc.Button)],m.prototype,"btnSwitchRight",void 0),a([u(cc.Button)],m.prototype,"btnSwitchLeft",void 0),a([u(cc.Node)],m.prototype,"filterLayerNode",void 0),a([u(cc.Button)],m.prototype,"btnShowFilter",void 0),a([u(cc.Label)],m.prototype,"txtNowShow",void 0),a([u(cc.Node)],m.prototype,"filterExpendLayer",void 0),a([u(cc.Node)],m.prototype,"filterCell",void 0),m=a([h,p("Lobby/GameRecordLayer")],m),o.default=m,cc._RF.pop()},{"../../Business/Data/CommonDefine":"CommonDefine","../../Business/Data/DataManager":"DataManager","../../MobileKit/MKIndex":"MKIndex","../Common/PopupBase":"PopupBase","../Common/PrefabPool":"PrefabPool","./FilterCell":"FilterCell","./RecordPage":"RecordPage"}],GameScene:[function(e,t,o){"use strict";cc._RF.push(t,"a7d62FcWh5K2YaaMxNMEQCG","GameScene");var a=this&&this.__decorate||function(e,t,o,a){var i,s=arguments.length,r=s<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,a);else for(var n=e.length-1;n>=0;n--)(i=e[n])&&(r=(s<3?i(r):s>3?i(t,o,r):i(t,o))||r);return s>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});const i=e("../MobileKit/MKIndex"),s=e("../Business/Data/DataManager"),r=e("../Business/Data/CommonDefine"),n=e("../Business/Logic/GameNotice"),c=e("./Common/UIUtils"),l=e("./Common/PopupManager"),d=e("../Business/Logic/GameController"),h=e("./Common/PrefabPool"),u=e("./PlayerNode"),p=e("./PokerNode"),m=e("./GameAction"),g=e("./Common/MessageView"),f=e("../Business/Data/SaveDataManager"),C=e("./Common/ConfirmDialog"),{ccclass:y,property:S,menu:b}=cc._decorator;let _=class extends cc.Component{constructor(){super(...arguments),this.nowLanguage=r.LangList.en,this.txtBalance=null,this.txtScore=null,this.imgBottomTips=null,this.imgMsg=null,this.txtMsg=null,this.txtTableChips=null,this.bgTableChips=null,this.btnMenu=null,this.btnInfor=null,this.imgMusic=null,this.imgSound=null,this.imgMusicOn=null,this.imgMusicOff=null,this.imgSoundOn=null,this.imgSoundOff=null,this.menuLayer=null,this.btnSwitch=null,this.btnExit=null,this.btnHowToPlay=null,this.playerPosNode=null,this.tableCardLeft=null,this.tableCardLeftPosNode=null,this.tableCardRight=null,this.dealCardNode=null,this.playerList=[],this.leftTimeTag=11,this.firstInGame=!0,this.openCard=null,this.jokerCard=null,this.tableCardLeftPos=null,this.dealCardPos=null,this.musicOn=!1,this.soundOn=!1}get language(){return this.nowLanguage}set language(e){this.nowLanguage=e,i.LocalLang.setLanguage(r.LangList[e])}onLoad(){i.noticeCenter.registAllNotice(this),this.gameData=s.default.gameData,this.gameAction=this.node.getComponent(m.default),i.Utils.resize(),this.resizeUI(),this.initUI(),this.updateBalance(),this.clearGame(),cc.view.setResizeCallback(()=>{i.Utils.resize(),this.resizeUI()}),i.AudioEngine.playMusic(r.SoundList.Bgm,!0),i.AudioEngine.setMusicVolume(.4),cc.tween(this.node).call(()=>{i.commandCenter.emit(new d.CmdIntoGame(s.default.homeData.getGameId()))}).delay(.5).call(()=>{i.commandCenter.emit(new d.CmdTestStart)}).start()}initUI(){cc.macro.ENABLE_MULTI_TOUCH=!1,c.UIUtils.ButtonEvent(this.btnMenu,this.onTouchMenu.bind(this)),c.UIUtils.ButtonEvent(this.btnInfor,this.onTouchInfor.bind(this)),c.UIUtils.ButtonEvent(this.btnSwitch,this.onTouchSwitch.bind(this)),c.UIUtils.ButtonEvent(this.btnExit,this.onTouchExit.bind(this)),c.UIUtils.ButtonEvent(this.btnHowToPlay,this.onTouchHowToPlay.bind(this)),c.UIUtils.NodeClickEvent(this.imgMusic.node,this.onTouchMusic.bind(this)),c.UIUtils.NodeClickEvent(this.imgSound.node,this.onTouchSound.bind(this)),this.menuLayer.active=!1,this.musicOn=f.default.getMusicEnable(),this.soundOn=f.default.getEffectEnable(),this.imgMusic.spriteFrame=this.musicOn?this.imgMusicOn:this.imgMusicOff,this.imgSound.spriteFrame=this.soundOn?this.imgSoundOn:this.imgSoundOff,this.playerPosNode.children.forEach(e=>{let t=h.default.get(r.PrefabList.PlayerNode);t.setPosition(0,0),t.setParent(e);let o=t.getComponent(u.default);this.playerList.push(o),o.setTablePos(this.tableCardLeft,this.tableCardRight,this.bgTableChips)});let e=h.default.get(r.PrefabList.PokerNode);e.setParent(this.tableCardRight),e.setPosition(0,0),this.openCard=e.getComponent(p.default);let t=h.default.get(r.PrefabList.PokerNode);t.setParent(this.tableCardLeftPosNode),t.setPosition(0,0),this.jokerCard=t.getComponent(p.default),this.tableCardLeftPos=cc.v3(this.tableCardLeft.x,this.tableCardLeft.y,0),this.dealCardPos=cc.v3(this.dealCardNode.x,this.dealCardNode.y,0)}resizeUI(){this.gameAction.resizeUI()}clearGame(){this.bgTableChips.active=!1,this.hideMsg(),this.jokerCard.node.active=!1,this.openCard.node.active=!1,this.tableCardLeft.position=this.tableCardLeftPos}stopDealCardsAction(){this.tableCardLeft.stopAllActions(),this.tableCardLeft.zIndex=0,this.jokerCard.node.stopAllActions(),this.jokerCard.node.angle=0,this.jokerCard.node.zIndex=0,this.openCard.node.stopAllActions(),this.openCard.node.zIndex=0}onTouchMenu(){this.menuLayer.active=!this.menuLayer.active}onTouchInfor(){l.default.show(r.PrefabList.InforLayer),this.menuLayer.active=!1}onTouchMusic(){this.musicOn=!this.musicOn,this.imgMusic.spriteFrame=this.musicOn?this.imgMusicOn:this.imgMusicOff,f.default.setMusicEnable(this.musicOn),i.AudioEngine.setMusicEnabled(this.musicOn)}onTouchSound(){this.soundOn=!this.soundOn,this.imgSound.spriteFrame=this.soundOn?this.imgSoundOn:this.imgSoundOff,f.default.setEffectEnable(this.soundOn),i.AudioEngine.setEffectsEnabled(this.soundOn),i.AudioEngine.playEffect(r.SoundList.Click)}onTouchSwitch(){i.commandCenter.emit(new d.CmdSwitchTable),this.menuLayer.active=!1}onTouchExit(){if(this.gameData.isInGame()){let e="\u20b9"+c.UIUtils.getShortNumber(s.default.gameData.getDropChips());C.default.show(i.LocalLang.get("game_quit_tips",[e]),e=>{e&&i.commandCenter.emit(new d.CmdQuitGame)})}else i.commandCenter.emit(new d.CmdQuitGame);this.menuLayer.active=!1}onTouchHowToPlay(){l.default.show(r.PrefabList.HelpLayer),this.menuLayer.active=!1}updateBalance(){this.txtBalance.string=c.UIUtils.getShortNumber(s.default.userData.getBalance(),!0)}updateOpenCard(e){this.openCard.node.active=!0,this.openCard.setPoker(e),c.UIUtils.setJokerFlag(this.openCard)}updateJokerCard(e){this.jokerCard.node.active=!0,this.jokerCard.node.position=this.tableCardLeftPos,this.jokerCard.setPoker(e),c.UIUtils.setJokerFlag(this.jokerCard),this.jokerCard.node.zIndex=0,this.tableCardLeft.position=this.tableCardLeftPos,this.tableCardLeft.zIndex=1}updatePlayers(){let e=this.gameData.getPlayerList();for(let t=0;t<e.length;++t){let o=e[t],a=this.gameData.getPosBySeat(t),i=this.playerList[a];i&&(o.getSeat()>=0?i.sitDown(o):i.standUp())}}updateTableChips(){let e=this.gameData.getTableChips();e>0?(this.bgTableChips.active=!0,this.txtTableChips.string=c.UIUtils.getShortNumber(e)):this.bgTableChips.active=!1}showMsg(e,t=2){this.imgMsg.node.opacity=255,this.txtMsg.string=e,this.imgMsg.node.stopAllActions(),cc.tween(this.imgMsg.node).delay(t).to(0,{opacity:0}).start()}hideMsg(){this.node.stopActionByTag(this.leftTimeTag),this.imgMsg.node.stopAllActions(),this.imgMsg.node.opacity=0}showBottomTips(e,t=2){this.imgBottomTips.node.opacity=255,this.imgBottomTips.node.stopAllActions(),this.imgBottomTips.spriteFrame=0==e?cc.resources.get(r.SpriteList.TipsDiscard,cc.SpriteFrame):cc.resources.get(r.SpriteList.TipsPick,cc.SpriteFrame),cc.tween(this.imgBottomTips.node).delay(t).to(0,{opacity:0}).start()}hideBottomTips(){this.imgBottomTips.node.stopAllActions(),this.imgBottomTips.node.opacity=0}showResult(e){cc.tween(this.node).delay(e).call(()=>{l.default.hide(),l.default.show(r.PrefabList.ResultLayer)}).start()}showStartingMsg(e){let t=Math.floor(e)-1;if(t<=0)return void this.showMsg(i.LocalLang.get("game_starting_game"));let o=cc.tween(this.node);o.tag(this.leftTimeTag);for(let a=t;0<a;a--)o.call(()=>{this.showMsg(i.LocalLang.get("game_starting_in_sec",[a]))}),o.delay(1);o.call(()=>{this.showMsg(i.LocalLang.get("game_starting_game"))}),cc.Tween.stopAllByTag(this.leftTimeTag),o.start()}dealTableCards(e){let t=cc.tween(this.tableCardLeft).to(.5,{x:this.tableCardLeftPos.x,y:this.tableCardLeftPos.y},{easing:"smooth"}),o=cc.tween(this.openCard.node).parallel(cc.tween().to(.5,{x:0,y:0},{easing:"smooth"}),cc.tween().call(()=>{i.AudioEngine.playEffect(r.SoundList.CardFlip1),c.UIUtils.flipToFront(this.openCard.node,.5,()=>{this.openCard.setPoker(s.default.gameData.getOpenCard())})}));this.jokerCard.setPoker(-1);let a=this.jokerCard.node.parent.convertToNodeSpaceAR(this.tableCardLeftPosNode.parent.convertToWorldSpaceAR(this.tableCardLeftPosNode.position));this.jokerCard.node.position=a,this.showMsg(i.LocalLang.get("game_dealing_wildjoker"),3);let n=cc.tween(this.jokerCard.node).by(.5,{x:-this.jokerCard.node.width-40},{easing:"smooth"}).call(()=>{i.AudioEngine.playEffect(r.SoundList.CardFlip2),c.UIUtils.flipToFront(this.jokerCard.node,.5,()=>{let t=new d.CmdSetJoker;t.jokerCard=e,i.commandCenter.emit(t),this.jokerCard.setPoker(s.default.gameData.getJokerCard()),c.UIUtils.setJokerFlag(this.jokerCard),c.UIUtils.setJokerFlag(this.openCard)})}).delay(.5).parallel(cc.tween().by(.5,{x:this.jokerCard.node.width-40},{easing:"smooth"}),cc.tween().to(.5,{angle:10},{easing:"smooth"})).delay(.5).call(()=>{this.hideMsg()});cc.tween(this.node).call(()=>{o.start()}).delay(.5).call(()=>{t.start()}).delay(.5).call(()=>{this.jokerCard.node.active=!0,n.start()}).delay(2).call(()=>{i.commandCenter.emit(new d.CmdTestToWaitPick)}).start()}onNtcGameInfo(){this.updatePlayers();let e=this.gameData.getGameStage();if(e!=r.GameStage.Prepare&&e!=r.GameStage.Waiting){this.updateOpenCard(this.gameData.getOpenCard()),this.updateJokerCard(this.gameData.getJokerCard());let e=this.gameData.getActiveSeat(),t=this.gameData.getPosBySeat(e),o=this.playerList[t];o&&o.startProgress(),this.updateTableChips()}e!=r.GameStage.Finish&&e!=r.GameStage.Prepare||this.showStartingMsg(this.gameData.getStageLeftTime()),e==r.GameStage.Waiting&&this.showMsg(i.LocalLang.get("game_waiting_players"),999),this.firstInGame&&e==r.GameStage.Prepare&&(l.default.show(r.PrefabList.InforLayer,!0),this.firstInGame=!1)}onNtcResetGame(){for(var e=0;e<this.playerList.length;++e)this.playerList[e].standUp();this.clearGame()}onNtcSitDown(e){let t=this.gameData.getPosBySeat(e.seat),o=this.playerList[t];o&&o.sitDown(this.gameData.getPlayerBySeat(e.seat))}onNtcStandUp(e){let t=this.gameData.getPosBySeat(e.seat),o=this.playerList[t];o&&o.standUp()}onNtcPrepare(){this.showStartingMsg(this.gameData.getStageLeftTime())}onNtcDealCards(e){this.stopDealCardsAction(),this.node.stopActionByTag(this.leftTimeTag),this.tableCardLeft.position=this.dealCardPos,this.openCard.setPoker(-1),this.openCard.node.active=!0;let t=this.openCard.node.parent.convertToNodeSpaceAR(this.dealCardNode.parent.convertToWorldSpaceAR(this.dealCardNode.position));this.openCard.node.position=t,this.showMsg(i.LocalLang.get("game_dealing_cards")),this.gameAction.dealCards(()=>{this.dealTableCards(e.jokerCard)}),i.AudioEngine.playEffect(r.SoundList.Dealcard2)}onNtcWaitDiscard(e){e.seat==this.gameData.getSelfSeat()?this.showBottomTips(0,this.gameData.getStageLeftTime()):this.hideMsg()}onNtcDiscard(e){if(e.seat==this.gameData.getSelfSeat())this.gameAction.discard(e.card,()=>{this.updateOpenCard(e.card)});else{let t=this.gameData.getPosBySeat(e.seat),o=this.playerList[t];if(!o)return;o.discard(e.card,()=>{this.updateOpenCard(e.card)})}i.commandCenter.emit(new d.CmdTestToWaitPick)}onNtcWaitPickCard(e){e.seat==this.gameData.getSelfSeat()?this.showBottomTips(1,this.gameData.getStageLeftTime()):this.hideMsg()}onNtcDrawCard(e){if(e.seat==this.gameData.getSelfSeat())this.gameAction.drawCard(e.card);else{let t=this.gameData.getPosBySeat(e.seat),o=this.playerList[t];if(!o)return;o.drawCard()}i.commandCenter.emit(new d.CmdTestToWaitDiscard)}onNtcChowCard(e){if(this.gameData.getOpenCard()>=0?this.updateOpenCard(this.gameData.getOpenCard()):this.openCard.node.active=!1,e.seat==this.gameData.getSelfSeat())this.gameAction.chowCard(e.card);else{let t=this.gameData.getPosBySeat(e.seat),o=this.playerList[t];if(!o)return;o.chowCard(e.card)}i.commandCenter.emit(new d.CmdTestToWaitDiscard)}onNtcDrop(e){let t=this.gameData.getPosBySeat(e.seat);this.playerList[t]}onNtcShow(e){this.hideMsg();let t=this.gameData.getPlayerBySeat(e.seat);null!=t&&e.seat!=this.gameData.getSelfSeat()&&g.default.show(i.LocalLang.get("game_show_winner",[t.getNickName()]))}onNtcConfirmGroup(e){let t=this.gameData.getPosBySeat(e.seat);this.playerList[t]}onNtcFinish(e){this.showStartingMsg(this.gameData.getStageLeftTime());let t=this.gameData.getPosBySeat(this.gameData.getWinSeat());this.playerList[t]?(this.bgTableChips.active=!1,this.showResult(1)):this.showResult(0)}};a([S({visible:!1})],_.prototype,"nowLanguage",void 0),a([S({type:cc.Enum(r.LangList),displayName:"\u8bed\u8a00"})],_.prototype,"language",null),a([S(cc.Label)],_.prototype,"txtBalance",void 0),a([S(cc.Label)],_.prototype,"txtScore",void 0),a([S({type:cc.Sprite,displayName:""})],_.prototype,"imgBottomTips",void 0),a([S({type:cc.Sprite,displayName:""})],_.prototype,"imgMsg",void 0),a([S({type:cc.Label,displayName:""})],_.prototype,"txtMsg",void 0),a([S({type:cc.Label,displayName:""})],_.prototype,"txtTableChips",void 0),a([S({type:cc.Node,displayName:""})],_.prototype,"bgTableChips",void 0),a([S(cc.Button)],_.prototype,"btnMenu",void 0),a([S(cc.Button)],_.prototype,"btnInfor",void 0),a([S(cc.Sprite)],_.prototype,"imgMusic",void 0),a([S(cc.Sprite)],_.prototype,"imgSound",void 0),a([S(cc.SpriteFrame)],_.prototype,"imgMusicOn",void 0),a([S(cc.SpriteFrame)],_.prototype,"imgMusicOff",void 0),a([S(cc.SpriteFrame)],_.prototype,"imgSoundOn",void 0),a([S(cc.SpriteFrame)],_.prototype,"imgSoundOff",void 0),a([S(cc.Node)],_.prototype,"menuLayer",void 0),a([S(cc.Button)],_.prototype,"btnSwitch",void 0),a([S(cc.Button)],_.prototype,"btnExit",void 0),a([S(cc.Button)],_.prototype,"btnHowToPlay",void 0),a([S(cc.Node)],_.prototype,"playerPosNode",void 0),a([S({type:cc.Node,displayName:""})],_.prototype,"tableCardLeft",void 0),a([S({type:cc.Node,displayName:""})],_.prototype,"tableCardLeftPosNode",void 0),a([S({type:cc.Node,displayName:""})],_.prototype,"tableCardRight",void 0),a([S({type:cc.Node,displayName:""})],_.prototype,"dealCardNode",void 0),a([i.onNotice(n.NtcGameInfo)],_.prototype,"onNtcGameInfo",null),a([i.onNotice(n.NtcResetGame)],_.prototype,"onNtcResetGame",null),a([i.onNotice(n.NtcSitDown)],_.prototype,"onNtcSitDown",null),a([i.onNotice(n.NtcStandUp)],_.prototype,"onNtcStandUp",null),a([i.onNotice(n.NtcPrepare)],_.prototype,"onNtcPrepare",null),a([i.onNotice(n.NtcDealCards)],_.prototype,"onNtcDealCards",null),a([i.onNotice(n.NtcWaitDiscard)],_.prototype,"onNtcWaitDiscard",null),a([i.onNotice(n.NtcDiscard)],_.prototype,"onNtcDiscard",null),a([i.onNotice(n.NtcWaitPickCard)],_.prototype,"onNtcWaitPickCard",null),a([i.onNotice(n.NtcDrawCard)],_.prototype,"onNtcDrawCard",null),a([i.onNotice(n.NtcChowCard)],_.prototype,"onNtcChowCard",null),a([i.onNotice(n.NtcDrop)],_.prototype,"onNtcDrop",null),a([i.onNotice(n.NtcShow)],_.prototype,"onNtcShow",null),a([i.onNotice(n.NtcConfirmGroup)],_.prototype,"onNtcConfirmGroup",null),a([i.onNotice(n.NtcFinish)],_.prototype,"onNtcFinish",null),_=a([y],_),o.default=_,cc._RF.pop()},{"../Business/Data/CommonDefine":"CommonDefine","../Business/Data/DataManager":"DataManager","../Business/Data/SaveDataManager":"SaveDataManager","../Business/Logic/GameController":"GameController","../Business/Logic/GameNotice":"GameNotice","../MobileKit/MKIndex":"MKIndex","./Common/ConfirmDialog":"ConfirmDialog","./Common/MessageView":"MessageView","./Common/PopupManager":"PopupManager","./Common/PrefabPool":"PrefabPool","./Common/UIUtils":"UIUtils","./GameAction":"GameAction","./PlayerNode":"PlayerNode","./PokerNode":"PokerNode"}],GameSocket:[function(e,t,o){"use strict";cc._RF.push(t,"6fc34cSKCtFQIY3btRfWLAm","GameSocket"),Object.defineProperty(o,"__esModule",{value:!0});const a=e("../../MobileKit/MKIndex");o.default=class extends a.Socket{constructor(){super()}connect(e){if(this.disconnect(),cc.sys.isNative){let t=cc.url.raw("resources/raw/android.cer");cc.log("Websocket : penUrl = ",t),cc.loader.md5Pipe?(t=cc.loader.md5Pipe.transformURL(t),cc.log("Websocket : md5Pipe = ",t),this.m_socket=new WebSocket(e,null,t)):(cc.log("Websocket : cc.loader.md5Pipe:",cc.loader.md5Pipe),this.m_socket=new WebSocket(e,null,t))}else this.m_socket=new WebSocket(e);this.m_socket.binaryType="arraybuffer",this.m_socket.onopen=this.onConnect.bind(this),this.m_socket.onmessage=this.onSocketDataReceived.bind(this),this.m_socket.onerror=this.onError.bind(this),this.m_socket.onclose=this.onClose.bind(this)}disconnect(){super.disconnect(),null!==this.m_socket&&(this.m_socket.onopen=null,this.m_socket.onmessage=null,this.m_socket.onerror=null,this.m_socket.onclose=null,this.m_socket.close(),this.m_socket=null)}send(e,t){this.isConnected()&&this.m_socket.send(this.encodeMsgID(e,t))}encodeMsgID(e,t){}decodeMsgID(e){}onSocketDataReceived(e){var t=e.data,o=this.decodeMsgID(t);this.onMessage(o)}},cc._RF.pop()},{"../../MobileKit/MKIndex":"MKIndex"}],GradientColor:[function(e,t,o){"use strict";cc._RF.push(t,"926bagTp+JG/5Bxdn0uOLz4","GradientColor");var a=this&&this.__decorate||function(e,t,o,a){var i,s=arguments.length,r=s<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,a);else for(var n=e.length-1;n>=0;n--)(i=e[n])&&(r=(s<3?i(r):s>3?i(t,o,r):i(t,o))||r);return s>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});const{ccclass:i,property:s,requireComponent:r,disallowMultiple:n,executeInEditMode:c,help:l,menu:d}=cc._decorator;let h=class extends cc.Component{constructor(){super(...arguments),this._colors=[cc.Color.RED,cc.Color.BLUE,cc.Color.RED,cc.Color.BLUE]}get colors(){return this._colors}set colors(e){e.length>4&&(e.length=4),this._colors=e,this.markForRender()}onEnable(){this.replaceFunction()}onDisable(){this.restoreFunction()}resetInEditor(){this.markForRender()}replaceFunction(){const e=this.getComponent(cc.RenderComponent);if(!e)return;const t=e._assembler;t instanceof cc.Assembler2D&&(t.updateColor=()=>{const e=t._renderData.uintVDatas[0];if(!e)return;const o=t.floatsPerVert,a=t.colorOffset,i=this.node.color;let s=0;for(let t=a,r=e.length;t<r;t+=o)e[t]=(this.colors[s++]||i)._val},this.markForRender())}restoreFunction(){const e=this.getComponent(cc.RenderComponent);if(!e)return;const t=e._assembler;t instanceof cc.Assembler2D&&(t.updateColor=cc.Assembler2D.prototype.updateColor,this.markForRender())}markForRender(){this.node._renderFlag|=cc.RenderFlow.FLAG_COLOR}};a([s()],h.prototype,"_colors",void 0),a([s({type:[cc.Color],tooltip:!1})],h.prototype,"colors",null),h=a([i,r(cc.RenderComponent),n,c,l("https://gitee.com/ifaswind/eazax-ccc/blob/master/components/renderers/GradientColor.ts"),d("\u7ec4\u4ef6\u5e93/GradientColor")],h),o.default=h,cc._RF.pop()},{}],HandCardsData:[function(e,t,o){"use strict";cc._RF.push(t,"8bbb8wyyidJpaBr4siF6KSX","HandCardsData"),Object.defineProperty(o,"__esModule",{value:!0}),o.HandCardsData=o.CardGroupData=void 0;const a=e("./CommonDefine"),i=e("./PokerData");function s(e){let t=i.PokerData.getPokerPoint(e);return a.PointScoreArr[t]}function r(e,t){return e-t}function n(e,t){return(i.PokerData.getPokerPoint(e)-1+13)%13-(i.PokerData.getPokerPoint(t)-1+13)%13}class c{constructor(){this.cards=[],this.groupType=a.GroupType.Invalid,this.groupFlag=a.GroupFlag.None}}o.CardGroupData=c,o.HandCardsData=class{constructor(){this.cardGroupList=[],this.point=0,this.jokerPoint=-1}resetGameData(){this.handCardList=[],this.cardGroupList=[],this.jokerPoint=-1,this.point=0}setJokerPoint(e){this.jokerPoint=e}getHandCardList(){return this.handCardList}getGroupList(){return this.cardGroupList}copyGroupList(){let e=[];for(let t of this.cardGroupList){let o=new c;o.cards=t.cards.slice(0),o.groupFlag=t.groupFlag,o.groupType=t.groupType,e.push(o)}return e}getPoint(){return this.point}setHandCards(e){this.handCardList=e;for(let t of this.handCardList){let e=!1;for(let o of this.cardGroupList)for(let a of o.cards)if(a==t){e=!0;break}e||this.addCard(t)}}dealCards(e){e.length>a.MAX_HAND_CARDS&&(e=e.slice(0,a.MAX_HAND_CARDS),cc.log("dealCards card error")),this.handCardList=e}addCard(e){if(e<0)return void cc.log("add card error, card = "+e);let t=0;for(let o of this.cardGroupList)t+=o.cards.length;if(t>=a.MAX_HAND_CARDS)cc.log("add card error");else{if(this.cardGroupList.length==a.MAX_GROUP)this.cardGroupList[a.MAX_GROUP-1].cards.push(e);else{let t=new c;t.cards.push(e),this.cardGroupList.push(t)}this.updateCardGroupList()}}discard(e){this.cardGroupList.forEach((t,o)=>{t.cards.forEach((t,a,i)=>{if(t==e)return i.splice(a,1),void(0==i.length&&this.cardGroupList.splice(o,1))})}),this.updateCardGroupList()}moveCard(e,t,o,a){if(t<0||o<0)return!1;if(t==o)return!1;let i=!1;for(let r=0;r<e.length;++r){let t=e[r];for(let e=0;e<t.cards.length;++e)if(t.cards[e]==o){i=!0;break}}if(!i)return!1;let s=!1;for(let r=0;r<e.length;++r){let o=e[r];for(let e=0;e<o.cards.length;++e)if(o.cards[e]==t){s=!0;break}}if(!s)return!1;for(let r=0;r<e.length;++r){let i=e[r];for(let e=0;e<i.cards.length;++e)if(i.cards[e]==o){let o=-1;if((o=a?i.cards[e+1]:i.cards[e-1])==t)return!1;break}}for(let r=0;r<e.length;++r){let o=e[r];for(let a=0;a<o.cards.length;++a)if(o.cards[a]==t){o.cards.splice(a,1),0==o.cards.length&&e.splice(r,1);break}}for(let r=0;r<e.length;++r){let i=e[r];for(let e=0;e<i.cards.length;++e)if(i.cards[e]==o){a?i.cards.splice(e+1,0,t):i.cards.splice(e,0,t);break}}return!0}groupCard(e){for(let o of e)this.discard(o);let t=new c;if(t.cards=e,this.cardGroupList.unshift(t),this.cardGroupList.length>a.MAX_GROUP){let e=this.cardGroupList.pop(),t=this.cardGroupList[this.cardGroupList.length-1];t.cards.push.apply(t.cards,e.cards)}this.updateCardGroupList()}calGroupType(e){if(e.length<=2||e.length>13)return a.GroupType.Invalid;let t=0,o=0,s=0,n=[],c=new Map,l=new Map;if(e.forEach(e=>{if(i.PokerData.isJoker(e))t+=1;else if(this.isWildJoker(e))n.push(e);else{let t=i.PokerData.getPokerPoint(e),a=i.PokerData.getPokerColor(e);c.get(a)||(c.set(a,!0),o+=1),l.get(t)||(l.set(t,!0),s+=1)}}),o>1){if(1==s&&e.length<=4&&o+t+n.length==e.length)return a.GroupType.Set}else{if(1!=o)return a.GroupType.Impure;if(s+t+n.length==e.length){if(1==s)return a.GroupType.Impure;let o=[];for(let e of l.keys())o.push(e);o.sort(r);let d=function(e){let t=e[e.length-1]-e[0];if(e[0]==i.PokerPoint.PointA){let o=e[e.length-1];o!=i.PokerPoint.PointK&&o!=i.PokerPoint.PointQ||(t=13-e[1])}return t};if(d(o)<=e.length-1){if(t>0||n.length>1)return a.GroupType.Impure;if(0==n.length)return a.GroupType.Pure;{let t=n[0],s=i.PokerData.getPokerColor(t);for(let e of c.keys())if(s!=e)return a.GroupType.Impure;let l=i.PokerData.getPokerPoint(t);return o.push(l),o.sort(r),d(o)<=e.length-1?a.GroupType.Pure:a.GroupType.Impure}}}}return a.GroupType.Invalid}setCardGroup(e){0!=e.length&&(this.cardGroupList=e)}updateCardGroupList(){this.calcCardGroupFlag(this.cardGroupList),this.point=this.calcPoint(this.cardGroupList)}calcCardGroupFlag(e){let t=new Map;t.set(a.GroupType.Invalid,[]),t.set(a.GroupType.Set,[]),t.set(a.GroupType.Impure,[]),t.set(a.GroupType.Pure,[]),e.forEach((e,o)=>{let a=this.calGroupType(e.cards);t.get(a).push(o)}),t.get(a.GroupType.Invalid).forEach(t=>{e[t].groupFlag=e[t].cards.length>2?a.GroupFlag.Invalid:a.GroupFlag.None});let o=t.get(a.GroupType.Impure).length,i=t.get(a.GroupType.Pure).length;t.get(a.GroupType.Set).forEach(t=>{e[t].groupFlag=0==i?a.GroupFlag.SecondNeed:i+o<2?a.GroupFlag.SecondNeed:a.GroupFlag.Set});let s=0==i?a.GroupFlag.FirstNeed:a.GroupFlag.ImpureSeq;if(t.get(a.GroupType.Impure).forEach(t=>{e[t].groupFlag=s}),t.get(a.GroupType.Pure).forEach(t=>{e[t].groupFlag=a.GroupFlag.PureSeq}),i>0){let o=0;for(let i of t.get(a.GroupType.Pure))if(1==(o+=1))e[i].groupFlag=a.GroupFlag.FirstLife;else if(2==o){e[i].groupFlag=a.GroupFlag.SecondLife;break}if(2!=o)for(let i of t.get(a.GroupType.Impure)){e[i].groupFlag=a.GroupFlag.SecondLife;break}}}calcPoint(e){let t=0;for(let o=0;o<e.length;++o){let r=e[o].cards,n=e[o].groupFlag;if(a.GroupFlag.FirstLife!=n&&a.GroupFlag.SecondLife!=n&&a.GroupFlag.PureSeq!=n&&a.GroupFlag.ImpureSeq!=n&&a.GroupFlag.Set!=n)for(let e of r)i.PokerData.isJoker(e)||this.isWildJoker(e)||(t+=s(e))}return Math.min(80,t)}isWildJoker(e){return i.PokerData.getPokerPoint(e)==this.jokerPoint}sortGroupByColor(){this.cardGroupList=[],this.handCardList=this.handCardList.sort(n);let e=new Map;this.handCardList.forEach(t=>{let o=Math.floor(t%i.PokerCount/i.PokerPointCount);e.has(o)?e.get(o).push(t):e.set(o,[t])}),e.forEach(e=>{let t=new c;t.cards=e,this.cardGroupList.push(t)}),this.updateCardGroupList()}},cc._RF.pop()},{"./CommonDefine":"CommonDefine","./PokerData":"PokerData"}],HeartBeatHandler:[function(e,t,o){"use strict";cc._RF.push(t,"cbbe6PK4uNJaqhiv8nPLltL","HeartBeatHandler"),Object.defineProperty(o,"__esModule",{value:!0}),o.HeartBeatHandler=void 0,o.HeartBeatHandler=class{constructor(){this.m_idle=10,this.m_maxMissCount=2,this.m_idleCallBack=null,this.m_timeOutCallBack=null,this.m_missCallBack=null,this.m_logName="",this.m_curMissCount=0,this.m_lastTickTime=-1,this.m_curIdle=-1,cc.director.getScheduler().enableForTarget(this)}set idle(e){this.m_idle=e}set maxMissCount(e){this.m_maxMissCount=e}set idleCallBack(e){this.m_idleCallBack=e}set timeOutCallBack(e){this.m_timeOutCallBack=e}set missCallBack(e){this.m_missCallBack=e}set logName(e){this.m_logName=e}startIdle(){this.clearState();let e=(new Date).getTime();this.m_lastTickTime=e,cc.director.getScheduler().unscheduleAllForTarget(this),cc.director.getScheduler().schedule(this.onIdleTime,this,1),cc.log(this.m_logName+" start idle.")}stopIdle(){this.m_curMissCount=0,this.m_lastTickTime=-1,cc.director.getScheduler().unscheduleAllForTarget(this),cc.log(this.m_logName+" stop idle.")}onReceiveHeartBeat(){this.clearState()}clearState(){this.m_curMissCount=0,this.m_curIdle=this.m_idle}sendIdle(){this.m_curMissCount++,2==this.m_curMissCount&&(cc.log(this.m_logName+" miss heart beat."),null!=this.m_missCallBack&&this.m_missCallBack()),this.m_maxMissCount>0&&this.m_curMissCount>this.m_maxMissCount?this.onHeartBeatTimeOut():null!=this.m_idleCallBack&&this.m_idleCallBack()}onIdleTime(e){let t=(new Date).getTime();this.m_lastTickTime>0&&(e=(t-this.m_lastTickTime)/1e3),this.m_lastTickTime=t,e>this.m_idle*this.m_maxMissCount?this.onHeartBeatTimeOut():(this.m_curIdle-=e,this.m_curIdle<=0&&(this.m_curIdle=this.m_idle,this.sendIdle()))}onHeartBeatTimeOut(){cc.log(this.m_logName+" heart beat time out."),this.stopIdle(),null!=this.m_timeOutCallBack&&this.m_timeOutCallBack()}},cc._RF.pop()},{}],HelpLayer:[function(e,t,o){"use strict";cc._RF.push(t,"e4adfdVRVBBArTusuUkFp/l","HelpLayer");var a=this&&this.__decorate||function(e,t,o,a){var i,s=arguments.length,r=s<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,a);else for(var n=e.length-1;n>=0;n--)(i=e[n])&&(r=(s<3?i(r):s>3?i(t,o,r):i(t,o))||r);return s>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});const i=e("../MobileKit/MKIndex"),s=e("./Common/PopupBase"),r=e("../Business/Data/CommonDefine"),{ccclass:n,property:c,menu:l}=cc._decorator;let d=class extends s.default{constructor(){super(...arguments),this.shortcutLayer=null,this.scrollView=null,this.animationDuration=.3}static get path(){return"Scenes/Game/HelpLayer"}onLoad(){this.shortcutLayer.children.forEach(e=>{e.on(cc.Node.EventType.TOUCH_END,this.onTouchShortcut,this)})}updateDisplay(){this.scrollView.scrollToTop(.1)}onTouchShortcut(e){let t=e.target.name,o=this.scrollView.content.children.find(e=>e.name==t);if(!o)return;i.AudioEngine.playEffect(r.SoundList.Click);let a=0;a=o.getSiblingIndex()>7?40:30;let s=(-o.y+a*o.getSiblingIndex())/this.scrollView.content.height;this.scrollView.stopAutoScroll(),this.scrollView.scrollToPercentVertical(1-s,.1,!0)}onTouchOkey(){this.hide()}onTouchClose(){this.hide()}};a([c(cc.Node)],d.prototype,"shortcutLayer",void 0),a([c(cc.ScrollView)],d.prototype,"scrollView",void 0),d=a([n,l("Game/HelpLayer")],d),o.default=d,cc._RF.pop()},{"../Business/Data/CommonDefine":"CommonDefine","../MobileKit/MKIndex":"MKIndex","./Common/PopupBase":"PopupBase"}],HomeData:[function(e,t,o){"use strict";cc._RF.push(t,"43833cz8yRD7r9Zq0qV9kBo","HomeData"),Object.defineProperty(o,"__esModule",{value:!0}),o.HomeData=o.MaintainData=void 0;const a=e("./BroadcastData");o.MaintainData=class{constructor(){this.m_start=0,this.m_end=0,this.m_content=new Map,this.m_hasData=!1}isNearTime(){return this.m_hasData}isMaintainTime(){var e=(new Date).getTime();return e>this.m_start&&e<this.m_end}},o.HomeData=class{constructor(){this.m_chipsUnit=1,this.m_pointValueList=[],this.m_gameId="",this.m_ws="",this.m_broadcastData=new a.default}getChipsUnit(){return this.m_chipsUnit}setChipsUnit(e){this.m_chipsUnit=e}getPointValueList(){return this.m_pointValueList}setPointValueList(e){this.m_pointValueList=e}getGameId(){return this.m_gameId}setGameId(e){this.m_gameId=e}getWs(){return this.m_ws}setWs(e){this.m_ws=e}getBroadcastData(){return this.m_broadcastData}},cc._RF.pop()},{"./BroadcastData":"BroadcastData"}],HttpUtils:[function(e,t,o){"use strict";cc._RF.push(t,"6dcb9C9N2ZAg5+91n23jf2N","HttpUtils"),Object.defineProperty(o,"__esModule",{value:!0});const a=e("../../MobileKit/MKIndex");o.default=class{static generateSign(e){var t=[];for(var o in e)t.push(o);t.sort();for(var i="",s=0;s<t.length;++s){let o=t[s];i+=o+e[o]}return i+="ddgame",a.CryptoUtils.md5(i)}},cc._RF.pop()},{"../../MobileKit/MKIndex":"MKIndex"}],InforLayer:[function(e,t,o){"use strict";cc._RF.push(t,"57a2aHqg8VNequMt7ge6nb7","InforLayer");var a=this&&this.__decorate||function(e,t,o,a){var i,s=arguments.length,r=s<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,a);else for(var n=e.length-1;n>=0;n--)(i=e[n])&&(r=(s<3?i(r):s>3?i(t,o,r):i(t,o))||r);return s>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});const i=e("../MobileKit/MKIndex"),s=e("../Business/Data/DataManager"),r=e("./Common/PopupBase"),n=e("./Common/UIUtils"),c=e("../Business/Data/CommonDefine"),{ccclass:l,property:d,menu:h}=cc._decorator;let u=class extends r.default{constructor(){super(...arguments),this.txtTips=null,this.txtPointValue=null,this.txtMaxWin=null,this.txtDecks=null,this.btnOkey=null,this.animationDuration=.3}static get path(){return"Scenes/Game/message_layer"}onLoad(){n.UIUtils.ButtonEvent(this.btnOkey,this.onTouchClose.bind(this))}updateDisplay(e=!1){let t="\u20b9"+n.UIUtils.getShortNumber(s.default.gameData.getDropChips());this.txtTips.string=i.LocalLang.get("game_infor_tips",[t]),this.txtPointValue.string=s.default.gameData.getPointValue().toString(),this.txtMaxWin.string=n.UIUtils.getIndiaFormat(80*s.default.gameData.getPointValue()*c.MAX_PLAYERS),this.txtDecks.string="2",e&&this.setAutoClose()}setAutoClose(){cc.tween(this.node).delay(3).call(this.onTouchClose.bind(this)).start()}onTouchClose(){this.hide()}};a([d(cc.Label)],u.prototype,"txtTips",void 0),a([d(cc.Label)],u.prototype,"txtPointValue",void 0),a([d(cc.Label)],u.prototype,"txtMaxWin",void 0),a([d(cc.Label)],u.prototype,"txtDecks",void 0),a([d(cc.Button)],u.prototype,"btnOkey",void 0),u=a([l,h("Game/InforLayer")],u),o.default=u,cc._RF.pop()},{"../Business/Data/CommonDefine":"CommonDefine","../Business/Data/DataManager":"DataManager","../MobileKit/MKIndex":"MKIndex","./Common/PopupBase":"PopupBase","./Common/UIUtils":"UIUtils"}],LanguageLayer:[function(e,t,o){"use strict";cc._RF.push(t,"de8164TwFRB+LdFXf1H7BpI","LanguageLayer");var a=this&&this.__decorate||function(e,t,o,a){var i,s=arguments.length,r=s<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,a);else for(var n=e.length-1;n>=0;n--)(i=e[n])&&(r=(s<3?i(r):s>3?i(t,o,r):i(t,o))||r);return s>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});const i=e("../MobileKit/MKIndex"),s=e("./Common/PopupBase"),{ccclass:r,property:n,menu:c}=cc._decorator;let l=class extends s.default{constructor(){super(...arguments),this.langBtnArr=[],this.animationDuration=0,this.langIdx=0}static get path(){return"Scenes/Game/language_layer"}onLoad(){this.main||(this.main=this.node),i.noticeCenter.registAllNotice(this),this.langArr=["en","hi"];let e=i.LocalLang.getLanguage(),t=this.langArr.indexOf(e);t>=0&&(this.langBtnArr[t].check(),this.langIdx=t)}onTouchClose(){this.hide()}onTouchLang(e,t){this.langIdx=Number(t)}onTouchConfirm(){i.LocalLang.setLanguage(this.langArr[this.langIdx]),this.hide()}};a([n([cc.Toggle])],l.prototype,"langBtnArr",void 0),l=a([r],l),o.default=l,cc._RF.pop()},{"../MobileKit/MKIndex":"MKIndex","./Common/PopupBase":"PopupBase"}],LoadingConfig:[function(e,t,o){"use strict";cc._RF.push(t,"ce28cPR/G1B07ofLePg+SKH","LoadingConfig"),Object.defineProperty(o,"__esModule",{value:!0}),o.SpriteFrameResLst=o.LoadingResLst=void 0;const a=e("../Business/Data/CommonDefine");o.LoadingResLst=new Map,o.SpriteFrameResLst=new Map,o.LoadingResLst.set(a.SoundList.Bgm,cc.AudioClip),o.LoadingResLst.set(a.SoundList.Click,cc.AudioClip),o.LoadingResLst.set("Sound/win",cc.AudioClip),o.LoadingResLst.set("Sound/big_winner",cc.AudioClip),o.LoadingResLst.set("Sound/chip",cc.AudioClip),o.LoadingResLst.set(a.SoundList.BtnWrong,cc.AudioClip),o.LoadingResLst.set(a.SoundList.Dealcard2,cc.AudioClip),o.LoadingResLst.set(a.SoundList.Bgm,cc.AudioClip),o.LoadingResLst.set(a.SoundList.Button01,cc.AudioClip),o.LoadingResLst.set(a.SoundList.Button02,cc.AudioClip),o.LoadingResLst.set(a.SoundList.CardFlip1,cc.AudioClip),o.LoadingResLst.set(a.SoundList.CardFlip2,cc.AudioClip),o.LoadingResLst.set(a.SoundList.Alarm,cc.AudioClip),o.LoadingResLst.set(a.PrefabList.PlayerNode,cc.Prefab),o.LoadingResLst.set(a.PrefabList.PokerNode,cc.Prefab),o.LoadingResLst.set(a.PrefabList.GameEntyuCell,cc.Prefab),o.LoadingResLst.set(a.PrefabList.RecordCell,cc.Prefab),o.LoadingResLst.set(a.PrefabList.RecordPage,cc.Prefab),o.LoadingResLst.set("Scenes/Common/MessageView",cc.Prefab),o.LoadingResLst.set("Scenes/Common/ConfirmDialog",cc.Prefab),o.SpriteFrameResLst.set(a.SpriteList.TipsPick,cc.SpriteFrame),o.SpriteFrameResLst.set(a.SpriteList.TipsDiscard,cc.SpriteFrame),o.SpriteFrameResLst.set("Texture/Game/img_group_green",cc.SpriteFrame),o.SpriteFrameResLst.set("Texture/Game/img_group_blue",cc.SpriteFrame),o.SpriteFrameResLst.set("Texture/Game/img_group_red",cc.SpriteFrame),o.SpriteFrameResLst.set("Texture/Lobby/img_entry0",cc.SpriteFrame),o.SpriteFrameResLst.set("Texture/Lobby/img_entry1",cc.SpriteFrame),o.SpriteFrameResLst.set("Texture/Lobby/img_entry2",cc.SpriteFrame),o.SpriteFrameResLst.set("Texture/Lobby/img_entry3",cc.SpriteFrame),o.SpriteFrameResLst.set("Texture/Lobby/img_entry4",cc.SpriteFrame),o.SpriteFrameResLst.set("Texture/Game/Poker/clubs_1",cc.SpriteFrame),o.SpriteFrameResLst.set("Texture/Game/Poker/clubs_2",cc.SpriteFrame),o.SpriteFrameResLst.set("Texture/Game/Poker/clubs_3",cc.SpriteFrame),o.SpriteFrameResLst.set("Texture/Game/Poker/clubs_4",cc.SpriteFrame),o.SpriteFrameResLst.set("Texture/Game/Poker/clubs_5",cc.SpriteFrame),o.SpriteFrameResLst.set("Texture/Game/Poker/clubs_6",cc.SpriteFrame),o.SpriteFrameResLst.set("Texture/Game/Poker/clubs_7",cc.SpriteFrame),o.SpriteFrameResLst.set("Texture/Game/Poker/clubs_8",cc.SpriteFrame),o.SpriteFrameResLst.set("Texture/Game/Poker/clubs_9",cc.SpriteFrame),o.SpriteFrameResLst.set("Texture/Game/Poker/clubs_10",cc.SpriteFrame),o.SpriteFrameResLst.set("Texture/Game/Poker/clubs_j",cc.SpriteFrame),o.SpriteFrameResLst.set("Texture/Game/Poker/clubs_q",cc.SpriteFrame),o.SpriteFrameResLst.set("Texture/Game/Poker/clubs_k",cc.SpriteFrame),o.SpriteFrameResLst.set("Texture/Game/Poker/clubs_down",cc.SpriteFrame),o.SpriteFrameResLst.set("Texture/Game/Poker/diamonds_1",cc.SpriteFrame),o.SpriteFrameResLst.set("Texture/Game/Poker/diamonds_2",cc.SpriteFrame),o.SpriteFrameResLst.set("Texture/Game/Poker/diamonds_3",cc.SpriteFrame),o.SpriteFrameResLst.set("Texture/Game/Poker/diamonds_4",cc.SpriteFrame),o.SpriteFrameResLst.set("Texture/Game/Poker/diamonds_5",cc.SpriteFrame),o.SpriteFrameResLst.set("Texture/Game/Poker/diamonds_6",cc.SpriteFrame),o.SpriteFrameResLst.set("Texture/Game/Poker/diamonds_7",cc.SpriteFrame),o.SpriteFrameResLst.set("Texture/Game/Poker/diamonds_8",cc.SpriteFrame),o.SpriteFrameResLst.set("Texture/Game/Poker/diamonds_9",cc.SpriteFrame),o.SpriteFrameResLst.set("Texture/Game/Poker/diamonds_10",cc.SpriteFrame),o.SpriteFrameResLst.set("Texture/Game/Poker/diamonds_j",cc.SpriteFrame),o.SpriteFrameResLst.set("Texture/Game/Poker/diamonds_q",cc.SpriteFrame),o.SpriteFrameResLst.set("Texture/Game/Poker/diamonds_k",cc.SpriteFrame),o.SpriteFrameResLst.set("Texture/Game/Poker/diamonds_down",cc.SpriteFrame),o.SpriteFrameResLst.set("Texture/Game/Poker/hearts_down",cc.SpriteFrame),o.SpriteFrameResLst.set("Texture/Game/Poker/joker_big",cc.SpriteFrame),o.SpriteFrameResLst.set("Texture/Game/Poker/joker_small",cc.SpriteFrame),o.SpriteFrameResLst.set("Texture/Game/Poker/poker_bg",cc.SpriteFrame),o.SpriteFrameResLst.set("Texture/Game/Poker/poker_back",cc.SpriteFrame),o.SpriteFrameResLst.set("Texture/Game/Poker/spades_down",cc.SpriteFrame),o.SpriteFrameResLst.set("Texture/Game/Poker/j_clubs",cc.SpriteFrame),o.SpriteFrameResLst.set("Texture/Game/Poker/q_clubs",cc.SpriteFrame),o.SpriteFrameResLst.set("Texture/Game/Poker/k_clubs",cc.SpriteFrame),o.SpriteFrameResLst.set("Texture/Game/Poker/j_hearts",cc.SpriteFrame),o.SpriteFrameResLst.set("Texture/Game/Poker/q_hearts",cc.SpriteFrame),o.SpriteFrameResLst.set("Texture/Game/Poker/k_hearts",cc.SpriteFrame),o.SpriteFrameResLst.set("Texture/Game/Poker/j_spades",cc.SpriteFrame),o.SpriteFrameResLst.set("Texture/Game/Poker/q_spades",cc.SpriteFrame),o.SpriteFrameResLst.set("Texture/Game/Poker/k_spades",cc.SpriteFrame),o.SpriteFrameResLst.set("Texture/Game/Poker/j_diamonds",cc.SpriteFrame),o.SpriteFrameResLst.set("Texture/Game/Poker/q_diamonds",cc.SpriteFrame),o.SpriteFrameResLst.set("Texture/Game/Poker/k_diamonds",cc.SpriteFrame),cc._RF.pop()},{"../Business/Data/CommonDefine":"CommonDefine"}],LoadingScene:[function(e,t,o){"use strict";cc._RF.push(t,"b3227XK/V5PI5kdwcCTTjvS","LoadingScene");var a=this&&this.__decorate||function(e,t,o,a){var i,s=arguments.length,r=s<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,a);else for(var n=e.length-1;n>=0;n--)(i=e[n])&&(r=(s<3?i(r):s>3?i(t,o,r):i(t,o))||r);return s>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});const i=e("../MobileKit/MKIndex"),s=e("../Business/Data/DataManager"),r=e("../Business/Data/ConfigManager"),n=e("../Business/Data/CommonDefine"),c=e("../Business/Logic/SceneController"),l=e("./LoadingConfig"),d=e("../Business/Logic/GameController"),h=e("../Business/Data/SaveDataManager"),u=e("../Business/NetWork/NetworkController"),p=e("../Business/NetWork/NetworkNotice"),{ccclass:m,property:g,menu:f}=cc._decorator;let C=class extends cc.Component{constructor(){super(...arguments),this.urlConfig=null,this.appInfo=null,this.progressBar=null,this.txtLoading=null,this.loadResOK=!1,this.loadSpriteFrameOK=!1,this.loginOK=!0}onLoad(){i.noticeCenter.registAllNotice(this),this.initApp(),cc.director.preloadScene("Game",this.onSceneProgress.bind(this),()=>{}),this.txtLoading.string="0 %",this.progressBar.progress=0}initApp(){s.default.init(),h.default.init(),i.commandCenter.addController(new c.SceneController),i.commandCenter.addController(new d.GameController),i.commandCenter.addController(new u.NetworkController),i.AudioEngine.setEffectsEnabled(h.default.getEffectEnable()),i.AudioEngine.setMusicEnabled(h.default.getMusicEnable()),i.AudioEngine.setEffectsVolume(.5),i.AudioEngine.setMusicVolume(.5),i.LocalLang.setLanguage("en"),this.initTestData(),r.default.setUrlConfig(this.urlConfig.json),r.default.setAppInfo(this.appInfo.json),this.loadRes()}initTestData(){s.default.userData.setUid(5566),s.default.userData.setNickName("User 1234567890"),s.default.userData.setBalance(5e4),s.default.homeData.setPointValueList([5,10,20,40,100]),s.default.homeData.setChipsUnit(1),s.default.homeData.setGameId("0"),s.default.userData.setGameRecordLst([{balance:767,time:1660210006147,pv:4,isWin:!1},{balance:1801,time:1659537223957,pv:3,isWin:!0},{balance:324,time:1659477042944,pv:1,isWin:!1},{balance:1775,time:1660554944361,pv:0,isWin:!0},{balance:815,time:1659688686469,pv:0,isWin:!1},{balance:984,time:1660066596467,pv:4,isWin:!0},{balance:101,time:1660351832652,pv:0,isWin:!1},{balance:807,time:1660266918017,pv:2,isWin:!0},{balance:520,time:1659536063783,pv:3,isWin:!0},{balance:1768,time:1660205692424,pv:1,isWin:!1},{balance:1657,time:1660415139657,pv:1,isWin:!0},{balance:1483,time:1660531764400,pv:0,isWin:!0},{balance:1927,time:1659347722903,pv:3,isWin:!0},{balance:1330,time:1660071385718,pv:1,isWin:!1},{balance:916,time:1660427852131,pv:1,isWin:!0},{balance:1935,time:1660203458317,pv:4,isWin:!0},{balance:1704,time:1659479313312,pv:1,isWin:!1},{balance:675,time:1659433504892,pv:3,isWin:!0},{balance:146,time:1660060789960,pv:2,isWin:!0},{balance:1105,time:1660429411071,pv:0,isWin:!1},{balance:455,time:1660072578178,pv:3,isWin:!0},{balance:469,time:1660283031166,pv:0,isWin:!0},{balance:597,time:1659407293598,pv:1,isWin:!0},{balance:960,time:1660281561832,pv:1,isWin:!1},{balance:1228,time:1660405372961,pv:0,isWin:!1},{balance:1615,time:1660093538168,pv:2,isWin:!1},{balance:971,time:1660222691920,pv:3,isWin:!1},{balance:353,time:1660103088442,pv:3,isWin:!0},{balance:204,time:1659856606624,pv:2,isWin:!1},{balance:1893,time:1660065351504,pv:2,isWin:!1},{balance:888,time:1659805156089,pv:2,isWin:!0},{balance:223,time:1659669666060,pv:0,isWin:!0},{balance:1049,time:1660484766966,pv:1,isWin:!0},{balance:170,time:1660254553870,pv:2,isWin:!1},{balance:1419,time:1659618906950,pv:1,isWin:!0},{balance:1532,time:1659567352788,pv:3,isWin:!1},{balance:220,time:1660565727907,pv:1,isWin:!0},{balance:937,time:1659364886782,pv:2,isWin:!0},{balance:927,time:1659763699500,pv:3,isWin:!1},{balance:1675,time:1660322288903,pv:2,isWin:!0},{balance:746,time:1659791005751,pv:0,isWin:!1},{balance:1688,time:1660016766384,pv:3,isWin:!0},{balance:539,time:1659592131477,pv:4,isWin:!0},{balance:1316,time:1660370688376,pv:0,isWin:!1},{balance:174,time:1659392759810,pv:3,isWin:!1},{balance:1556,time:1660280505561,pv:1,isWin:!1},{balance:740,time:1659914727240,pv:4,isWin:!1},{balance:1488,time:1659601067817,pv:0,isWin:!1},{balance:1568,time:1660300598747,pv:0,isWin:!0},{balance:944,time:1660078074904,pv:0,isWin:!0},{balance:729,time:1659539671704,pv:1,isWin:!0},{balance:1462,time:1660535647840,pv:3,isWin:!0},{balance:1928,time:1660376298332,pv:1,isWin:!1},{balance:835,time:1660498321689,pv:2,isWin:!0},{balance:1473,time:1659626088745,pv:0,isWin:!0},{balance:941,time:1660275922569,pv:0,isWin:!0},{balance:914,time:1659706692501,pv:4,isWin:!0},{balance:1421,time:1659684137158,pv:3,isWin:!1}])}loadRes(){cc.resources.load(Array.from(l.LoadingResLst.keys()),null,this.onLoadProgress.bind(this),this.onLoadResComplete.bind(this)),cc.resources.load(Array.from(l.SpriteFrameResLst.keys()),cc.SpriteFrame,this.onLoadProgress.bind(this),this.onLoadSpriteFrameComplete.bind(this))}onLoadProgress(){}onLoadResComplete(){this.loadResOK=!0,this.gotoNextScene()}onLoadSpriteFrameComplete(){this.loadSpriteFrameOK=!0,this.gotoNextScene()}onSceneProgress(e,t,o){try{this.progressBar.progress=e/t,this.txtLoading.string=Math.floor(e/t*100)+" %"}catch(a){}}gotoNextScene(){this.loadResOK&&this.loadSpriteFrameOK&&this.loginOK&&i.commandCenter.emit(new c.CmdScene(n.SceneType.Lobby))}onNtcLogin(e){0==e.result&&(this.loginOK=!0,this.gotoNextScene())}};a([g(cc.JsonAsset)],C.prototype,"urlConfig",void 0),a([g(cc.JsonAsset)],C.prototype,"appInfo",void 0),a([g(cc.ProgressBar)],C.prototype,"progressBar",void 0),a([g(cc.Label)],C.prototype,"txtLoading",void 0),a([i.onNotice(p.NtcLogin)],C.prototype,"onNtcLogin",null),C=a([m],C),o.default=C,cc._RF.pop()},{"../Business/Data/CommonDefine":"CommonDefine","../Business/Data/ConfigManager":"ConfigManager","../Business/Data/DataManager":"DataManager","../Business/Data/SaveDataManager":"SaveDataManager","../Business/Logic/GameController":"GameController","../Business/Logic/SceneController":"SceneController","../Business/NetWork/NetworkController":"NetworkController","../Business/NetWork/NetworkNotice":"NetworkNotice","../MobileKit/MKIndex":"MKIndex","./LoadingConfig":"LoadingConfig"}],LobbyScene:[function(e,t,o){"use strict";cc._RF.push(t,"89bb4LCQZZMergYFs0a2QwS","LobbyScene");var a=this&&this.__decorate||function(e,t,o,a){var i,s=arguments.length,r=s<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,a);else for(var n=e.length-1;n>=0;n--)(i=e[n])&&(r=(s<3?i(r):s>3?i(t,o,r):i(t,o))||r);return s>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../MobileKit/MKIndex"),s=e("../../Business/Data/DataManager"),r=e("../../Business/Data/CommonDefine"),n=e("../../Business/NetWork/NetworkController"),c=e("../Common/PopupManager"),l=e("../../Business/Data/SaveDataManager"),d=e("../Common/UIUtils"),h=e("../Common/PrefabPool"),u=e("./GameEntryCell"),{ccclass:p,property:m,menu:g}=cc._decorator;let f=class extends cc.Component{constructor(){super(...arguments),this.txtBalance=null,this.entryScroll=null,this.txtUserName=null,this.txtUid=null,this.btnRecord=null,this.imgMusic=null,this.imgSound=null,this.imgMusicOn=null,this.imgMusicOff=null,this.imgSoundOn=null,this.imgSoundOff=null,this.txtBroadcast=null,this.musicOn=!1,this.soundOn=!1}onLoad(){i.noticeCenter.registAllNotice(this),this.initUI(),this.showBroadCast(),i.AudioEngine.playMusic(r.SoundList.Bgm,!0),i.commandCenter.emit(new n.CmdBroadcastTest)}initUI(){this.txtBalance.string=d.UIUtils.getShortNumber(s.default.userData.getBalance(),!0),this.txtUserName.string=s.default.userData.getNickName(),this.txtUid.string=s.default.userData.getUid(),d.UIUtils.NodeClickEvent(this.btnRecord,this.onTouchRecord.bind(this)),d.UIUtils.NodeClickEvent(this.imgMusic.node,this.onTouchMusic.bind(this)),d.UIUtils.NodeClickEvent(this.imgSound.node,this.onTouchSound.bind(this)),this.musicOn=l.default.getMusicEnable(),this.soundOn=l.default.getEffectEnable(),this.imgMusic.spriteFrame=this.musicOn?this.imgMusicOn:this.imgMusicOff,this.imgSound.spriteFrame=this.soundOn?this.imgSoundOn:this.imgSoundOff,s.default.homeData.getPointValueList().forEach((e,t)=>{let o=h.default.get(r.PrefabList.GameEntyuCell);o.setParent(this.entryScroll.content),o.getComponent(u.GameEntryCell).setData(t)}),this.entryScroll.scrollToLeft()}onTouchRecord(){c.default.show(r.PrefabList.GameRecordLayer)}onTouchMusic(){this.musicOn=!this.musicOn,this.imgMusic.spriteFrame=this.musicOn?this.imgMusicOn:this.imgMusicOff,l.default.setMusicEnable(this.musicOn),i.AudioEngine.setMusicEnabled(this.musicOn)}onTouchSound(){this.soundOn=!this.soundOn,this.imgSound.spriteFrame=this.soundOn?this.imgSoundOn:this.imgSoundOff,l.default.setEffectEnable(this.soundOn),i.AudioEngine.setEffectsEnabled(this.soundOn),i.AudioEngine.playEffect(r.SoundList.Click)}showBroadCast(){let e=s.default.homeData.getBroadcastData().getCurNotice(),t=this.txtBroadcast.node.parent.height;this.txtBroadcast.string=e,this.txtBroadcast.node.y=t,cc.tween(this.txtBroadcast.node).to(1,{y:0},{easing:"smooth"}).delay(2).to(1,{y:-t},{easing:"smooth"}).call(this.showBroadCast.bind(this)).start()}};a([m(cc.Label)],f.prototype,"txtBalance",void 0),a([m(cc.ScrollView)],f.prototype,"entryScroll",void 0),a([m(cc.Label)],f.prototype,"txtUserName",void 0),a([m(cc.Label)],f.prototype,"txtUid",void 0),a([m(cc.Node)],f.prototype,"btnRecord",void 0),a([m(cc.Sprite)],f.prototype,"imgMusic",void 0),a([m(cc.Sprite)],f.prototype,"imgSound",void 0),a([m(cc.SpriteFrame)],f.prototype,"imgMusicOn",void 0),a([m(cc.SpriteFrame)],f.prototype,"imgMusicOff",void 0),a([m(cc.SpriteFrame)],f.prototype,"imgSoundOn",void 0),a([m(cc.SpriteFrame)],f.prototype,"imgSoundOff",void 0),a([m(cc.Label)],f.prototype,"txtBroadcast",void 0),f=a([p,g("Lobby/LobbyScene")],f),o.default=f,cc._RF.pop()},{"../../Business/Data/CommonDefine":"CommonDefine","../../Business/Data/DataManager":"DataManager","../../Business/Data/SaveDataManager":"SaveDataManager","../../Business/NetWork/NetworkController":"NetworkController","../../MobileKit/MKIndex":"MKIndex","../Common/PopupManager":"PopupManager","../Common/PrefabPool":"PrefabPool","../Common/UIUtils":"UIUtils","./GameEntryCell":"GameEntryCell"}],MKActionQueue:[function(e,t,o){"use strict";cc._RF.push(t,"7733b8JdpNIHYxZ1k+2nx9N","MKActionQueue"),Object.defineProperty(o,"__esModule",{value:!0}),o.ActionQueue=void 0,o.ActionQueue=class{constructor(){this.m_actionQueue=null,this.m_delay=0,this.m_actionQueue=[],cc.director.getScheduler().enableForTarget(this),cc.director.getScheduler().scheduleUpdate(this,0,!1)}postAction(e,t){this.m_actionQueue.push({func:e,param:t})}setDelayTime(e){e<cc.macro.FLT_EPSILON||this.m_delay<e&&(this.m_delay=e)}clear(){this.clearDelayTime(),this.removeAllAction()}clearDelayTime(){this.m_delay=0}removeAllAction(){this.m_actionQueue.length=0}update(e){if(this.m_delay>0&&(this.m_delay-=e),this.m_actionQueue.length>0&&this.m_delay<cc.macro.FLT_EPSILON){var t=this.m_actionQueue.shift();t.func(t.param)}}onExit(){this.clear(),cc.director.getScheduler().unscheduleAllForTarget(this)}},cc._RF.pop()},{}],MKAudioEngine:[function(e,t,o){"use strict";cc._RF.push(t,"1950dWg/apGgKPh5p5a+7i+","MKAudioEngine"),Object.defineProperty(o,"__esModule",{value:!0}),o.AudioEngine=void 0;let a=!1,i=!1,s=null,r=!1;class n{static playEffect(e,t=!1){if(a){if(e instanceof cc.AudioClip)return cc.audioEngine.playEffect(e,t);{let o=cc.resources.get(e);if(null!=o)return cc.audioEngine.playEffect(o,t)}}return 0}static stopEffect(e){e>0&&cc.audioEngine.stopEffect(e)}static playMusic(e,t=!1){if(e instanceof cc.AudioClip)s=e;else{let t=cc.resources.get(e);null!=t&&(s=t)}r=t,i&&cc.audioEngine.playMusic(s,r)}static stopMusic(){s=null,cc.audioEngine.stopMusic()}static setEffectsVolume(e){cc.audioEngine.setEffectsVolume(e)}static setMusicVolume(e){cc.audioEngine.setMusicVolume(e)}static setAudioVolume(e,t){cc.audioEngine.setVolume(e,t)}static setEffectsEnabled(e){a=e,e||cc.audioEngine.stopAllEffects()}static setMusicEnabled(e){i=e,e?null!=s&&cc.audioEngine.playMusic(s,r):cc.audioEngine.stopMusic()}static setMute(e){n.setEffectsEnabled(!e),n.setMusicEnabled(!e)}static isMute(){return i&&a}static isMusicPlaying(){return cc.audioEngine.isMusicPlaying()}static pauseMusic(){cc.audioEngine.pauseMusic()}}o.AudioEngine=n,cc._RF.pop()},{}],MKCommandCenter:[function(e,t,o){"use strict";cc._RF.push(t,"36eecgRfGBIvrNItfzw/c9j","MKCommandCenter"),Object.defineProperty(o,"__esModule",{value:!0}),o.onCommand=o.commandCenter=o.CommandCenter=o.Controller=o.createCommand=void 0;let a=0;o.createCommand=function(e){e.Type="Command"+a++,e.prototype.getType=function(){return e.Type}},o.Controller=class{constructor(){this.name=""}setName(e){this.name=e}getName(){return this.name}onExit(){}};class i{constructor(){this.m_controllers=new Map,this.m_eventTarget=new cc.EventTarget}addController(e){var t=e.getName();this.m_controllers.get(t)?(cc.log("MKCommandCenter warning, controller already exist"),e.onExit()):this.m_controllers.set(t,e)}removeController(e){var t=this.m_controllers.get(e);t&&(t.onExit(),this.targetOff(t),this.m_controllers.delete(e))}hasController(e){return this.m_controllers.get(e)}on(e,t,o){this.m_eventTarget.on(e.Type,t,o)}off(e,t,o){this.m_eventTarget.off(e.Type,t,o)}registAllCommand(e){if(e.commandList)for(let t of e.commandList)this.on(t.command,e[t.methodName],e)}targetOff(e){this.m_eventTarget.targetOff(e)}emit(e){this.m_eventTarget.hasEventListener(e.getType())?this.m_eventTarget.emit(e.getType(),e):cc.log("MKCommandCenter err : no command handler, command type = "+e.getType())}}o.CommandCenter=i,o.commandCenter=new i,o.onCommand=function(e){return function(t,o){t.commandList||(t.commandList=[]),t.commandList.push({command:e,methodName:o})}},cc._RF.pop()},{}],MKCryptoUtils:[function(e,t,o){"use strict";cc._RF.push(t,"1ff71vS4J1NA7ytlCGJPgtt","MKCryptoUtils"),Object.defineProperty(o,"__esModule",{value:!0}),o.CryptoUtils=void 0,o.CryptoUtils=class{static md5(e){return CryptoJS.MD5(e).toString()}static base64Encode(e){var t=CryptoJS.enc.Utf8.parse(e);return CryptoJS.enc.Base64.stringify(t)}static base64Decode(e){return CryptoJS.enc.Base64.parse(e).toString(CryptoJS.enc.Utf8)}},cc._RF.pop()},{}],MKHttp:[function(e,t,o){"use strict";cc._RF.push(t,"0073dUDVQRAsofk0kRCNO0I","MKHttp"),Object.defineProperty(o,"__esModule",{value:!0}),o.Http=void 0;class a{static formatParams(e){let t="",o=!1;for(let a in e)o?t+="&":o=!0,t+=a+"="+e[a];return t}static get(e,t,o,i=a.ContentType.Form){let s=new XMLHttpRequest;s.onreadystatechange=function(){if(4==s.readyState)if(s.status>=200&&s.status<400){let a={};if(""!=s.responseText)try{a=JSON.parse(s.responseText)}catch(t){cc.log("http get result parse failed! url = %s",e)}o(!0,a)}else cc.log("http get error! code = %s, url = %s",s.status,e),o(!1,null)},s.onerror=function(){cc.log("http get error! url = %s",e),o(!1,null)},s.ontimeout=function(){cc.log("http get timeout! url = %s",e),o(!1,null)},i==a.ContentType.Json?(s.open("GET",e,!0),s.setRequestHeader("Content-Type","application/json; charset=utf-8"),s.send(t?JSON.stringify(t):null)):i==a.ContentType.Form?(t&&(e+="?"+a.formatParams(t)),s.open("GET",e,!0),s.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),s.send()):i==a.ContentType.Multipart&&(s.open("GET",e,!0),s.setRequestHeader("Content-Type","multipart/form-data"),s.send())}static post(e,t,o,i=a.ContentType.Form){let s=new XMLHttpRequest;s.onreadystatechange=function(){if(4==s.readyState)if(s.status>=200&&s.status<400){let a={};if(""!=s.responseText)try{a=JSON.parse(s.responseText)}catch(t){cc.log("http post result parse failed! url = %s",e)}o(!0,a)}else cc.log("http post error! code = %s, url = %s",s.status,e),o(!1,null)},s.onerror=function(){cc.log("http post error! url = %s",e),o(!1,null)},s.ontimeout=function(){cc.log("http post timeout! url = %s",e),o(!1,null)},s.open("POST",e,!0),i==a.ContentType.Json?(s.setRequestHeader("Content-Type","application/json; charset=utf-8"),s.send(t?JSON.stringify(t):null)):(s.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),s.send(t?a.formatParams(t):null))}static delete(e,t,o,i=a.ContentType.Form){let s=new XMLHttpRequest;s.onreadystatechange=function(){if(4==s.readyState)if(s.status>=200&&s.status<400){let a={};if(""!=s.responseText)try{a=JSON.parse(s.responseText)}catch(t){cc.log("http delete result parse failed! url = %s",e)}o(!0,a)}else cc.log("http delete error! code = %s, url = %s",s.status,e),o(!1,null)},s.onerror=function(){cc.log("http delete error! url = %s",e),o(!1,null)},s.ontimeout=function(){cc.log("http delete timeout! url = %s",e),o(!1,null)},i==a.ContentType.Json?(s.open("DELETE",e,!0),s.setRequestHeader("Content-Type","application/json; charset=utf-8"),s.send(t?JSON.stringify(t):null)):(t&&(e+="?"+a.formatParams(t)),s.open("DELETE",e,!0),s.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),s.send())}static postWithAuth(e,t,o,a){let i=new XMLHttpRequest;i.onreadystatechange=function(){if(4==i.readyState)if(i.status>=200&&i.status<400){let a={};if(""!=i.responseText)try{a=JSON.parse(i.responseText)}catch(t){cc.log("http post result parse failed! url = %s",e)}o(!0,a)}else cc.log("http post error! code = %s, url = %s",i.status,e),o(!1,null)},i.onerror=function(){cc.log("http post error! url = %s",e),o(!1,null)},i.ontimeout=function(){cc.log("http post timeout! url = %s",e),o(!1,null)},i.open("POST",e,!0),i.setRequestHeader("Authorization","Bearer "+a),i.setRequestHeader("Content-Type","multipart/form-data"),i.send(t?JSON.stringify(t):null)}static getWithAuth(e,t,o,a){let i=new XMLHttpRequest;i.onreadystatechange=function(){if(4==i.readyState)if(i.status>=200&&i.status<400){let a={};if(""!=i.responseText)try{a=JSON.parse(i.responseText)}catch(t){cc.log("http get result parse failed! url = %s",e)}o(!0,a)}else cc.log("http get error! code = %s, url = %s",i.status,e),o(!1,null)},i.onerror=function(){cc.log("http get error! url = %s",e),o(!1,null)},i.ontimeout=function(){cc.log("http get timeout! url = %s",e),o(!1,null)},i.open("GET",e,!0),i.setRequestHeader("Authorization","Bearer "+a),i.setRequestHeader("Content-Type","multipart/form-data"),i.send()}}o.Http=a,a.ContentType={Form:1,Json:2,Multipart:3},cc._RF.pop()},{}],MKImageDownloader:[function(e,t,o){"use strict";cc._RF.push(t,"4919aB9yv1POaDSwtAZW/Qh","MKImageDownloader"),Object.defineProperty(o,"__esModule",{value:!0}),o.imageDowloader=o.ImageDownloader=void 0;const a=e("./MKCryptoUtils");class i{constructor(){this.m_observers=null,this.m_observers=[]}loadUrl(e,t){for(var o=!1,a=0,i=this.m_observers.length;a<i;++a){var s=this.m_observers[a];if(e==s.url){s.callback.push(t),o=!0;break}}o||(this.m_observers.push({url:e,callback:[t]}),this.downloadImage(e))}onDownloadImage(e,t){for(var o=this.m_observers.length-1;o>=0;--o){var a=this.m_observers[o];if(e==a.url){for(var i=a.callback,s=0;s<i.length;++s)i[s](e,t);this.m_observers.splice(o,1);break}}}downloadImage(e){var t=jsb.fileUtils.getWritablePath()+"net_image/",o=t+a.CryptoUtils.md5(e)+".jpg";if(jsb.fileUtils.isFileExist(o))this.onDownloadImage(e,o);else{jsb.fileUtils.isDirectoryExist(t)||jsb.fileUtils.createDirectory(t);var i=new XMLHttpRequest;i.onreadystatechange=function(){4===i.readyState&&(200===i.status?this.saveFile(e,o,i.response):cc.log("Remote download file failed."))}.bind(this),i.responseType="arraybuffer",i.open("GET",e,!0),i.send()}}saveFile(e,t,o){jsb.fileUtils.writeDataToFile(new Uint8Array(o),t)?this.onDownloadImage(e,t):cc.log("Remote write file failed.")}clearCache(){var e=jsb.fileUtils.getWritablePath()+"net_image/";jsb.fileUtils.listFiles(e).length>100&&jsb.fileUtils.removeDirectory(e)}}o.ImageDownloader=i,o.imageDowloader=new i,cc._RF.pop()},{"./MKCryptoUtils":"MKCryptoUtils"}],MKIndex:[function(e,t,o){"use strict";cc._RF.push(t,"0f526BZPmpBr7wVUh62Ltxm","MKIndex");var a=this&&this.__createBinding||(Object.create?function(e,t,o,a){void 0===a&&(a=o),Object.defineProperty(e,a,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,a){void 0===a&&(a=o),e[a]=t[o]}),i=this&&this.__exportStar||function(e,t){for(var o in e)"default"===o||Object.prototype.hasOwnProperty.call(t,o)||a(t,e,o)};Object.defineProperty(o,"__esModule",{value:!0}),i(e("./Common/MKCryptoUtils"),o),i(e("./Common/MKLocalLang"),o),i(e("./Common/MKSystem"),o),i(e("./Common/MKUtils"),o),i(e("./Common/MKImageDownloader"),o),i(e("./Common/MKAudioEngine"),o),i(e("./Common/HeartBeatHandler"),o),i(e("./Event/MKCommandCenter"),o),i(e("./Event/MKNoticeCenter"),o),i(e("./Event/MKActionQueue"),o),i(e("./Network/MKHttp"),o),i(e("./Network/MKSocket"),o),cc._RF.pop()},{"./Common/HeartBeatHandler":"HeartBeatHandler","./Common/MKAudioEngine":"MKAudioEngine","./Common/MKCryptoUtils":"MKCryptoUtils","./Common/MKImageDownloader":"MKImageDownloader","./Common/MKLocalLang":"MKLocalLang","./Common/MKSystem":"MKSystem","./Common/MKUtils":"MKUtils","./Event/MKActionQueue":"MKActionQueue","./Event/MKCommandCenter":"MKCommandCenter","./Event/MKNoticeCenter":"MKNoticeCenter","./Network/MKHttp":"MKHttp","./Network/MKSocket":"MKSocket"}],MKLocalLang:[function(e,t,o){"use strict";cc._RF.push(t,"26623qYW/1OJ7PqJm16Um6d","MKLocalLang"),Object.defineProperty(o,"__esModule",{value:!0}),o.LocalLang=void 0;class a{static checkInit(){this.language||this.setLanguage("en")}static setLanguage(e){this.language!==e&&(this.language=e,this.reloadLabel(),this.reloadSprite())}static getLanguage(){return this.language}static _addOrDelLabel(e,t){if(t)this.labelArr.push(e);else{let t=this.labelArr.indexOf(e);-1!==t&&this.labelArr.splice(t,1)}}static get(e,t){if(this.checkInit(),null==t||0===t.length)return this.labelData[e]||e;let o=this.labelData[e]||e;for(let a=0;a<t.length;a++){let e=new RegExp("#"+a,"g");o=o.replace(e,t[a])}return o}static _addOrDelSprite(e,t){if(t)this.spriteArr.push(e);else{let t=this.spriteArr.indexOf(e);-1!==t&&this.spriteArr.splice(t,1)}}static _getSprite(e,t){this.checkInit(),cc.resources.load("i18n/sprite/"+this.language+"/"+e,cc.SpriteFrame,(e,o)=>{if(e)return t(null);t(o)})}static reloadLabel(){let e="i18n/label/"+this.language;cc.resources.load(e,(e,t)=>{e?(console.error(e),this.labelData={}):this.labelData=t.json;for(let o of this.labelArr)o._resetValue()})}static reloadSprite(){for(let e of this.spriteArr)e._resetValue()}}o.LocalLang=a,a.language="",a.labelArr=[],a.labelData={},a.spriteArr=[],cc._RF.pop()},{}],MKNoticeCenter:[function(e,t,o){"use strict";cc._RF.push(t,"79a78Glip9HQ5SpEWfy23e+","MKNoticeCenter"),Object.defineProperty(o,"__esModule",{value:!0}),o.onNotice=o.noticeCenter=o.NoticeCenter=o.createNotice=void 0;let a=0;o.createNotice=function(e){e.Type="Notice"+a++,e.prototype.getType=function(){return e.Type}};class i{constructor(){this.m_eventTarget=new cc.EventTarget}on(e,t,o){this.m_eventTarget.on(e.Type,t,o)}off(e,t,o){this.m_eventTarget.off(e.Type,t,o)}registAllNotice(e){if(e.noticeList)for(let t of e.noticeList)this.on(t.notice,e[t.methodName],e)}targetOff(e){this.m_eventTarget.targetOff(e)}emit(e){this.m_eventTarget.emit(e.getType(),e)}}o.NoticeCenter=i,o.noticeCenter=new i,o.onNotice=function(e){return function(t,o){t.noticeList||(t.noticeList=[]),t.noticeList.push({notice:e,methodName:o})}},cc._RF.pop()},{}],MKSocket:[function(e,t,o){"use strict";cc._RF.push(t,"9629bn3i9BIyKAXnP94lWgi","MKSocket"),Object.defineProperty(o,"__esModule",{value:!0}),o.onMsg=o.Socket=void 0;class a{constructor(){this.m_socket=null,this.m_eventTarget=new cc.EventTarget,this.m_connected=!1}connect(e){}disconnect(){this.m_connected=!1}isConnected(){return this.m_socket&&this.m_connected}send(e,t){}on(e,t,o){this.m_eventTarget.on(e.toString(),t,o)}off(e,t,o){this.m_eventTarget.off(e.toString(),t,o)}registAllMsg(e){if(e.msgList)for(let t of e.msgList)this.on(t.msgID,e[t.methodName],e)}targetOff(e){this.m_eventTarget.targetOff(e)}onConnect(e){this.m_connected=!0,this.m_eventTarget.emit(a.Connect,this,e)}onMessage(e){this.m_eventTarget.emit(a.Message,this,e),this.m_eventTarget.hasEventListener(e.msgID)?this.m_eventTarget.emit(e.msgID,e):cc.log("MKSocket err : no socket message handler, messageID = "+e.msgID)}onError(e){this.m_eventTarget.emit(a.Error,this,e),this.disconnect(),this.m_connected=!1}onClose(e){this.m_eventTarget.emit(a.Close,this,e),this.disconnect(),this.m_connected=!1}}o.Socket=a,a.Connect="Connect",a.Close="Close",a.Error="Error",a.Message="Message",o.onMsg=function(e){return function(t,o){t.msgList||(t.msgList=[]),t.msgList.push({msgID:e,methodName:o})}},cc._RF.pop()},{}],MKSystem:[function(e,t,o){"use strict";cc._RF.push(t,"a872ajJ9cJIZJgRz4rujdNB","MKSystem"),Object.defineProperty(o,"__esModule",{value:!0}),o.system=o.System=void 0;class a{constructor(){}getVersion(){return""}getVersionCode(){return 1}getPackageName(){return""}getMetaData(e){return""}getDeviceID(){return""}getLocation(){return""}getChannelID(){return""}copyStrToClipboard(e){}getFileMD5(e){return""}getPlatform(){return cc.sys.isNative?cc.sys.os==cc.sys.OS_ANDROID?cc.sys.OS_ANDROID:cc.sys.os==cc.sys.OS_IOS?cc.sys.OS_IOS:"Web":"Web"}getWakeUpData(){return""}shareText(e,t){}shareInWhatsApp(e){}}o.System=a;class i extends a{constructor(){super()}getVersion(){return"1.0.0"}getVersionCode(){return 1}getPackageName(){return"com.kbsgame.teenpatti"}getDeviceModel(){return""}getSystemVersion(){return""}getMetaData(e){return""}getLocation(){return""}getDeviceID(){return this.genMacFack()}getChannelID(){return"KBS"}genMacFack(){var e=cc.sys.localStorage.getItem("macFack");if(e)return e;e="";for(var t=0;t<6;t++){for(var o="",a=0;a<2;a++)o+="0123456789abcdef"[Math.ceil(15*Math.random())];e+=e?":"+o:o}return cc.sys.localStorage.setItem("macFack",e),e}}let s=null;s=cc.sys.isNative?cc.sys.os==cc.sys.OS_ANDROID?new class extends a{constructor(){super(),this.version="",this.versionCode=1,this.packageName="",this.channelID="",this.version=jsb.reflection.callStaticMethod("org/cocos2dx/lib/Cocos2dxHelper","getVersion","()Ljava/lang/String;"),this.packageName=jsb.reflection.callStaticMethod("org/cocos2dx/lib/Cocos2dxHelper","getPackageName","()Ljava/lang/String;"),this.channelID=this.getMetaData("APP_CHANNEL");try{this.versionCode=jsb.reflection.callStaticMethod("com/mk/common/MKSystem","getVersionCode","()J")}catch(e){}}getVersion(){return this.version}getVersionCode(){return this.versionCode}getPackageName(){return this.packageName}getDeviceModel(){return jsb.reflection.callStaticMethod("org/cocos2dx/lib/Cocos2dxHelper","getDeviceModel","()Ljava/lang/String;")}getSystemVersion(){return jsb.reflection.callStaticMethod("org/cocos2dx/lib/Cocos2dxHelper","getSystemVersion","()Ljava/lang/String;")}getMetaData(e){return jsb.reflection.callStaticMethod("com/mk/common/MKSystem","getMetaData","(Ljava/lang/String;)Ljava/lang/String;",e)}getDeviceID(){return jsb.reflection.callStaticMethod("com/mk/common/MKSystem","getDeviceID","()Ljava/lang/String;")}getLocation(){return jsb.reflection.callStaticMethod("com/mk/common/MKSystem","getLocation","()Ljava/lang/String;")}getChannelID(){return this.channelID}copyStrToClipboard(e){jsb.reflection.callStaticMethod("com/mk/common/MKSystem","copyStrToClipboard","(Ljava/lang/String;)V",e)}getFileMD5(e){return jsb.reflection.callStaticMethod("com/mk/common/MKSystem","getFileMD5","(Ljava/lang/String;)Ljava/lang/String;",e)}getWakeUpData(){return this.getVersionCode()<43?"":jsb.reflection.callStaticMethod("com/mk/common/MKSystem","getWakeUpData","()Ljava/lang/String;")}shareText(e,t){if(!(this.getVersionCode()<50))return jsb.reflection.callStaticMethod("com/mk/common/MKSystem","shareText","(Ljava/lang/String;Ljava/lang/String;)V",e,t)}shareInWhatsApp(e){if(!(this.getVersionCode()<50))return jsb.reflection.callStaticMethod("com/mk/common/MKSystem","shareToApp","(Ljava/lang/String;Ljava/lang/String;)V","com.whatsapp",e)}}:cc.sys.os==cc.sys.OS_IOS?new class extends a{constructor(){super(),this.version="",this.packageName="",this.channelID="",this.channelID=this.getMetaData("APP_CHANNEL")}getVersion(){return this.version}getPackageName(){return this.packageName}getMetaData(e){return jsb.reflection.callStaticMethod("MKSystem","getMetaData:",e)}getChannelID(){return this.channelID}copyStrToClipboard(e){jsb.reflection.callStaticMethod("MKSystem","copyStrToClipboard:",e)}getFileMD5(e){return jsb.reflection.callStaticMethod("MKSystem","getFileMD5:",e)}}:new i:new i,o.system=s,cc._RF.pop()},{}],MKUtils:[function(e,t,o){"use strict";cc._RF.push(t,"67818ViSbNBt7n0lfXcd04e","MKUtils"),Object.defineProperty(o,"__esModule",{value:!0}),o.Utils=void 0;class a{static randRange(e,t){return Math.floor(Math.random()*(t-e+1))+e}static strMaxCut(e,t){for(var o="",a=0,i=0;i<e.length;i++){var s=e[i];s.charCodeAt(0)>255?a+=2:a++,a<=t&&(o+=s)}return a>t?o+"...":o}static dateFormat(e,t){var o=new Date(t);let a;const i={"Y+":o.getFullYear().toString(),"m+":(o.getMonth()+1).toString(),"d+":o.getDate().toString(),"H+":o.getHours().toString(),"M+":o.getMinutes().toString(),"S+":o.getSeconds().toString()};for(let s in i)(a=new RegExp("("+s+")").exec(e))&&(e=e.replace(a[1],1==a[1].length?i[s]:i[s].padStart(a[1].length,"0")));return e}static getUrlParams(){if(cc.sys.isNative)return{};var e=window.location.search;return a.parseUrlParams(e)}static parseUrlParams(e){var t={},o=e.indexOf("?");if(-1!=o)for(var a=e.substr(o+1).split("&"),i=0;i<a.length;i++)t[a[i].split("=")[0]]=a[i].split("=")[1];return t}static resize(){var e=cc.find("Canvas").getComponent(cc.Canvas);this.curDR||(this.curDR=e.designResolution);var t=this.curDR,o=cc.view.getFrameSize(),a=o.width,i=o.height,s=a,r=i;a/i>t.width/t.height?s=(r=t.height)*a/i:r=i/a*(s=t.width),e.designResolution=cc.size(s,r),e.node.width=s,e.node.height=r,e.node.emit("resize")}static maxCountElement(e){let t={};for(let s=0;s<e.length;s++){let o=e[s];t[o]?t[o]++:t[o]=1}let o=0,a=[],i=[];for(let s in t)o<t[s]?(o=t[s],a[0]=s,i.length=0):o===t[s]&&i.push(s);if(i.length>0)for(let s=0;s<i.length;s++)a.push(i[s]);return a}static isEmail(e){return/^\w+((-\w+)|(\.\w+))*\@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z]+$/.test(e)}static isPhone(e){return/^(\d*)$/.test(e)}static isUserName(e){return/^[A-Za-z0-9][A-Za-z0-9\s]*[A-Za-z0-9]$/.test(e)}}o.Utils=a,a.curDR=null,cc._RF.pop()},{}],MenuLayer:[function(e,t,o){"use strict";cc._RF.push(t,"0de2b6hsk5OQo/U/taIk3GO","MenuLayer");var a=this&&this.__decorate||function(e,t,o,a){var i,s=arguments.length,r=s<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,a);else for(var n=e.length-1;n>=0;n--)(i=e[n])&&(r=(s<3?i(r):s>3?i(t,o,r):i(t,o))||r);return s>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});const i=e("../MobileKit/MKIndex"),s=e("./Common/PopupBase"),r=e("./Common/PopupManager"),n=e("../Business/Data/CommonDefine"),c=e("../Business/Data/SaveDataManager"),{ccclass:l,property:d,menu:h}=cc._decorator;let u=class extends s.default{constructor(){super(...arguments),this.animationDuration=0,this.btnPaytable=null,this.btnHelp=null,this.btnLanguage=null,this.btnRecord=null,this.imgMusic=null,this.imgSound=null,this.imgMusicOn=null,this.imgMusicOff=null,this.imgSoundOn=null,this.imgSoundOff=null,this.musicOn=!1,this.soundOn=!1}static get path(){return"Scenes/Game/menu_layer"}onLoad(){this.main||(this.main=this.node),this.btnPaytable.on(cc.Node.EventType.TOUCH_END,this.onTouchPaytable,this),this.btnHelp.on(cc.Node.EventType.TOUCH_END,this.onTouchHelp,this),this.btnRecord.on(cc.Node.EventType.TOUCH_END,this.onTouchRecord,this),this.musicOn=c.default.getMusicEnable(),this.soundOn=c.default.getEffectEnable(),this.imgMusic.spriteFrame=this.musicOn?this.imgMusicOn:this.imgMusicOff,this.imgSound.spriteFrame=this.soundOn?this.imgSoundOn:this.imgSoundOff}onTouchClose(){this.hide()}onTouchPaytable(){r.default.show(n.PrefabList.PaytableLayer),this.hide()}onTouchHelp(){r.default.show(n.PrefabList.HelpLayer),this.hide()}onTouchRecord(){r.default.show(n.PrefabList.GameRecordLayer),this.hide()}onTouchMusic(){this.musicOn=!this.musicOn,this.imgMusic.spriteFrame=this.musicOn?this.imgMusicOn:this.imgMusicOff,c.default.setMusicEnable(this.musicOn),i.AudioEngine.setMusicEnabled(this.musicOn)}onTouchSound(){this.soundOn=!this.soundOn,this.imgSound.spriteFrame=this.soundOn?this.imgSoundOn:this.imgSoundOff,c.default.setEffectEnable(this.soundOn),i.AudioEngine.setEffectsEnabled(this.soundOn),i.AudioEngine.playEffect(n.SoundList.Click)}};a([d(cc.Node)],u.prototype,"btnPaytable",void 0),a([d(cc.Node)],u.prototype,"btnHelp",void 0),a([d(cc.Node)],u.prototype,"btnLanguage",void 0),a([d(cc.Node)],u.prototype,"btnRecord",void 0),a([d(cc.Sprite)],u.prototype,"imgMusic",void 0),a([d(cc.Sprite)],u.prototype,"imgSound",void 0),a([d(cc.SpriteFrame)],u.prototype,"imgMusicOn",void 0),a([d(cc.SpriteFrame)],u.prototype,"imgMusicOff",void 0),a([d(cc.SpriteFrame)],u.prototype,"imgSoundOn",void 0),a([d(cc.SpriteFrame)],u.prototype,"imgSoundOff",void 0),u=a([l],u),o.default=u,cc._RF.pop()},{"../Business/Data/CommonDefine":"CommonDefine","../Business/Data/SaveDataManager":"SaveDataManager","../MobileKit/MKIndex":"MKIndex","./Common/PopupBase":"PopupBase","./Common/PopupManager":"PopupManager"}],MessageView:[function(e,t,o){"use strict";cc._RF.push(t,"46174h9izpKHKj9zlyrAHrr","MessageView");var a,i=this&&this.__decorate||function(e,t,o,a){var i,s=arguments.length,r=s<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,a);else for(var n=e.length-1;n>=0;n--)(i=e[n])&&(r=(s<3?i(r):s>3?i(t,o,r):i(t,o))||r);return s>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});const{ccclass:s,property:r}=cc._decorator;let n=a=class extends cc.Component{constructor(){super(...arguments),this.imgBg=null,this.text=null}onLoad(){}onDestroy(){}animate(e=2){this.node.stopAllActions(),cc.tween(this.node).delay(e).call(()=>{this.node.removeFromParent()}).start()}show(e,t){this.text.string=e,this.animate(t)}static show(e,t){if(null==a.defaultSkin){let e=cc.resources.get("Scenes/Common/MessageView",cc.Prefab);if(null==e)return void cc.log("Please init MessageView defaultSkin on app init");a.defaultSkin=e}a.showWithFile(a.defaultSkin,e,t)}static showWithFile(e,t,o){null==a.g_persistRootNode&&(a.g_persistRootNode=new cc.Node,a.g_persistRootNode.width=cc.winSize.width,a.g_persistRootNode.height=cc.winSize.height,a.g_persistRootNode.x=cc.winSize.width/2,a.g_persistRootNode.y=cc.winSize.height/2,cc.game.addPersistRootNode(a.g_persistRootNode)),(a.g_persistRootNode.width<cc.winSize.width||a.g_persistRootNode.height<cc.winSize.height)&&(a.g_persistRootNode.width=cc.winSize.width,a.g_persistRootNode.height=cc.winSize.height,a.g_persistRootNode.x=cc.winSize.width/2,a.g_persistRootNode.y=cc.winSize.height/2);let i=a.g_persistRootNode,s=null,r=i.getChildByName("MessageView");null==r?((s=cc.instantiate(e).getComponent(a)).node.name="MessageView",s.node.x=cc.winSize.width/2,s.node.y=cc.winSize.height/2,i.addChild(s.node)):s=r.getComponent(a),s.show(t,o)}};n.defaultSkin=null,n.g_persistRootNode=null,i([r(cc.Sprite)],n.prototype,"imgBg",void 0),i([r(cc.Label)],n.prototype,"text",void 0),n=a=i([s],n),o.default=n,cc._RF.pop()},{}],NetworkConstants:[function(e,t,o){"use strict";cc._RF.push(t,"670a7mMGfNFBZ5dvBazXYJa","NetworkConstants"),Object.defineProperty(o,"__esModule",{value:!0}),o.MsgCBNtf=o.MsgCBAck=o.MsgCBReq=o.MsgCB=o.MsgBaseNtf=o.MsgBaseAck=o.MsgBaseReq=o.MsgBase=o.MsgNtfMark=o.MsgAckMark=o.MsgTypeMark=o.MsgModeMark=o.MsgCodeOK=void 0,o.MsgCodeOK=200,o.MsgModeMark=1e6,o.MsgTypeMark=1e4,o.MsgAckMark=2*o.MsgTypeMark,o.MsgNtfMark=3*o.MsgTypeMark,o.MsgBase=1*o.MsgModeMark,o.MsgBaseReq=o.MsgBase,o.MsgBaseAck=o.MsgBase+o.MsgAckMark,o.MsgBaseNtf=o.MsgBase+o.MsgNtfMark,o.MsgCB=2*o.MsgModeMark,o.MsgCBReq=o.MsgCB,o.MsgCBAck=o.MsgCB+o.MsgAckMark,o.MsgCBNtf=o.MsgCB+o.MsgNtfMark,cc._RF.pop()},{}],NetworkController:[function(e,t,o){"use strict";cc._RF.push(t,"56f188UTbdI+qVXVv/UcjG4","NetworkController");var a=this&&this.__decorate||function(e,t,o,a){var i,s=arguments.length,r=s<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,a);else for(var n=e.length-1;n>=0;n--)(i=e[n])&&(r=(s<3?i(r):s>3?i(t,o,r):i(t,o))||r);return s>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0}),o.NetworkController=o.CmdBroadcastTest=o.CmdTokenLogin=o.CmdGetServerConfig=void 0;const i=e("../../MobileKit/MKIndex"),s=e("../../Business/Data/ConfigManager"),r=e("../../Business/Data/DataManager"),n=e("../../Business/Data/CommonDefine"),c=e("./NetworkNotice"),l=e("../NetWork/NetworkManager"),d=e("../NetWork/NetworkConstants");let h=class{};h=a([i.createCommand],h),o.CmdGetServerConfig=h;let u=class{};u=a([i.createCommand],u),o.CmdTokenLogin=u;let p=class{};p=a([i.createCommand],p),o.CmdBroadcastTest=p;class m extends i.Controller{constructor(){super(),this.m_socket=null,this.m_windowsEcho=window.Echo,this.setName("NetworkController"),i.noticeCenter.registAllNotice(this),i.commandCenter.registAllCommand(this),this.m_socket=l.default.getInstance().getCommonSocket(),this.m_socket.registAllMsg(this),this.m_heartBeatHandler=new i.HeartBeatHandler,this.m_heartBeatHandler.logName="[Socket]",this.m_heartBeatHandler.idle=10,this.m_heartBeatHandler.idleCallBack=this.sendIdle.bind(this),this.m_heartBeatHandler.timeOutCallBack=this.onHeartBeatTimeOut.bind(this)}onExit(){i.noticeCenter.targetOff(this),i.commandCenter.targetOff(this)}onCmdGetServerConfig(e){var t=s.default.urlConfig.base+"getconfig",o={};o.channel=i.system.getChannelID(),o.package=i.system.getPackageName(),o.version=i.system.getVersion(),o.deviceid=i.system.getDeviceID(),cc.log("getconfig params = "+JSON.stringify(o)),i.Http.get(t,o,this.onSetting.bind(this))}onSetting(e,t){if(e&&(cc.log("getconfig result = ",JSON.stringify(t)),200==t.code)){let e=r.default.homeData;e.setChipsUnit(t.chipUnit),e.setGameId(t.gameid)}}onCmdTokenLogin(e){let t=s.default.urlConfig.base+"api/auth/login",o={platform:"JhandiMundaSingle",platform_token:"3345678"};o.token=r.default.userData.getToken(),cc.log("login params = "+JSON.stringify(o)),i.Http.post(t,o,this.onNetTokenLogin.bind(this))}onNetTokenLogin(e,t){e?200==t.code?(this.setUserData(t.data[0]),i.noticeCenter.emit(new c.NtcLogin(0))):this.loginSDKFailed(t.code):this.loginSDKFailed()}setUserData(e){let t=e.user_info[0],o=r.default.userData;o.setUid(t.user_id),o.setToken(e.access_token);let a=[];e.user_info.record.forEach(e=>{let t=new n.RecordData;t.time=new Date(e.created_at).getTime(),t.balance=e.round_amount,t.isWin=e.big_win,a.push(t)}),r.default.userData.setGameRecordLst(a),r.default.homeData.setWs("https://adminapi.lgnetwork.fun/socket.io")}loginSDKFailed(e,t){null==e&&(e=1),i.noticeCenter.emit(new c.NtcLogin(e))}onConnect(){cc.log("[Socket] connect server success!"),cc.log("[send] Token ="+JSON.stringify(void 0)),this.m_socket.send(d.MsgBaseReq+"AckToken",void 0)}onNetAckToken(e){if(cc.log("[receive] TokenRsp code = "+e.state.code),e.state.code!=d.MsgCodeOK)return cc.log("Rsp info = "+e.state.info),void i.noticeCenter.emit(new c.NtcLogin(2));var t=e.body;cc.log("TokenRsp = "+JSON.stringify(t)),r.default.userData.setLogined(!0),this.m_heartBeatHandler.startIdle()}onMessage(){this.m_heartBeatHandler.onReceiveHeartBeat()}sendIdle(){}onHeartBeatTimeOut(){cc.log("[Socket] onHeartBeatTimeOut"),this.onServerDisconnect()}onNetAckHeart(e){this.m_heartBeatHandler.onReceiveHeartBeat()}onServerDisconnect(){this.m_heartBeatHandler.stopIdle(),this.m_socket.disconnect(),r.default.userData.setLogined(!1)}onBroadcastTest(){for(let e=0;e<10;e++){let t={};t.player="Player"+e,t.amount=i.Utils.randRange(30,1304),this.onNetBroadcast(t)}}onNetBroadcast(e){let t=e;cc.log("[receive] GameWordNews = "+JSON.stringify(t));let o=i.LocalLang.get("lobby_broadcast_win",[t.player,t.amount]);r.default.homeData.getBroadcastData().addPushNotice(o,2)}}a([i.onCommand(h)],m.prototype,"onCmdGetServerConfig",null),a([i.onCommand(u)],m.prototype,"onCmdTokenLogin",null),a([i.onMsg(i.Socket.Connect)],m.prototype,"onConnect",null),a([i.onMsg(d.MsgBaseAck+"AckToken")],m.prototype,"onNetAckToken",null),a([i.onMsg(i.Socket.Message)],m.prototype,"onMessage",null),a([i.onMsg(d.MsgBaseAck)],m.prototype,"onNetAckHeart",null),a([i.onCommand(p)],m.prototype,"onBroadcastTest",null),a([i.onMsg("GET_BROADCAST")],m.prototype,"onNetBroadcast",null),o.NetworkController=m,cc._RF.pop()},{"../../Business/Data/CommonDefine":"CommonDefine","../../Business/Data/ConfigManager":"ConfigManager","../../Business/Data/DataManager":"DataManager","../../MobileKit/MKIndex":"MKIndex","../NetWork/NetworkConstants":"NetworkConstants","../NetWork/NetworkManager":"NetworkManager","./NetworkNotice":"NetworkNotice"}],NetworkManager:[function(e,t,o){"use strict";cc._RF.push(t,"fde8eQasMBHsK4UOZ57A4Dp","NetworkManager"),Object.defineProperty(o,"__esModule",{value:!0});const a=e("./GameSocket");class i{constructor(){this.m_commonSocket=new a.default}getCommonSocket(){return this.m_commonSocket}}o.default=i,i.sharedManager=null,i.getInstance=function(){return null===i.sharedManager&&(i.sharedManager=new i),i.sharedManager},cc._RF.pop()},{"./GameSocket":"GameSocket"}],NetworkNotice:[function(e,t,o){"use strict";cc._RF.push(t,"dcce6iOurFKsYzb0t5YwJu5","NetworkNotice");var a=this&&this.__decorate||function(e,t,o,a){var i,s=arguments.length,r=s<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,a);else for(var n=e.length-1;n>=0;n--)(i=e[n])&&(r=(s<3?i(r):s>3?i(t,o,r):i(t,o))||r);return s>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0}),o.NtcGetServerConfig=o.NtcDisconnect=o.NtcLogin=void 0;const i=e("../../MobileKit/MKIndex");let s=class{constructor(e){this.result=e}};s=a([i.createNotice],s),o.NtcLogin=s;let r=class{constructor(e){this.reason=e}};r=a([i.createNotice],r),o.NtcDisconnect=r;let n=class{};n=a([i.createNotice],n),o.NtcGetServerConfig=n,cc._RF.pop()},{"../../MobileKit/MKIndex":"MKIndex"}],PlayerData:[function(e,t,o){"use strict";cc._RF.push(t,"c5a2bFZbYZPo6Xac8ibBW/Q","PlayerData"),Object.defineProperty(o,"__esModule",{value:!0}),o.PlayerData=void 0,o.PlayerData=class{constructor(){this.m_seat=-1,this.m_uid="",this.m_nickName="",this.m_sex=1,this.m_chips=0,this.m_headUrl="",this.m_playing=!1,this.m_isBanker=!1,this.m_handCards=null,this.m_point=0,this.m_dropped=!1,this.m_confirmed=!1,this.m_isWinner=!1,this.m_winLose=0,this.m_cardGroup=null,this.m_seat=-1,this.m_uid="",this.m_nickName="",this.m_sex=1,this.m_chips=0,this.m_headUrl="",this.m_playing=!1,this.m_handCards=[],this.m_cardGroup=[]}resetAllData(){this.m_seat=-1,this.m_uid="",this.m_nickName="",this.m_chips=0,this.m_headUrl="",this.resetGameData()}resetGameData(){this.m_handCards.length=0,this.m_isBanker=!1,this.m_dropped=!1,this.m_confirmed=!1,this.m_isWinner=!1,this.m_winLose=0}setSeat(e){this.m_seat=e}getSeat(){return this.m_seat}setUid(e){this.m_uid=e}getUid(){return this.m_uid}setNickName(e){this.m_nickName=e}getNickName(){return this.m_nickName}getSex(){return this.m_sex}setSex(e){this.m_sex=e}getHeadUrl(){return this.m_headUrl}setHeadUrl(e){this.m_headUrl=e}getChips(){return this.m_chips}setChips(e){this.m_chips=e}isPlaying(){return this.m_playing}setPlaying(e){this.m_playing=e}isBanker(){return this.m_isBanker}setBanker(){this.m_isBanker=!0}getPoint(){return this.m_point}setPoint(e){this.m_point=e}isDropped(){return this.m_dropped}setDropped(e){this.m_dropped=e}isConfirmed(){return this.m_confirmed}setConfirmed(e){this.m_confirmed=e}isWinner(){return this.m_isWinner}setWinner(e){this.m_isWinner=e}getHandCards(){return this.m_handCards}setHandCards(e){this.m_handCards=e}getCardGroup(){return this.m_cardGroup}setCardGroup(e){this.m_cardGroup=e}setWinLose(e){this.m_winLose=e}getWinLose(){return this.m_winLose}},cc._RF.pop()},{}],PlayerNode:[function(e,t,o){"use strict";cc._RF.push(t,"6b013O+pRZGnaVlS1ZVz4wG","PlayerNode");var a=this&&this.__decorate||function(e,t,o,a){var i,s=arguments.length,r=s<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,a);else for(var n=e.length-1;n>=0;n--)(i=e[n])&&(r=(s<3?i(r):s>3?i(t,o,r):i(t,o))||r);return s>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});const i=e("../MobileKit/MKIndex"),s=e("../Business/Data/DataManager"),r=e("../Business/Data/CommonDefine"),n=e("../Business/Logic/GameNotice"),c=e("./Common/UIUtils"),l=e("./Common/PrefabPool"),d=e("./PokerNode"),{ccclass:h,property:u,menu:p}=cc._decorator;let m=class extends cc.Component{constructor(){super(...arguments),this.txtSeat=null,this.imgSeat=null,this.imgProgress=null,this.imgLost=null,this.txtLost=null,this.txtDrop=null,this.headMask=null,this.bgTableChips=null,this.txtLostChips=null,this.imgWinner=null,this.tableCardPosLeft=null,this.tableCardPosRight=null,this.tableChipsPos=null,this.flyCard=null,this.player=null,this.gameData=null,this.panelLostChipsBig=.8,this.panelLostChipsSmall=.5}onLoad(){i.noticeCenter.registAllNotice(this),this.gameData=s.default.gameData,this.initUI()}initUI(){let e=l.default.get(r.PrefabList.PokerNode);e.setParent(this.node),e.setPosition(0,0),e.active=!1,this.flyCard=e.getComponent(d.default),this.imgWinner.node.removeFromParent(),this.clearGame()}clearGame(){this.imgLost.node.active=!1,this.imgLost.node.scale=1,this.imgLost.node.stopAllActions(),this.bgTableChips&&(this.bgTableChips.active=!1,this.bgTableChips.scale=this.panelLostChipsBig,this.bgTableChips.stopAllActions()),this.setDropped(!1),this.setPlaying(!0),this.stopProgress()}setTablePos(e,t,o){this.tableCardPosLeft=this.node.convertToNodeSpaceAR(e.parent.convertToWorldSpaceAR(e.position)),this.tableCardPosRight=this.node.convertToNodeSpaceAR(t.parent.convertToWorldSpaceAR(t.position)),this.tableChipsPos=this.node.convertToNodeSpaceAR(o.parent.convertToWorldSpaceAR(o.position))}sitDown(e){this.player=e,this.imgSeat.node.active=!0,this.setDropped(this.player.isDropped()),this.setPlaying(this.player.isPlaying()),this.stopProgress(),this.txtSeat.string=this.player.getSeat().toString(),this.player.isWinner()}standUp(){this.player=null,this.imgSeat.node.active=!1,this.stopProgress(),this.clearGame()}startProgress(){let e=this.gameData.getStageLeftTime();this.stopProgress(),this.imgProgress.node.active=!0,this.imgProgress.progress=1,cc.tween(this.imgProgress).to(e,{progress:0}).start(),cc.tween(this.imgProgress.node).delay(e-3).call(()=>{i.AudioEngine.playEffect(r.SoundList.Alarm)}).delay(1).call(()=>{i.AudioEngine.playEffect(r.SoundList.Alarm)}).start()}stopProgress(){this.imgProgress.node.active=!1,this.imgProgress.node.stopAllActions()}setPlaying(e){this.headMask.node.active=!e}setDropped(e){this.headMask.node.active=e,this.txtDrop.node.active=e}discard(e,t){let o=this.flyCard;o.setPoker(e),c.UIUtils.setJokerFlag(o),o.node.active=!0,o.node.stopAllActions(),o.node.x=0,o.node.y=0,o.node.scale=r.PlayerCardScale;let a=cc.tween(o.node);a.to(r.DrawCardFlyTime,{x:this.tableCardPosRight.x,y:this.tableCardPosRight.y,scale:r.TableCardScale}),a.call(()=>{t(),o.node.active=!1}),a.start()}drawCard(){let e=this.flyCard;e.setPoker(-1),e.node.active=!0,e.node.stopAllActions(),e.node.x=this.tableCardPosLeft.x,e.node.y=this.tableCardPosLeft.y,e.node.scale=r.TableCardScale;let t=cc.tween(e.node);t.to(r.DrawCardFlyTime,{x:0,y:0,scale:r.PlayerCardScale}),t.delay(.3),t.call(()=>{e.node.active=!1}),t.start()}chowCard(e){let t=this.flyCard;t.setPoker(e),c.UIUtils.setJokerFlag(t),t.node.active=!0,t.node.stopAllActions(),t.node.x=this.tableCardPosRight.x,t.node.y=this.tableCardPosRight.y,t.node.scale=r.TableCardScale;let o=cc.tween(t.node);o.to(r.DrawCardFlyTime,{x:0,y:0,scale:r.PlayerCardScale}),o.delay(.3),o.call(()=>{t.node.active=!1}),o.start()}winChips(e){this.setWinner(!0),i.AudioEngine.playEffect("Sound/RMGame/chips"),this.bgTableChips.active=!0,this.bgTableChips.position=this.tableChipsPos,this.bgTableChips.scale=this.panelLostChipsBig,this.txtLostChips.string=c.UIUtils.getShortNumber(e),this.bgTableChips.stopAllActions();let t=cc.tween(this.bgTableChips);t.to(.5,{scale:this.panelLostChipsSmall,x:0,y:0}),t.delay(.5),t.call(()=>{this.bgTableChips.active=!1}),t.start()}loseChips(e,t,o){this.stopProgress(),this.bgTableChips.active=!0,this.bgTableChips.x=0,this.bgTableChips.y=0,this.bgTableChips.scale=this.panelLostChipsSmall,this.txtLostChips.string=c.UIUtils.getShortNumber(t),this.bgTableChips.stopAllActions();let a=cc.tween(this.bgTableChips);a.to(.5,{scale:this.panelLostChipsBig,position:this.tableChipsPos}),a.call(()=>{this.bgTableChips.active=!1,this.showLostPoint(e),o()}),a.start()}showLostPoint(e){this.imgLost.node.active=!0,this.imgLost.node.stopAllActions(),this.txtLost.string="Lost at "+e,this.imgLost.node.scale=.5;let t=cc.tween(this.imgLost.node);t.to(.4,{scale:1}),t.start()}setWinner(e){if(e){if(this.imgWinner.node.active)return;this.imgWinner.node.active=!0}else this.imgWinner.node.active=!1}onNtcResetGame(){this.player=null,this.clearGame()}onNtcDealCards(){this.clearGame()}onNtcWaitDiscard(e){this.player&&(e.seat==this.player.getSeat()?this.startProgress():this.stopProgress())}onWaitPickCard(e){this.player&&(e.seat==this.player.getSeat()?this.startProgress():this.stopProgress())}onNtcDrop(e){this.player&&this.player.getSeat()==e.seat&&(this.setDropped(!0),this.stopProgress())}onNtcShow(e){this.player&&(e.seat==this.player.getSeat()?(this.stopProgress(),this.setWinner(!0)):!this.player.isDropped()&&this.player.isPlaying()&&this.startProgress())}onNtcConfirmGroup(e){this.player&&this.player.getSeat()==e.seat&&this.stopProgress()}onNtcFinish(e){this.player&&this.stopProgress()}};a([u({type:cc.Label,displayName:""})],m.prototype,"txtSeat",void 0),a([u({type:cc.Sprite,displayName:""})],m.prototype,"imgSeat",void 0),a([u(cc.ProgressBar)],m.prototype,"imgProgress",void 0),a([u(cc.Sprite)],m.prototype,"imgLost",void 0),a([u(cc.Label)],m.prototype,"txtLost",void 0),a([u(cc.Label)],m.prototype,"txtDrop",void 0),a([u(cc.Sprite)],m.prototype,"headMask",void 0),a([u(cc.Node)],m.prototype,"bgTableChips",void 0),a([u(cc.Label)],m.prototype,"txtLostChips",void 0),a([u(cc.Sprite)],m.prototype,"imgWinner",void 0),a([i.onNotice(n.NtcResetGame)],m.prototype,"onNtcResetGame",null),a([i.onNotice(n.NtcDealCards)],m.prototype,"onNtcDealCards",null),a([i.onNotice(n.NtcWaitDiscard)],m.prototype,"onNtcWaitDiscard",null),a([i.onNotice(n.NtcWaitPickCard)],m.prototype,"onWaitPickCard",null),a([i.onNotice(n.NtcDrop)],m.prototype,"onNtcDrop",null),a([i.onNotice(n.NtcShow)],m.prototype,"onNtcShow",null),a([i.onNotice(n.NtcConfirmGroup)],m.prototype,"onNtcConfirmGroup",null),a([i.onNotice(n.NtcFinish)],m.prototype,"onNtcFinish",null),m=a([h],m),o.default=m,cc._RF.pop()},{"../Business/Data/CommonDefine":"CommonDefine","../Business/Data/DataManager":"DataManager","../Business/Logic/GameNotice":"GameNotice","../MobileKit/MKIndex":"MKIndex","./Common/PrefabPool":"PrefabPool","./Common/UIUtils":"UIUtils","./PokerNode":"PokerNode"}],PokerData:[function(e,t,o){"use strict";var a,i;cc._RF.push(t,"49959S7SupJO7nuVF1YYdst","PokerData"),Object.defineProperty(o,"__esModule",{value:!0}),o.PokerData=o.PokerRedJoker=o.PokerBlackJoker=o.PokerCount=o.PokerPointCount=o.PokerPoint=o.PokerColor=void 0,function(e){e[e.Diamond=0]="Diamond",e[e.Club=1]="Club",e[e.Heart=2]="Heart",e[e.Spade=3]="Spade",e[e.Joker=4]="Joker"}(a=o.PokerColor||(o.PokerColor={})),function(e){e[e.PointA=0]="PointA",e[e.Point2=1]="Point2",e[e.Point3=2]="Point3",e[e.Point4=3]="Point4",e[e.Point5=4]="Point5",e[e.Point6=5]="Point6",e[e.Point7=6]="Point7",e[e.Point8=7]="Point8",e[e.Point9=8]="Point9",e[e.Point10=9]="Point10",e[e.PointJ=10]="PointJ",e[e.PointQ=11]="PointQ",e[e.PointK=12]="PointK",e[e.Joker=13]="Joker"}(i=o.PokerPoint||(o.PokerPoint={})),o.PokerPointCount=13,o.PokerCount=54,o.PokerBlackJoker=52,o.PokerRedJoker=53;class s{constructor(){this.color=0,this.point=-1,this.code=-1,this.color=0,this.point=-1,this.code=-1}init(e){this.code=e,this.point=s.getPokerPoint(e),this.color=s.getPokerColor(e)}getPoint(){return this.point}getColor(){return this.color}getCode(){return this.code}static getPokerPoint(e){return s.isJoker(e)?i.Joker:(e%=o.PokerCount)%o.PokerPointCount}static getPokerColor(e){return s.isJoker(e)?a.Joker:(e%=o.PokerCount,Math.floor(e/o.PokerPointCount))}static isJoker(e){return(e%=o.PokerCount)==o.PokerBlackJoker||e==o.PokerRedJoker}}o.PokerData=s,cc._RF.pop()},{}],PokerNode:[function(e,t,o){"use strict";cc._RF.push(t,"63e095MnllNM6rVQopCo5Uy","PokerNode");var a=this&&this.__decorate||function(e,t,o,a){var i,s=arguments.length,r=s<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,a);else for(var n=e.length-1;n>=0;n--)(i=e[n])&&(r=(s<3?i(r):s>3?i(t,o,r):i(t,o))||r);return s>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});const i=e("../Business/Data/PokerData"),{ccclass:s,property:r,menu:n}=cc._decorator;let c=class extends cc.Component{constructor(){super(),this.upNumber=null,this.upImage=null,this.imgPokerBK=null,this.downImage=null,this.imgJokerFlag=null,this.imgJokerMask=null,this.bgShadow=null,this.poker=new i.PokerData}onLoad(){this.setJokerFlag(!1)}setPoker(e){this.poker.init(e),this.makePoker()}getPokerData(){return this.poker}makePoker(){let e=this.poker.getCode(),t=this.poker.getPoint(),o=this.poker.getColor();this.imgPokerBK.node.color=cc.Color.WHITE,this.bgShadow.node.active=!0,e<0?(this.upNumber.node.active=!1,this.upImage.node.active=!1,this.downImage.node.active=!1,this.bgShadow.node.active=!1,-2==e?(this.imgPokerBK.spriteFrame=cc.resources.get("Texture/Game/Poker/poker_bg",cc.SpriteFrame),this.imgPokerBK.node.color=(new cc.Color).fromHEX("3f3f3d")):this.imgPokerBK.spriteFrame=cc.resources.get("Texture/Game/Poker/poker_back",cc.SpriteFrame)):i.PokerData.isJoker(e)?(this.upNumber.node.active=!1,this.upImage.node.active=!1,this.downImage.node.active=!1,this.imgPokerBK.spriteFrame=cc.resources.get("Texture/Game/Poker/joker_big",cc.SpriteFrame)):t>=10?this.makeFaceCard(t,o):this.makeNormalPoker(t,o)}makeNormalPoker(e,t){let o="";switch(e){case i.PokerPoint.PointA:o="1";break;case i.PokerPoint.Point2:o="2";break;case i.PokerPoint.Point3:o="3";break;case i.PokerPoint.Point4:o="4";break;case i.PokerPoint.Point5:o="5";break;case i.PokerPoint.Point6:o="6";break;case i.PokerPoint.Point7:o="7";break;case i.PokerPoint.Point8:o="8";break;case i.PokerPoint.Point9:o="9";break;case i.PokerPoint.Point10:o="10"}let a="",s="";switch(t){case i.PokerColor.Spade:a=cc.js.formatStr("clubs_%s",o),s="spades_down";break;case i.PokerColor.Heart:a=cc.js.formatStr("diamonds_%s",o),s="hearts_down";break;case i.PokerColor.Club:a=cc.js.formatStr("clubs_%s",o),s="clubs_down";break;case i.PokerColor.Diamond:a=cc.js.formatStr("diamonds_%s",o),s="diamonds_down"}this.upNumber.node.active=!0,this.upImage.node.active=!0,this.downImage.node.active=!0,this.imgPokerBK.spriteFrame=cc.resources.get("Texture/Game/Poker/poker_bg",cc.SpriteFrame),this.upNumber.spriteFrame=cc.resources.get("Texture/Game/Poker/"+a,cc.SpriteFrame),this.upImage.spriteFrame=cc.resources.get("Texture/Game/Poker/"+s,cc.SpriteFrame),this.downImage.spriteFrame=cc.resources.get("Texture/Game/Poker/"+s,cc.SpriteFrame),e==i.PokerPoint.Point10?this.upNumber.node.scaleX=1.666:this.upNumber.node.scaleX=1}makeFaceCard(e,t){let o="";switch(e){case i.PokerPoint.PointJ:o="j";break;case i.PokerPoint.PointQ:o="q";break;case i.PokerPoint.PointK:o="k"}let a="";switch(t){case i.PokerColor.Spade:a="spades";break;case i.PokerColor.Heart:a="hearts";break;case i.PokerColor.Club:a="clubs";break;case i.PokerColor.Diamond:a="diamonds"}this.upNumber.node.active=!1,this.upImage.node.active=!1,this.downImage.node.active=!1,this.imgPokerBK.spriteFrame=cc.resources.get("Texture/Game/Poker/"+o+"_"+a,cc.SpriteFrame)}setJokerFlag(e){this.imgJokerFlag.node.active=e,this.imgJokerMask.node.active=e}};a([r(cc.Sprite)],c.prototype,"upNumber",void 0),a([r(cc.Sprite)],c.prototype,"upImage",void 0),a([r(cc.Sprite)],c.prototype,"imgPokerBK",void 0),a([r(cc.Sprite)],c.prototype,"downImage",void 0),a([r(cc.Sprite)],c.prototype,"imgJokerFlag",void 0),a([r(cc.Sprite)],c.prototype,"imgJokerMask",void 0),a([r(cc.Sprite)],c.prototype,"bgShadow",void 0),c=a([s,n("Game/PokerNode")],c),o.default=c,cc._RF.pop()},{"../Business/Data/PokerData":"PokerData"}],PopupBase:[function(e,t,o){"use strict";cc._RF.push(t,"b6107kAL7dMzqZ3iXRw2h4a","PopupBase");var a=this&&this.__decorate||function(e,t,o,a){var i,s=arguments.length,r=s<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,a);else for(var n=e.length-1;n>=0;n--)(i=e[n])&&(r=(s<3?i(r):s>3?i(t,o,r):i(t,o))||r);return s>3&&r&&Object.defineProperty(t,o,r),r},i=this&&this.__awaiter||function(e,t,o,a){return new(o||(o=Promise))(function(i,s){function r(e){try{c(a.next(e))}catch(t){s(t)}}function n(e){try{c(a.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(r,n)}c((a=a.apply(e,t||[])).next())})};Object.defineProperty(o,"__esModule",{value:!0});const{ccclass:s,property:r}=cc._decorator;let n=class extends cc.Component{constructor(){super(...arguments),this.background=null,this.main=null,this.animationDuration=.3,this.blocker=null,this.options=null,this.finishCallback=null}show(e,t){return i(this,void 0,void 0,function*(){this.options=e,this.init(e),this.updateDisplay(e),this.onBeforeShow&&(yield this.onBeforeShow()),null==t&&(t=t<0?0:this.animationDuration),yield this.playShowAnimation(t),this.onAfterShow&&this.onAfterShow()})}hide(e=!1,t){return i(this,void 0,void 0,function*(){const o=this.node;if(0!==t){let e=this.blocker;e||((e=this.blocker=new cc.Node("blocker")).addComponent(cc.BlockInputEvents),e.setParent(o),e.setContentSize(o.getContentSize())),e.active=!0}this.onBeforeHide&&(yield this.onBeforeHide(e)),null==t&&(t=t<0?0:this.animationDuration),yield this.playHideAnimation(t),this.blocker&&(this.blocker.active=!1),o.active=!1,this.onAfterHide&&this.onAfterHide(e),this.finishCallback&&this.finishCallback(e)})}playShowAnimation(e){return new Promise(t=>{const o=this.background,a=this.main;this.node.active=!0,o.active=!0,o.opacity=0,a.active=!0,a.scale=.5,a.opacity=0,cc.tween(o).to(.5*e,{opacity:150}).start(),cc.tween(a).to(e,{scale:1,opacity:255},{easing:"backOut"}).call(t).start()})}playHideAnimation(e){return new Promise(t=>{cc.tween(this.background).delay(.5*e).to(.5*e,{opacity:0}).start(),cc.tween(this.main).to(e,{scale:.5,opacity:0},{easing:"backIn"}).call(t).start()})}init(e){}updateDisplay(e){}onBeforeShow(){return new Promise(e=>e())}onAfterShow(){}onBeforeHide(e){return new Promise(e=>e())}onAfterHide(e){}onSuspended(){return new Promise(e=>e())}};a([r({type:cc.Node,tooltip:!1})],n.prototype,"background",void 0),a([r({type:cc.Node,tooltip:!1})],n.prototype,"main",void 0),n=a([s],n),o.default=n,cc._RF.pop()},{}],PopupManager:[function(e,t,o){"use strict";cc._RF.push(t,"c0ea1lR4GpK0bTmoo90xNjo","PopupManager");var a=this&&this.__awaiter||function(e,t,o,a){return new(o||(o=Promise))(function(i,s){function r(e){try{c(a.next(e))}catch(t){s(t)}}function n(e){try{c(a.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(r,n)}c((a=a.apply(e,t||[])).next())})};Object.defineProperty(o,"__esModule",{value:!0});const i=e("./PopupBase");var s,r;(function(e){e[e.Once=1]="Once",e[e.Normal=2]="Normal",e[e.Frequent=3]="Frequent"})(s||(s={})),function(e){e[e.Done=1]="Done",e[e.Failed=2]="Failed",e[e.Waiting=3]="Waiting"}(r||(r={}));class n{static get prefabCache(){return this._prefabCache}static get nodeCache(){return this._nodeCache}static get current(){return this._current}static get queue(){return this._queue}static get suspended(){return this._suspended}static get container(){return this._container||cc.Canvas.instance.node}static set container(e){this._container=e}static get CacheMode(){return s}static get ShowResultType(){return r}static show(e,t,o){return new Promise(s=>a(this,void 0,void 0,function*(){if(o=this.parseParams(o),this._current||this.locked){if(!o||!o.immediately)return this.push(e,t,o),void s(r.Waiting);this.locked=!1,yield this.suspend()}this._current={path:e,options:t,params:o};let n=this.getNodeFromCache(e);if(!cc.isValid(n)){this.loadStartCallback&&this.loadStartCallback();const t=yield this.load(e);if(this.loadFinishCallback&&this.loadFinishCallback(),!cc.isValid(t))return cc.warn("[PopupManager]","\u5f39\u7a97\u52a0\u8f7d\u5931\u8d25",e),this._current=null,void s(r.Failed);n=cc.instantiate(t)}const c=n.getComponent(i.default);if(!c)return cc.warn("[PopupManager]","\u672a\u627e\u5230\u5f39\u7a97\u7ec4\u4ef6",e),this._current=null,void s(r.Failed);this._current.popup=c,this._current.node=n,n.setParent(this.container),n.setSiblingIndex(cc.macro.MAX_ZINDEX),c.finishCallback=t=>a(this,void 0,void 0,function*(){t||(this.locked=this._suspended.length>0||this._queue.length>0,this.recycle(e,n,o.mode),this._current=null,s(r.Done),yield new Promise(e=>{cc.Canvas.instance.scheduleOnce(e,this.interval)}),this.next())}),c.show(t)}))}static hide(){null!=this._current&&cc.isValid(this._current.popup)&&this._current.popup.hide()}static getNodeFromCache(e){const t=this._nodeCache;if(t.has(e)){const o=t.get(e);if(cc.isValid(o))return o;t.delete(e)}const o=this._prefabCache;if(o.has(e)){const t=o.get(e);if(cc.isValid(t))return t.addRef(),cc.instantiate(t);o.delete(e)}return null}static next(){if(this._current||0===this._suspended.length&&0===this._queue.length)return;let e=null;if(e=this._suspended.length>0?this._suspended.shift():this._queue.shift(),this.locked=!1,cc.isValid(e.popup))return this._current=e,e.node.setParent(this.container),void e.popup.show(e.options);this.show(e.path,e.options,e.params)}static push(e,t,o){this._current||this.locked?(this._queue.push({path:e,options:t,params:o}),this._queue.sort((e,t)=>e.params.priority-t.params.priority)):this.show(e,t,o)}static suspend(){return a(this,void 0,void 0,function*(){if(!this._current)return;const e=this._current;this._suspended.push(e),yield e.popup.onSuspended(),yield e.popup.hide(!0),this._current=null})}static recycle(e,t,o){switch(o){case s.Once:this._nodeCache.delete(e),t.destroy(),this.release(e);break;case s.Normal:this._nodeCache.delete(e),t.destroy();break;case s.Frequent:t.removeFromParent(!1),this._nodeCache.set(e,t)}}static load(e){return new Promise(t=>{const o=this._prefabCache;if(o.has(e)){const a=o.get(e);if(cc.isValid(a))return void t(a);o.delete(e)}cc.resources.load(e,(a,i)=>{a?t(null):(o.set(e,i),t(i))})})}static release(e){const t=this._nodeCache;let o=t.get(e);o&&(t.delete(e),cc.isValid(o)&&o.destroy(),o=null);const a=this._prefabCache;let i=a.get(e);i&&(i.refCount<=1&&a.delete(e),i.decRef(),i=null)}static parseParams(e){return null==e?new c:"[object Object]"!==Object.prototype.toString.call(e)?(cc.warn("[PopupManager]","\u5f39\u7a97\u53c2\u6570\u65e0\u6548\uff0c\u4f7f\u7528\u9ed8\u8ba4\u53c2\u6570"),new c):(null==e.mode&&(e.mode=s.Normal),null==e.priority&&(e.priority=0),null==e.immediately&&(e.immediately=!1),e)}}o.default=n,n._prefabCache=new Map,n._nodeCache=new Map,n._current=null,n._queue=[],n._suspended=[],n.locked=!1,n._container=null,n.interval=.05,n.loadStartCallback=null,n.loadFinishCallback=null;class c{constructor(){this.mode=s.Normal,this.priority=0,this.immediately=!1}}cc._RF.pop()},{"./PopupBase":"PopupBase"}],PrefabPool:[function(e,t,o){"use strict";cc._RF.push(t,"66c96CKFiJAvYsrBV2ocv6V","PrefabPool");var a=this&&this.__decorate||function(e,t,o,a){var i,s=arguments.length,r=s<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,a);else for(var n=e.length-1;n>=0;n--)(i=e[n])&&(r=(s<3?i(r):s>3?i(t,o,r):i(t,o))||r);return s>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});const{ccclass:i,property:s}=cc._decorator;let r=class{static get(e,t=null){null==this.poolList[e]&&(this.poolList[e]=[]);let o,a=this.poolList[e];0==a.length?(o=cc.instantiate(cc.resources.get(e))).poolKey=e:o=a.pop();var i=t?o.getComponent(t):null;return i&&i.reuse&&i.reuse.apply(i,arguments),o}static put(e,t=null){let o=this.poolList[e.poolKey];if(o&&-1==o.indexOf(e)){e.removeFromParent(!1);var a=t?e.getComponent(t):null;a&&a.unuse&&a.unuse(),o.push(e)}}static clear(e){let t=this.poolList[e];if(t){for(let e=0,o=t.length;e<o;e++)t[e].destroy();t.length=0}}static clearAll(){for(let e in this.poolList)this.clear(e)}static size(e){let t=this.poolList[e];return t?t.length:0}};r.poolList={},r=a([i],r),o.default=r,cc._RF.pop()},{}],RecordCell:[function(e,t,o){"use strict";cc._RF.push(t,"75785MACgRG245YrCnREBEz","RecordCell");var a=this&&this.__decorate||function(e,t,o,a){var i,s=arguments.length,r=s<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,a);else for(var n=e.length-1;n>=0;n--)(i=e[n])&&(r=(s<3?i(r):s>3?i(t,o,r):i(t,o))||r);return s>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0}),o.RecordCell=void 0;const i=e("../../MobileKit/MKIndex"),s=e("../Common/UIUtils"),{ccclass:r,property:n,menu:c}=cc._decorator;let l=class extends cc.Component{constructor(){super(...arguments),this.txtBalance=null,this.txtDate=null,this.txtTime=null,this.txtWin=null}onLoad(){}setData(e){this.txtDate.string=i.Utils.dateFormat("dd.mm.YYYY",e.time),this.txtTime.string=i.Utils.dateFormat("HH:MM:SS",e.time),this.txtBalance.string=s.UIUtils.getShortNumber(e.balance),e.isWin?(this.txtWin.node.color=cc.Color.GREEN,this.txtWin.string="WIN",this.txtBalance.node.color=cc.Color.GREEN):(this.txtWin.node.color=cc.Color.RED,this.txtWin.string="LOST",this.txtBalance.node.color=cc.Color.RED)}};a([n(cc.Label)],l.prototype,"txtBalance",void 0),a([n(cc.Label)],l.prototype,"txtDate",void 0),a([n(cc.Label)],l.prototype,"txtTime",void 0),a([n(cc.Label)],l.prototype,"txtWin",void 0),l=a([r,c("Lobby/RecordCell")],l),o.RecordCell=l,cc._RF.pop()},{"../../MobileKit/MKIndex":"MKIndex","../Common/UIUtils":"UIUtils"}],RecordPage:[function(e,t,o){"use strict";cc._RF.push(t,"dd16dRnmJBB2IlydX2gyB4C","RecordPage");var a=this&&this.__decorate||function(e,t,o,a){var i,s=arguments.length,r=s<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,a);else for(var n=e.length-1;n>=0;n--)(i=e[n])&&(r=(s<3?i(r):s>3?i(t,o,r):i(t,o))||r);return s>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0}),o.RecordPage=void 0;const i=e("../../Business/Data/CommonDefine"),s=e("./RecordCell"),r=e("../Common/PrefabPool"),{ccclass:n,property:c,menu:l}=cc._decorator;let d=class extends cc.Component{constructor(){super(...arguments),this.recordNode=null,this.recordCellList=[]}onLoad(){for(let e=0;e<10;e++){let e=r.default.get(i.PrefabList.RecordCell),t=e.getComponent(s.RecordCell);e.setParent(this.recordNode),e.active=!1,this.recordCellList.push(t)}}setRecordList(e){this.showRecordList(e)}showRecordList(e){e.forEach((e,t)=>{this.recordCellList[t].setData(e),this.recordCellList[t].node.active=!0})}};a([c(cc.Node)],d.prototype,"recordNode",void 0),d=a([n,l("Lobby/RecordPage")],d),o.RecordPage=d,cc._RF.pop()},{"../../Business/Data/CommonDefine":"CommonDefine","../Common/PrefabPool":"PrefabPool","./RecordCell":"RecordCell"}],ResultCell:[function(e,t,o){"use strict";cc._RF.push(t,"57f5aPH8ohO6LqeOpWQVm3U","ResultCell");var a=this&&this.__decorate||function(e,t,o,a){var i,s=arguments.length,r=s<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,a);else for(var n=e.length-1;n>=0;n--)(i=e[n])&&(r=(s<3?i(r):s>3?i(t,o,r):i(t,o))||r);return s>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});const i=e("../MobileKit/MKIndex"),s=e("./Common/UIUtils"),r=e("./PokerNode"),n=e("../Business/Data/PokerData"),c=e("../Business/Data/CommonDefine"),l=e("./Common/PrefabPool"),{ccclass:d,property:h,menu:u}=cc._decorator;let p=class extends cc.Component{constructor(){super(...arguments),this.txtName=null,this.txtChips=null,this.txtScore=null,this.imgWinner=null,this.imgItemBg=null,this.txtLost=null,this.panelHandCards=null,this.circleList=[],this.jokerPoint=-1,this.handCardsList=null}onLoad(){let e=[];for(let t=0;t<c.DEAL_CARDS_COUNT;++t){let t=l.default.get(c.PrefabList.PokerNode).getComponent(r.default);t.node.active=!1,this.panelHandCards.addChild(t.node),e.push(t),t.node.scale=.35}this.handCardsList=e}onDestroy(){}setData(e,t){this.jokerPoint=t,this.txtName.string=i.Utils.strMaxCut(e.getNickName(),12),this.txtChips.string=s.UIUtils.getShortNumber(e.getWinLose()),this.txtScore.string=e.getPoint().toString(),e.isWinner()?(this.imgWinner.node.active=!0,this.txtLost.node.active=!1,this.imgItemBg.node.active=!0,this.circleList.forEach(e=>{e.color=(new cc.Color).fromHEX("#FFCD69")})):(this.imgWinner.node.active=!1,this.txtLost.node.active=!0,this.imgItemBg.node.active=!1,this.circleList.forEach(e=>{e.color=cc.Color.WHITE})),this.updateCardGroup(e.getCardGroup())}updateCardGroup(e){let t=this.handCardsList,o=[];for(let s=0;s<e.length;++s){let e=(new cc.Node).addComponent(cc.Sprite);e.spriteFrame=cc.resources.get("Texture/Game/img_group_red",cc.SpriteFrame),e.type=cc.Sprite.Type.SLICED,e.sizeMode=cc.Sprite.SizeMode.CUSTOM,this.panelHandCards.addChild(e.node),e.node.y=-25,e.node.height=14,o.push(e)}let a=t[0],i=a.node.width*a.node.scale,r=i/2.5,n=(this.panelHandCards.width-r*(c.MAX_GROUP-1)-5*i)/(c.DEAL_CARDS_COUNT-5),l=i/2,d=Math.min(l,n)+2,h=(e.length-1)*r;for(let s=0;s<e.length;++s)h+=(e[s].cards.length-1)*d+i;this.panelHandCards.width=h;let u=-h/2,p=0;for(let c=0;c<e.length;++c){let a=e[c],n=a.cards.length,l=o[c];l.node.width=(n-1)*d+i+10,l.node.x=u+l.node.width/2-5,s.UIUtils.setGroupFlag(l,a.groupFlag);for(let e=0;e<n;++e){let o=a.cards[e];if(p>=t.length)continue;let s=t[p];s.node.active=!0,s.setPoker(o),this.setJokerFlag(s),s.node.x=i/2+u,p++,u+=e==n-1?i:d}u+=r}}setJokerFlag(e){let t=e.getPokerData().getCode();e.setJokerFlag(n.PokerData.getPokerPoint(t)==this.jokerPoint)}};a([h(cc.Label)],p.prototype,"txtName",void 0),a([h(cc.Label)],p.prototype,"txtChips",void 0),a([h(cc.Label)],p.prototype,"txtScore",void 0),a([h(cc.Sprite)],p.prototype,"imgWinner",void 0),a([h(cc.Sprite)],p.prototype,"imgItemBg",void 0),a([h(cc.Label)],p.prototype,"txtLost",void 0),a([h(cc.Node)],p.prototype,"panelHandCards",void 0),a([h([cc.Node])],p.prototype,"circleList",void 0),p=a([d],p),o.default=p,cc._RF.pop()},{"../Business/Data/CommonDefine":"CommonDefine","../Business/Data/PokerData":"PokerData","../MobileKit/MKIndex":"MKIndex","./Common/PrefabPool":"PrefabPool","./Common/UIUtils":"UIUtils","./PokerNode":"PokerNode"}],ResultLayer:[function(e,t,o){"use strict";cc._RF.push(t,"1ed4fNOYxdAtIAHOWSyYuDz","ResultLayer");var a=this&&this.__decorate||function(e,t,o,a){var i,s=arguments.length,r=s<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,a);else for(var n=e.length-1;n>=0;n--)(i=e[n])&&(r=(s<3?i(r):s>3?i(t,o,r):i(t,o))||r);return s>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});const i=e("../MobileKit/MKIndex"),s=e("../Business/Data/DataManager"),r=e("./ResultCell"),n=e("../Business/Logic/GameNotice"),c=e("./Common/PopupBase"),{ccclass:l,property:d,menu:h}=cc._decorator;let u=class extends c.default{constructor(){super(...arguments),this.item=null,this.listContent=null,this.txtTips=null}onLoad(){this.item.active=!1,this.setListData(),this.showStartingTips(s.default.gameData.getStageLeftTime()),i.noticeCenter.registAllNotice(this)}onDestroy(){i.noticeCenter.targetOff(this)}setDelayShow(e){if(e>0){this.node.opacity=0;let t=cc.tween(this.node);t.delay(e),t.set({opacity:255}),t.start()}}onTouchClose(){this.hide()}onNtcPrepare(){this.showStartingTips(s.default.gameData.getStageLeftTime())}setListData(){let e=s.default.gameData.getResultData(),t=e.players;for(let o=0;o<t.length;++o){let a=cc.instantiate(this.item).getComponent(r.default);this.listContent.addChild(a.node),a.node.active=!0,a.setData(t[o],e.jokerPoint)}}showStartingTips(e){if(e<=0)return;e>30&&(e=30);let t=Math.floor(e)-1;if(t<=0)return void(this.txtTips.node.active=!1);this.txtTips.node.active=!0;let o=cc.tween(this.node);for(let a=t;a>0;a--)o.call(()=>{this.txtTips.string=i.LocalLang.get("game_result_new_game",[a])}),o.delay(1);o.call(()=>{this.txtTips.node.active=!1,this.hide()}),this.node.stopAllActions(),o.start()}};a([d(cc.Node)],u.prototype,"item",void 0),a([d(cc.Node)],u.prototype,"listContent",void 0),a([d(cc.Label)],u.prototype,"txtTips",void 0),a([i.onNotice(n.NtcDealCards)],u.prototype,"onTouchClose",null),a([i.onNotice(n.NtcPrepare)],u.prototype,"onNtcPrepare",null),u=a([l],u),o.default=u,cc._RF.pop()},{"../Business/Data/DataManager":"DataManager","../Business/Logic/GameNotice":"GameNotice","../MobileKit/MKIndex":"MKIndex","./Common/PopupBase":"PopupBase","./ResultCell":"ResultCell"}],SaveDataManager:[function(e,t,o){"use strict";cc._RF.push(t,"b5bf4wNauFNv7zVDbOkrZQ9","SaveDataManager"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=class{static init(){"1"!=cc.sys.localStorage.getItem("storageInited")&&(cc.sys.localStorage.setItem("isGameInitialized",1),cc.sys.localStorage.setItem("isEffect",1),cc.sys.localStorage.setItem("EffectVolume","1.0"),cc.sys.localStorage.setItem("isMusic",1),cc.sys.localStorage.setItem("MusicVolume","0.5"),cc.sys.localStorage.setItem("login_data",""),cc.sys.localStorage.setItem("update_version","0.0.0"),cc.sys.localStorage.setItem("storageInited",1),cc.sys.localStorage.setItem("AFConversionSource",0))}static setMusiceVolume(e){cc.sys.localStorage.setItem("MusicVolume",e+"")}static getMusiceVolume(){return parseFloat(cc.sys.localStorage.getItem("MusicVolume"))}static setEffectVolume(e){cc.sys.localStorage.setItem("EffectVolume",e+"")}static getEffectVolume(){return parseFloat(cc.sys.localStorage.getItem("EffectVolume"))}static setEffectEnable(e){cc.sys.localStorage.setItem("isEffect",e?1:-1)}static getEffectEnable(){return 1===parseInt(cc.sys.localStorage.getItem("isEffect"))}static setMusicEnable(e){cc.sys.localStorage.setItem("isMusic",e?1:-1)}static getMusicEnable(){return 1===parseInt(cc.sys.localStorage.getItem("isMusic"))}static setLoginData(e){cc.sys.localStorage.setItem("login_data",e)}static getLoginData(){return cc.sys.localStorage.getItem("login_data")}static setUpdateVersion(e){cc.sys.localStorage.setItem("update_version",e)}static getUpdateVersion(){return cc.sys.localStorage.getItem("update_version")}static setLastLoginTime(e){cc.sys.localStorage.setItem("last_login_time",e)}static getLastLoginTime(){return Number(cc.sys.localStorage.getItem("last_login_time"))}},cc._RF.pop()},{}],SceneController:[function(e,t,o){"use strict";cc._RF.push(t,"0e547EKRatPwbOjldagOfi/","SceneController");var a=this&&this.__decorate||function(e,t,o,a){var i,s=arguments.length,r=s<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,a);else for(var n=e.length-1;n>=0;n--)(i=e[n])&&(r=(s<3?i(r):s>3?i(t,o,r):i(t,o))||r);return s>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0}),o.SceneController=o.CmdScene=void 0;const i=e("../../MobileKit/MKIndex"),s=e("../Data/CommonDefine");let r=class{constructor(e){this.sceneType=e}};r=a([i.createCommand],r),o.CmdScene=r;class n extends i.Controller{constructor(){super(),this.setName("SceneController"),i.commandCenter.registAllCommand(this)}onCmdScene(e){let t=e.sceneType,o=null;t===s.SceneType.Game?o="Game":t==s.SceneType.Loading?o="Loading":t==s.SceneType.Lobby&&(o="Lobby"),null!=o&&cc.director.loadScene(o)}}a([i.onCommand(r)],n.prototype,"onCmdScene",null),o.SceneController=n,cc._RF.pop()},{"../../MobileKit/MKIndex":"MKIndex","../Data/CommonDefine":"CommonDefine"}],ScrollBarEnhance:[function(e,t,o){"use strict";cc._RF.push(t,"b1e2dgHsFtEUJDgCS9zOo13","ScrollBarEnhance");var a,i=this&&this.__decorate||function(e,t,o,a){var i,s=arguments.length,r=s<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,a);else for(var n=e.length-1;n>=0;n--)(i=e[n])&&(r=(s<3?i(r):s>3?i(t,o,r):i(t,o))||r);return s>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0}),o.ScrollBarEnhance=void 0;const{ccclass:s,property:r,requireComponent:n,menu:c}=cc._decorator;let l=a=class extends cc.Component{constructor(){super(...arguments),this.scrollView=null,this.renderEvent=[],this.vSlider=null}static creatEventHandler(e,t,o){const a=new cc.Component.EventHandler;return a.target=e,a.component=t,a.handler=o,a}refresh(e){let t,o=this.vSlider||this.node.getComponent(cc.Slider);t=Math.min(e,1),t=Math.max(e,0),o.progress=t,this.onSliderEvent(o,"")}start(){this.addScrollChildIndex()}addScrollChildIndex(){const e=this.scrollView;this.vSlider=this.node.getComponent(cc.Slider);let t=cc.js.getClassName(this);this.vSlider.slideEvents.push(a.creatEventHandler(this.node,t,"onSliderEvent")),e.scrollEvents.push(a.creatEventHandler(this.node,t,"onScrollEvent")),this.scrollMoveEvent()}onScrollEvent(e,t,o){switch(t){case cc.ScrollView.EventType.SCROLL_BEGAN:case cc.ScrollView.EventType.SCROLL_ENDED:break;case cc.ScrollView.EventType.SCROLLING:this.scrollMoveEvent()}}scrollMoveEvent(){let e,t;this.scrollView.vertical?(e=this.scrollView.getMaxScrollOffset().y,t=this.scrollView.getScrollOffset().y):(e=this.scrollView.getMaxScrollOffset().x,t=-1*this.scrollView.getScrollOffset().x),this.vSlider.progress=t/e>0&&t/e<1?t/e:t/e<=0?0:1,this.renderEvent&&this.renderEvent.length&&cc.Component.EventHandler.emitEvents(this.renderEvent,this.vSlider.progress)}onSliderEvent(e,t){let o=0,a=0;this.scrollView.vertical?(o=this.scrollView.getScrollOffset().x,a=this.scrollView.getMaxScrollOffset().y*e.progress):(o=this.scrollView.getMaxScrollOffset().x*e.progress,a=this.scrollView.getScrollOffset().y),this.scrollView.scrollToOffset(cc.v2(o,a),.05)}};i([r({tooltip:"\u5bf9\u5e94\u7684\uff08ScrollView\uff09\u6ed1\u52a8\u5217\u8868",type:cc.ScrollView})],l.prototype,"scrollView",void 0),i([r({type:[cc.Component.EventHandler],tooltip:!1})],l.prototype,"renderEvent",void 0),l=a=i([s,n(cc.Slider),c("\u7ec4\u4ef6\u5e93/ScrollBarEnhance")],l),o.ScrollBarEnhance=l,cc._RF.pop()},{}],TapStartLayer:[function(e,t,o){"use strict";cc._RF.push(t,"8af22+ff8xIEZPrZ9IIR4Zu","TapStartLayer");var a=this&&this.__decorate||function(e,t,o,a){var i,s=arguments.length,r=s<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,a);else for(var n=e.length-1;n>=0;n--)(i=e[n])&&(r=(s<3?i(r):s>3?i(t,o,r):i(t,o))||r);return s>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});const{ccclass:i,property:s,menu:r}=cc._decorator;let n=class extends cc.Component{constructor(){super(...arguments),this.innerCircle=null,this.outerCircle=null}static get path(){return"Scenes/Game/award_layer"}onLoad(){cc.tween(this.innerCircle).to(.7,{scale:1.2},{easing:"smooth"}).to(.5,{scale:1},{easing:"smooth"}).union().repeatForever().start(),cc.tween(this.outerCircle).to(.7,{scale:3,opacity:0},{easing:"smooth"}).to(0,{scale:1,opacity:255},{easing:"smooth"}).delay(.5).union().repeatForever().start(),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchStart,this)}onTouchStart(){cc.tween(this.node).by(.3,{y:this.node.height},{easing:"smooth"}).call(()=>{this.node.active=!1}).start()}};a([s(cc.Node)],n.prototype,"innerCircle",void 0),a([s(cc.Node)],n.prototype,"outerCircle",void 0),n=a([i],n),o.default=n,cc._RF.pop()},{}],UIUtils:[function(e,t,o){"use strict";cc._RF.push(t,"42718I/3LJJtKtCYuOhAlRx","UIUtils"),Object.defineProperty(o,"__esModule",{value:!0}),o.UIUtils=o.UnitKilo=o.UnitLakh=o.UnitCrore=void 0;const a=e("../../MobileKit/MKIndex"),i=e("../../Business/Data/DataManager"),s=e("../../Business/Data/CommonDefine");o.UnitCrore=1e7,o.UnitLakh=1e5,o.UnitKilo=1e3;class r{static getIndiaFormat(e){let t=e<0,o=t?String(-e):String(e),a=[],i=o.indexOf(".");if(-1===i)i=o.length;else{for(let e=o.length-1;e>i;e--)a.push(o[e]);a.push(".")}i--;for(let s=0;i>=0;i--,s++)s>2&&s%2==1&&a.push(","),a.push(o[i]);return t&&a.push("-"),a.reverse().join("")}static getShortStr(e,t,o){let a=e/t;return Math.floor(100*a)/100+o}static getSeparatorNumber(e,t=!1){let o=e%1;o=Math.floor(100*(o+cc.macro.FLT_EPSILON))/100;let a=Math.floor(e).toString(),i="",s=0,r=a.length;for(;s<r;){let e=r-s;e>10?(i=i+a.substr(s,r-10)+",",s=r-10):e>7?(i=i+a.substr(s,r-7)+",",s=r-7):e>5?(i=i+a.substr(s,r-5)+",",s=r-5):e>3?(i=i+a.substr(s,r-3)+",",s=r-3):(i+=a.substr(s,r),s=r)}return i}static cardFly(e,t,o,a,i,s){e.scale=a,e.opacity=255,e.setPosition(t),cc.tween(e).to(i,{x:o.x,y:o.y},{easing:"smooth"}).call(()=>{s&&s()}).start()}static flipToFront(e,t,o,a){return new Promise(i=>{const s=cc.tween,r=t/2;s(e).to(r,{eulerAngles:cc.v3(0,-270,0)},{easing:"quadIn"}).call(()=>{o&&o()}).to(r,{eulerAngles:cc.v3(0,0,0)},{easing:"quadOut"}).call(()=>{a&&a()}).call(i).start()})}static flipToBack(e,t,o,a){return new Promise(i=>{const s=cc.tween,r=t,n=r/2;s(e).to(r,{scale:1}).start(),s(e).to(n,{eulerAngles:cc.v3(0,-90,0)},{easing:"quadIn"}).call(()=>{o&&o()}).to(n,{eulerAngles:cc.v3(0,-180,0)},{easing:"quadOut"}).call(()=>{a&&a()}).call(i).start()})}static setJokerFlag(e){e.setJokerFlag(i.default.gameData.isWildJoker(e.getPokerData().getCode()))}static setGroupFlag(e,t){let o="",a="",i=cc.Color.WHITE;switch(t){case s.GroupFlag.None:o="",a="";break;case s.GroupFlag.Invalid:o="Not Correct",a="group_red";break;case s.GroupFlag.FirstNeed:o="1st Life Needed",a="group_blue",i=cc.Color.BLACK;break;case s.GroupFlag.SecondNeed:o="2nd Life Needed",a="group_blue",i=cc.Color.BLACK;break;case s.GroupFlag.Set:o="Set",a="group_green";break;case s.GroupFlag.ImpureSeq:o="Impure Sequence",a="group_green";break;case s.GroupFlag.PureSeq:o="Pure Sequence",a="group_green";break;case s.GroupFlag.FirstLife:o="1st Life",a="group_green";break;case s.GroupFlag.SecondLife:o="2nd Life",a="group_green"}""==a?e.node.active=!1:(e.node.active=!0,e.spriteFrame=cc.resources.get("Texture/Game/img_"+a,cc.SpriteFrame));let r=e.getComponentInChildren(cc.Label);r&&(r.string=o)}static ButtonEvent(e,t,o=.1){e.node.on(cc.Node.EventType.TOUCH_END,()=>{e.interactable?(a.AudioEngine.playEffect(s.SoundList.Click),o>0&&(e.interactable=!1,window.setTimeout(()=>{e&&(e.interactable=!0)},1e3*o)),t()):a.AudioEngine.playEffect(s.SoundList.BtnWrong)})}static NodeClickEvent(e,t,o){e.on(cc.Node.EventType.TOUCH_END,()=>{a.AudioEngine.playEffect(s.SoundList.Click),t()})}}o.UIUtils=r,r.getShortNumber=function(e,t,a){e/=i.default.homeData.getChipsUnit();let s,n=Math.abs(e);return s=n>=o.UnitCrore?r.getShortStr(n,o.UnitCrore,"Cr"):n>=o.UnitLakh?r.getShortStr(n,o.UnitLakh,"L"):r.getSeparatorNumber(n,t),e<0?s="-"+s:e>0&&a&&(s="+"+s),s},cc._RF.pop()},{"../../Business/Data/CommonDefine":"CommonDefine","../../Business/Data/DataManager":"DataManager","../../MobileKit/MKIndex":"MKIndex"}],UserData:[function(e,t,o){"use strict";cc._RF.push(t,"dad16pPzIBPJKEhCrLrDRq7","UserData"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=class{constructor(){this.m_uid="",this.m_nickName="",this.m_token="",this.m_isLogined=!1,this.m_headUrl="",this.m_balance=0,this.m_gameRecordLst=[],this.m_isGotRecord=!1,this.reset()}reset(){this.m_uid="",this.m_nickName="",this.m_token="",this.m_isLogined=!1,this.m_headUrl="",this.m_balance=0,this.m_gameRecordLst=[]}setNickName(e){this.m_nickName=e}getNickName(){return this.m_nickName}setUid(e){this.m_uid=e}getUid(){return this.m_uid}setToken(e){this.m_token=e}getToken(){return this.m_token}setLogined(e){this.m_isLogined=e}isLogined(){return this.m_isLogined}getHeadUrl(){return this.m_headUrl}setHeadUrl(e){this.m_headUrl=e}getBalance(){return this.m_balance}setBalance(e){this.m_balance=e}getGameRecordLst(){return this.m_gameRecordLst}setGameRecordLst(e){this.m_gameRecordLst=e}isGotRecord(){return this.m_isGotRecord}setGotRecord(e){this.m_isGotRecord=e}},cc._RF.pop()},{}],i18nLabel:[function(e,t,o){"use strict";cc._RF.push(t,"3e7e1yL3ltF4Ld2ONOefDbB","i18nLabel");var a=this&&this.__decorate||function(e,t,o,a){var i,s=arguments.length,r=s<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,a);else for(var n=e.length-1;n>=0;n--)(i=e[n])&&(r=(s<3?i(r):s>3?i(t,o,r):i(t,o))||r);return s>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0}),o.i18nLabel=void 0;const i=e("./MKLocalLang"),{ccclass:s,property:r,executeInEditMode:n,disallowMultiple:c,requireComponent:l,menu:d}=cc._decorator;let h=class extends cc.Component{constructor(){super(...arguments),this.i18n_string="",this.i18n_params=[]}start(){i.LocalLang._addOrDelLabel(this,!0),this._resetValue()}get string(){return this.i18n_string}set string(e){this.i18n_string=e,this.setEndValue()}get params(){return this.i18n_params}set params(e){this.i18n_params=e,this.setEndValue()}init(e,t){this.i18n_string=e,this.i18n_params=t,this.setEndValue()}setEndValue(){let e=this.getComponent(cc.Label);cc.isValid(e)&&(e.string=i.LocalLang.get(this.i18n_string,this.i18n_params))}_resetValue(){this.string=this.i18n_string}onDestroy(){i.LocalLang._addOrDelLabel(this,!1)}};a([r({visible:!1})],h.prototype,"i18n_string",void 0),a([r({visible:!1})],h.prototype,"i18n_params",void 0),a([r({type:cc.String})],h.prototype,"string",null),a([r({type:[cc.String]})],h.prototype,"params",null),h=a([s,n,l(cc.Label),c,d("\u591a\u8bed\u8a00/i18nLabel")],h),o.i18nLabel=h,cc._RF.pop()},{"./MKLocalLang":"MKLocalLang"}],i18nSprite:[function(e,t,o){"use strict";cc._RF.push(t,"a8777HUMEtKZKZSmfQV4Q10","i18nSprite");var a=this&&this.__decorate||function(e,t,o,a){var i,s=arguments.length,r=s<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,a);else for(var n=e.length-1;n>=0;n--)(i=e[n])&&(r=(s<3?i(r):s>3?i(t,o,r):i(t,o))||r);return s>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0}),o.i18nSprite=void 0;const i=e("./MKLocalLang"),{ccclass:s,property:r,executeInEditMode:n,disallowMultiple:c,requireComponent:l,menu:d}=cc._decorator;let h=class extends cc.Component{constructor(){super(...arguments),this.i18n_string=""}start(){i.LocalLang._addOrDelSprite(this,!0),this._resetValue()}get string(){return this.i18n_string}set string(e){this.i18n_string=e;let t=this.getComponent(cc.Sprite);cc.isValid(t)&&i.LocalLang._getSprite(e,e=>{cc.isValid(t)&&(t.spriteFrame=e)})}_resetValue(){this.string=this.i18n_string}onDestroy(){i.LocalLang._addOrDelSprite(this,!1)}};a([r({visible:!1})],h.prototype,"i18n_string",void 0),a([r({type:cc.String})],h.prototype,"string",null),h=a([s,n,l(cc.Sprite),c,d("\u591a\u8bed\u8a00/i18nSprite")],h),o.i18nSprite=h,cc._RF.pop()},{"./MKLocalLang":"MKLocalLang"}]},{},["BroadcastData","CommonDefine","ConfigManager","DataManager","GameData","HandCardsData","HomeData","PlayerData","PokerData","SaveDataManager","UserData","GameController","GameNotice","SceneController","GameSocket","HttpUtils","NetworkConstants","NetworkController","NetworkManager","NetworkNotice","HeartBeatHandler","MKAudioEngine","MKCryptoUtils","MKImageDownloader","MKLocalLang","MKSystem","MKUtils","i18nLabel","i18nSprite","ClickSoundComponent","MKActionQueue","MKCommandCenter","MKNoticeCenter","MKIndex","MKHttp","MKSocket","BroadcastCell","ConfirmDialog","GradientColor","MessageView","PopupBase","PopupManager","PrefabPool","ScrollBarEnhance","UIUtils","DropLayer","GameAction","GameScene","HelpLayer","InforLayer","LanguageLayer","LoadingConfig","LoadingScene","FilterCell","GameEntryCell","GameRecordLayer","LobbyScene","RecordCell","RecordPage","MenuLayer","PlayerNode","PokerNode","ResultCell","ResultLayer","TapStartLayer"]);